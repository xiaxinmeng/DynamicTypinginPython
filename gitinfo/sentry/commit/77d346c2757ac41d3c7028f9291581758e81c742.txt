commit 77d346c2757ac41d3c7028f9291581758e81c742
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 29 20:38:54 2014 -0800

    Minor work towards converting stream

diff --git a/gulpfile.js b/gulpfile.js
index c03fdc9c58..5fb04d4921 100644
--- a/gulpfile.js
+++ b/gulpfile.js
@@ -16,81 +16,67 @@ var staticPrefix = "src/sentry/static/sentry",
     distPath = staticPrefix + "/dist";
 
 var jsDistros = {
-  "app": [
-    file("app/modules/charts.js"),
-    file("app/modules/collection.js"),
-    file("app/modules/flash.js"),
-    file("app/modules/forms.js"),
-
-    file("app/controllers/default.js"),
-    file("app/controllers/deleteTeam.js"),
-    file("app/controllers/editProjectRule.js"),
-    file("app/controllers/groupDetails.js"),
-    file("app/controllers/manageAccessGroupMembers.js"),
-    file("app/controllers/manageAccessGroupProjects.js"),
-    file("app/controllers/manageProject.js"),
-    file("app/controllers/manageProjectNotifications.js"),
-    file("app/controllers/manageTeamOwnership.js"),
-    file("app/controllers/manageTeamSettings.js"),
-    file("app/controllers/projectStream.js"),
-    file("app/controllers/teamDashboard.js"),
-    file("app/controllers/teamList.js"),
-
-    file("app/directives/assigneeSelector.js"),
-    file("app/directives/clippy.js"),
-    file("app/directives/count.js"),
-    file("app/directives/timeSince.js"),
-    file("app/directives/broadcast.js"),
-
-    file("app/models/group.js")
-  ],
-
-  "legacy-app": [
-    file("app/init.js"),
-    file("app/charts.js"),
-    file("app/utils.js")
-  ],
-
-  "vendor-jquery": [
-    vendorFile("jquery/dist/jquery.min.js"),
-    file("scripts/lib/jquery.migrate.js"),
-
-    vendorFile("jquery-flot/jquery.flot.js"),
-    vendorFile("jquery-flot/jquery.flot.resize.js"),
-    vendorFile("jquery-flot/jquery.flot.stack.js"),
-    vendorFile("jquery-flot/jquery.flot.time.js"),
-    file("scripts/lib/jquery.flot.dashes.js"),
-    file("scripts/lib/jquery.flot.tooltip.js"),
-
-    file("scripts/lib/jquery.cookie.js"),
-
-    vendorFile("typeahead.js/dist/typeahead.jquery.min.js")
-  ],
-
-  "vendor-angular": [
-    vendorFile("angular/angular.min.js"),
-    vendorFile("angular-animate/angular-animate.min.js"),
-    vendorFile("angular-bootstrap/ui-bootstrap-tpls.min.js"),
-    vendorFile("angular-classy/angular-classy.min.js"),
-    vendorFile("angular-loading-bar/build/loading-bar.min.js")
-  ],
-
-  "vendor-backbone": [
-    file("scripts/lib/json2.js"),
-    file("scripts/lib/underscore.js"),
-    file("scripts/lib/backbone.js")
-  ],
-
-  "vendor-bootstrap": [
-    vendorFile("bootstrap/dist/js/bootstrap.min.js"),
-    vendorFile("bootstrap-datepicker/js/bootstrap-datepicker.js")
-  ],
-
-  "vendor-misc": [
-    vendorFile("moment/min/moment.min.js"),
-    vendorFile("simple-slider/js/simple-slider.min.js"),
-    vendorFile("selectize/dist/js/standalone/selectize.min.js")
-  ],
+  // "app": [
+  //   file("app/modules/charts.js"),
+  //   file("app/modules/collection.js"),
+  //   file("app/modules/flash.js"),
+  //   file("app/modules/forms.js"),
+
+  //   file("app/controllers/default.js"),
+  //   file("app/controllers/deleteTeam.js"),
+  //   file("app/controllers/editProjectRule.js"),
+  //   file("app/controllers/groupDetails.js"),
+  //   file("app/controllers/manageAccessGroupMembers.js"),
+  //   file("app/controllers/manageAccessGroupProjects.js"),
+  //   file("app/controllers/manageProject.js"),
+  //   file("app/controllers/manageProjectNotifications.js"),
+  //   file("app/controllers/manageTeamOwnership.js"),
+  //   file("app/controllers/manageTeamSettings.js"),
+  //   file("app/controllers/projectStream.js"),
+  //   file("app/controllers/teamDashboard.js"),
+  //   file("app/controllers/teamList.js"),
+
+  //   file("app/directives/assigneeSelector.js"),
+  //   file("app/directives/clippy.js"),
+  //   file("app/directives/count.js"),
+  //   file("app/directives/timeSince.js"),
+  //   file("app/directives/broadcast.js"),
+
+  //   file("app/models/group.js")
+  // ],
+
+  // "legacy-app": [
+  //   file("app/init.js"),
+  //   file("app/charts.js"),
+  //   file("app/utils.js")
+  // ],
+
+  // "vendor-jquery": [
+  //   vendorFile("jquery/dist/jquery.min.js"),
+  //   file("scripts/lib/jquery.migrate.js"),
+
+  //   vendorFile("jquery-flot/jquery.flot.js"),
+  //   vendorFile("jquery-flot/jquery.flot.resize.js"),
+  //   vendorFile("jquery-flot/jquery.flot.stack.js"),
+  //   vendorFile("jquery-flot/jquery.flot.time.js"),
+  //   file("scripts/lib/jquery.flot.dashes.js"),
+  //   file("scripts/lib/jquery.flot.tooltip.js"),
+
+  //   file("scripts/lib/jquery.cookie.js"),
+
+  //   vendorFile("typeahead.js/dist/typeahead.jquery.min.js")
+  // ],
+
+  // "vendor-bootstrap": [
+  //   vendorFile("bootstrap/dist/js/bootstrap.min.js"),
+  //   vendorFile("bootstrap-datepicker/js/bootstrap-datepicker.js")
+  // ],
+
+  // "vendor-misc": [
+  //   vendorFile("moment/min/moment.min.js"),
+  //   vendorFile("simple-slider/js/simple-slider.min.js"),
+  //   vendorFile("selectize/dist/js/standalone/selectize.min.js")
+  // ],
 
   "raven": [
     vendorFile("raven-js/dist/raven.min.js")
diff --git a/package.json b/package.json
index 3af3c59c0f..6ac570a473 100644
--- a/package.json
+++ b/package.json
@@ -6,6 +6,7 @@
     "url": "git://github.com/getsentry/sentry.git"
   },
   "dependencies": {
+    "bootstrap": "^3.3.1",
     "bower": "^1.2.8",
     "chai": "1.7.x",
     "gulp": "^3.8.10",
diff --git a/src/sentry/static/sentry/app-react/components/stream.jsx b/src/sentry/static/sentry/app-react/components/stream.jsx
new file mode 100644
index 0000000000..54d358f092
--- /dev/null
+++ b/src/sentry/static/sentry/app-react/components/stream.jsx
@@ -0,0 +1,20 @@
+/*** @jsx React.DOM */
+var React = require("react");
+
+var StreamActions = require("./streamActions")
+
+var Stream = React.createClass({
+  render: function() {
+    return (
+      <div class="group-header-container" data-spy="affix" data-offset-top="134">
+        <div class="container">
+          <div class="group-header">
+            <StreamActions/>
+          </div>
+        </div>
+      </div>
+    );
+  }
+});
+
+module.exports = Stream;
diff --git a/src/sentry/static/sentry/app-react/components/streamActions.jsx b/src/sentry/static/sentry/app-react/components/streamActions.jsx
new file mode 100644
index 0000000000..06f1a0ed5e
--- /dev/null
+++ b/src/sentry/static/sentry/app-react/components/streamActions.jsx
@@ -0,0 +1,97 @@
+/*** @jsx React.DOM */
+var React = require("react");
+
+var StreamActions = React.createClass({
+  render: function() {
+    return (
+      <div className="stream-actions">
+        <div className="stream-actions-left stream-actions-cell">
+          <div className="checkbox">
+            <input type="checkbox" className="chk-select-all"/>
+          </div>
+          <div className="btn-group">
+            <a href="javascript:void(0)" className="btn btn-default btn-sm action action-resolve">
+                <i aria-hidden="true" className="icon-checkmark"></i>
+            </a>
+            <a href="javascript:void(0)" className="btn btn-default btn-sm action action-bookmark">
+                <span className="icon icon-bookmark"></span>
+            </a>
+            <a className="btn btn-default btn-sm hidden-xs action action-more dropdown-toggle" data-toggle="dropdown">
+              <span className="icon-ellipsis"></span>
+            </a>
+
+            <ul className="dropdown-menu more-menu">
+              <li><a href="javascript:void(0)" className="action action-merge">Merge Events</a></li>
+              <li><a href="javascript:void(0)" className="action action-remove-bookmark">Remove from Bookmarks</a></li>
+              <li className="divider"></li>
+              <li><a href="javascript:void(0)" className="action action-delete">Delete Events</a></li>
+            </ul>
+          </div>
+
+          <div className="btn-group">
+            <a href="javascript:void(0)" className="btn btn-default btn-sm hidden-xs realtime-control">
+              <span className="icon icon-pause"></span>
+            </a>
+          </div>
+          <div className="btn-group">
+            <a href="#" className="btn dropdown-toggle btn-sm" data-toggle="dropdown">
+              <span className="hidden-sm hidden-xs">Sort by:</span> sortLabel
+              <span aria-hidden="true" className="icon-arrow-down"></span>
+            </a>
+            <ul className="dropdown-menu">
+              <li className="active"><a href="?sort=priority">Priority</a></li>
+              <li><a href="?sort=date">Last Seen</a></li>
+              <li><a href="?sort=new">First Seen</a></li>
+              <li><a href="?sort=freq">Frequency</a></li>
+            </ul>
+          </div>
+          <div className="btn-group">
+            <a href="#" className="btn dropdown-toggle btn-sm" onclick="" data-toggle="dropdown">
+              All time
+            <span aria-hidden="true" className="icon-arrow-down"></span></a>
+            <div className="datepicker-box dropdown-menu" id="daterange">
+              <form method="GET" action=".">
+                <div className="input">
+                  <div className="inline-inputs">
+                    <input data-toggle="datepicker" data-date-format="yyyy-mm-dd"name="df" className="form-control date" type="text" placeholder="Date" />
+                    <input className="time form-control" type="text" name="tf" placeholder="Time" />
+                    to
+                    <input data-toggle="datepicker" data-date-format="yyyy-mm-dd" name="dt" className="date form-control" type="text" placeholder="Date"/>
+                    <input className="time form-control" type="text" name="tt" placeholder="Time" />
+                  </div>
+                  <div className="help-block">All events are represented in UTC time.</div>
+                </div>
+                <div className="submit">
+                  <div className="pull-right">
+                    <button className="btn btn-default btn-sm">Clear</button>
+                    <button className="btn btn-primary btn-sm">Apply</button>
+                  </div>
+                  <div className="radio-inputs">
+                    <label className="radio">
+                      <input type="radio" name="date_type" value="last_seen" /> Last Seen
+                    </label>
+                    <label className="radio">
+                      <input type="radio" name="date_type" value="first_seen" /> First Seen
+                    </label>
+                  </div>
+                </div>
+              </form>
+            </div>
+          </div>
+        </div>
+        <div className="hidden-sm hidden-xs stream-actions-assignee stream-actions-cell">
+        </div>
+        <div className="hidden-sm hidden-xs stream-actions-graph stream-actions-cell">
+          <ul className="toggle-graph">
+            <li><a>24h</a></li>
+            <li><a>30d</a></li>
+          </ul>
+        </div>
+        <div className="stream-actions-occurrences stream-actions-cell align-center hidden-xs"> events</div>
+        <div className="stream-actions-users stream-actions-cell align-center hidden-xs"> users</div>
+      </div>
+    );
+  }
+});
+
+module.exports = StreamActions
diff --git a/src/sentry/static/sentry/app-react/main.jsx b/src/sentry/static/sentry/app-react/main.jsx
index 39e6bbe7ff..674e81598e 100644
--- a/src/sentry/static/sentry/app-react/main.jsx
+++ b/src/sentry/static/sentry/app-react/main.jsx
@@ -1,44 +1,10 @@
 /*** @jsx React.DOM */
-var React = require("react");
-var Router = require("react-router");
-var $ = require("jquery");
 
-var Route = Router.Route;
-var NotFoundRoute = Router.NotFoundRoute;
-var DefaultRoute = Router.DefaultRoute;
-var Link = Router.Link;
-var RouteHandler = Router.RouteHandler;
+// these get exported to a global variable, which is important as its the only
+// way we can call into scoped objects
+module.exports = {
+  jQuery: require("jquery"),
+  React: require("react"),
 
-var App = React.createClass({
-  render: function() {
-    return (
-      <div>
-        Hello World!
-        <RouteHandler/>
-      </div>
-    );
-  }
-});
-
-var Example = React.createClass({
-  render: function() {
-    return (
-      <div>
-        Test
-      </div>
-    );
-  }
-});
-
-var routes = (
-  <Route handler={App}>
-    <Route name="example" handler={Example}/>
-    <DefaultRoute handler={Example}/>
-  </Route>
-);
-
-$(function(){
-  Router.run(routes, function (Handler) {
-    React.render(<Handler/>, document.body);
-  });
-});
+  Stream: require("./components/stream")
+};
diff --git a/src/sentry/templates/sentry/groups/group_list.html b/src/sentry/templates/sentry/groups/group_list.html
index 21878943c1..b08c4d6612 100644
--- a/src/sentry/templates/sentry/groups/group_list.html
+++ b/src/sentry/templates/sentry/groups/group_list.html
@@ -10,200 +10,10 @@
 {% block content %}
     {% querystring from request without sort as sort_querystring %}
     {% querystring from request without since as since_querystring %}
-    <div class="group-header-container" data-spy="affix" data-offset-top="134">
-      <div class="container">
-        <div class="group-header">
-          <div class="stream-actions">
-            <div class="stream-actions-left stream-actions-cell">
-                <div class="checkbox">
-                    <input type="checkbox" class="chk-select-all">
-                </div>
-                <div class="btn-group">
-                    <a href="javascript:void(0)" class="btn btn-default btn-sm action action-resolve">
-                        <i aria-hidden="true" class="icon-checkmark"></i>
-                    </a>
-                    <a href="javascript:void(0)" class="btn btn-default btn-sm action action-bookmark">
-                        <span class="icon icon-bookmark"></span>
-                    </a>
-                    <a class="btn btn-default btn-sm hidden-xs action action-more dropdown-toggle" data-toggle="dropdown">
-                      <span class="icon-ellipsis"></span>
-                    </a>
-
-                    <ul class="dropdown-menu more-menu" style="left: 0">
-                      <li><a href="javascript:void(0)" class="action action-merge">Merge Events</a></li>
-                      <li><a href="javascript:void(0)" class="action action-remove-bookmark">Remove from Bookmarks</a></li>
-                      <li class="divider"></li>
-                      <li><a href="javascript:void(0)" class="action action-delete">Delete Events</a></li>
-                    </ul>
-                </div>
-
-                <div class="btn-group">
-                    <a href="javascript:void(0)" class="btn btn-default btn-sm hidden-xs realtime-control">
-                        <span class="icon icon-pause"></span>
-                    </a>
-                </div>
-                <div class="btn-group">
-                    <a href="#" class="btn dropdown-toggle btn-sm" data-toggle="dropdown">
-                      <span class="hidden-sm hidden-xs">Sort by:</span> <% sortLabel %>
-                      <span aria-hidden="true" class="icon-arrow-down"></span>
-                    </a>
-                    <ul class="dropdown-menu">
-                        <li{% ifequal sort 'priority' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=priority">{{ SORT_OPTIONS.priority }}</a></li>
-                        <li{% ifequal sort 'date' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=date">{{ SORT_OPTIONS.date }}</a></li>
-                        <li{% ifequal sort 'new' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=new">{{ SORT_OPTIONS.new }}</a></li>
-                        <li{% ifequal sort 'freq' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=freq">{{ SORT_OPTIONS.freq }}</a></li>
-                        <li class="divider"></li>
-                        <li{% ifequal sort 'tottime' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=tottime">{{ SORT_OPTIONS.tottime }}</a></li>
-                        <li{% ifequal sort 'avgtime' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=avgtime">{{ SORT_OPTIONS.avgtime }}</a></li>
-                    </ul>
-                </div>
-                <div class="btn-group">
-                    <a href="#" class="btn dropdown-toggle btn-sm" onclick="" data-toggle="dropdown">
-                        {% if from_date %}
-                            {% if not to_date %}
-                                Since: {{ from_date|date:"M jS" }}
-                            {% else %}
-                                Between: {{ from_date|date:"M jS" }} <small>and</small> {{ to_date|date:"M jS" }}
-                            {% endif %}
-                        {% else %}
-                            {% if to_date %}
-                                Before: {{ to_date|date:"M jS" }}
-                            {% else %}
-                                All time
-                            {% endif %}
-                        {% endif %}
-                     <span aria-hidden="true" class="icon-arrow-down"></span></a>
-                     <div class="datepicker-box dropdown-menu" id="daterange">
-                         <form method="GET" action=".">
-                             {% for key, value in request.GET.iteritems %}
-                                 {% if key != df and key != tf and key != dt and key != tt and key != page %}
-                                     <input type="hidden" name="{{ key }}" value="{{ value }}">
-                                 {% endif %}
-                             {% endfor %}
-                             <div class="input">
-                               <div class="inline-inputs">
-                                 <input data-toggle="datepicker" data-date-format="yyyy-mm-dd"name="df" class="form-control date" type="text" value="{% if from_date %}{{ from_date|date:"Y-m-d" }}{% endif %}" placeholder="Date" />
-                                 <input class="time form-control" type="text" name="tf" value="{% if from_date %}{{ from_date|time:"h:i A" }}{% endif %}" placeholder="Time" />
-                                 to
-                                 <input data-toggle="datepicker" data-date-format="yyyy-mm-dd" name="dt" class="date form-control" type="text" value="{% if to_date %}{{ to_date|date:"Y-m-d" }}{% endif %}" placeholder="Date"/>
-                                 <input class="time form-control" type="text" name="tt" value="{% if to_date %}{{ to_date|time:"h:i A" }}{% endif %}" placeholder="Time" />
-                               </div>
-                               <div class="help-block">{% trans "All events are represented in UTC time." %}</div>
-                             </div>
-                             <div class="submit">
-                                 <div class="pull-right">
-                                     <button class="btn btn-default btn-sm" onclick="$('#daterange input[type=text]').val(''); this.form.submit();">{% trans "Clear" %}</button>
-                                     <button class="btn btn-primary btn-sm">{% trans "Apply" %}</button>
-                                 </div>
-                                 <div class="radio-inputs">
-                                     <label class="radio">
-                                         <input type="radio" name="date_type" value="last_seen" {% if date_type != 'first_seen' %}checked{% endif %}> {% trans "Last Seen" %}
-                                     </label>
-                                     <label class="radio">
-                                         <input type="radio" name="date_type" value="first_seen" {% if date_type == 'first_seen' %}checked{% endif %}> {% trans "First Seen" %}
-                                     </label>
-                                 </div>
-                             </div>
-                         </form>
-                     </div>
-                </div>
-              </div>
-              <div class="hidden-sm hidden-xs stream-actions-assignee stream-actions-cell">
-              </div>
-                <div class="hidden-sm hidden-xs stream-actions-graph stream-actions-cell">
-                  <ul class="toggle-graph">
-                    <li ng-class="chartDuration == '24h' ? 'active' : ''"><a ng-click="setChartDuration('24h')">24h</a></li>
-                    <li ng-class="chartDuration == '30d' ? 'active' : ''"><a ng-click="setChartDuration('30d')">30d</a></li>
-                  </ul>
-                </div>
-                <div class="stream-actions-occurrences stream-actions-cell align-center hidden-xs"> events</div>
-                <div class="stream-actions-users stream-actions-cell align-center hidden-xs"> users</div>
-            </div>
-        </div>
-      </div>
-    </div>
-
-    {% comment %}
-    {% recent_alerts from project as recent_alerts %}
-    {% if recent_alerts %}
-        <ul class="active-alerts">
-            {% for alert in recent_alerts %}
-                <li class="alert alert-error">
-                    <a class="close" data-dismiss="alert">Ã—</a>
-                    <a href="{% url 'sentry-alert-details' project.organization.slug project.slug alert.id %}">{{ alert.message }}</a>
-                    <small>&mdash; {{ alert.datetime|timesince }}</small>
-                </li>
-            {% endfor %}
-        </ul>
-    {% endif %}
-    {% endcomment %}
-
-    <ul class="group-list" ng-if="groupList.length">
-        <li class="group" ng-repeat="group in groupList"
-            ng-class="{'seen': group.hasSeen, 'resolved': group.status == 'resolved'}">
-            <div class="event-details event-cell">
-              <div class="checkbox">
-                  <input type="checkbox" class="chk-select" value="<% group.id %>">
-              </div>
-              <h3><a href="<% group.permalink %>">
-                <span class="icon icon-bookmark" ng-if="group.isBookmarked"></span>
-                <% group.title %></a>
-              </h3>
-              <div class="event-message">
-                <span class="message"><% group.culprit %></span>
-              </div>
-              <div class="event-meta">
-                <span class="last-seen"><time time-since="group.lastSeen"></time></span>
-                &mdash;
-                <span class="first-seen">from <time time-since="group.firstSeen"></time></span>
-              </div>
-            </div>
-            <div class="event-assignee event-cell hidden-xs hidden-sm">
-                <assignee-selector group="group"></assignee-selector>
-            </div>
-            <div class="hidden-sm hidden-xs event-graph align-right event-cell">
-              <barchart data="group.activeChartData" options="chartOptions" class="sparkline"></barchart>
-            </div>
-            <div class="hidden-xs event-occurrences align-center event-cell">
-              <span count="group.count"></span>
-            </div>
-            <div class="hidden-xs event-users align-center event-cell">
-              <span count="group.tags['sentry:user'].count || 0"></span>
-            </div>
-        </li>
-    </ul>
-
-    <div class="stream-pagination" ng-if="groupList.length">
-        <div class="btn-group pull-right">
-            {% spaceless %}
-                {% if previous_page %}
-                    <a class="btn btn-default btn-lg prev" href="?{{ pageless_query_string|escape }}&amp;p={{ previous_page }}">
-                        <span title="{% trans "Previous" %}" class="icon-arrow-left"></span>
-                    </a>
-                {% else %}
-                    <a class="btn btn-default btn-lg prev disabled">
-                        <span title="{% trans "Previous" %}" class="icon-arrow-left"></span>
-                    </a>
-                {% endif %}
-                {% if next_page %}
-                    <a class="btn btn-default btn-lg next" href="?{{ pageless_query_string|escape }}&amp;p={{ next_page }}">
-                        <span title="{% trans "Next" %}" class="icon-arrow-right"></span></a>
-                {% else %}
-                    <a class="btn btn-default btn-lg next disabled">
-                        <span calss="{% trans "Next" %}" class="icon-arrow-right"></span>
-                    </a>
-                {% endif %}
-            {% endspaceless %}
-        </div>
-    </div>
-
-    <div class="stream-empty" ng-if="!groupList.length">
-      <div class="container">
-        <h3>No events to show.</h3>
-      </div>
-    </div>
-
+    <div id="blk_stream"></div>
     <script>
-    window.groupList = {% convert_to_json event_list %};
+    $(function(){
+      React.renderComponent(Stream(), document.getElementById('blk_stream'));
+    });
     </script>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index d6822b40af..9c32fd006e 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -52,12 +52,17 @@
             {% endif %}
             </script>
 
-            <script src="{% url 'sentry-media' "sentry" "dist/vendor-angular.min.js" %}"></script>
-            <script src="{% url 'sentry-media' "sentry" "dist/vendor-jquery.min.js" %}"></script>
-            <script src="{% url 'sentry-media' "sentry" "dist/vendor-bootstrap.min.js" %}"></script>
-            <script src="{% url 'sentry-media' "sentry" "dist/vendor-misc.min.js" %}"></script>
-            <script src="{% url 'sentry-media' "sentry" "dist/app.min.js" %}"></script>
-            <script src="{% url 'sentry-media' "sentry" "dist/legacy-app.min.js" %}"></script>
+            <script src="{% url 'sentry-media' "sentry" "dist/vendor.js" %}"></script>
+            <script src="{% url 'sentry-media' "sentry" "dist/app-react.js" %}"></script>
+
+            <script>
+            (function(){
+              for (var n in window.exports) {
+                window[n] = window.exports[n];
+              }
+              window.$ = window.jQuery;
+            }());
+            </script>
 
             {% include "sentry/includes/ravenjs.html" %}
         {% endblock %}
@@ -210,12 +215,12 @@
                     {% endblock %}
 
                     {% block content %}
-                    <div class="row">
+                    <div class="row" id="blk_content">
                         <div class="col-sm-3 sidebar">
                             {% block sidebar %}
                             {% endblock %}
                         </div>
-                        <div class="col-sm-9">
+                        <div class="col-sm-9" id="blk_main">
                             {% block main %}
                             {% endblock %}
                         </div>
diff --git a/webpack.config.js b/webpack.config.js
index 96636d937b..0303993df9 100644
--- a/webpack.config.js
+++ b/webpack.config.js
@@ -14,14 +14,14 @@ function vendorFile(name) {
 
 module.exports = {
   entry: {
-    "app-react": file('app-react/main.jsx'),
+    "app-react": file("app-react/main.jsx"),
     "vendor": ["react", "react-router", "jquery"]
   },
   module: {
     loaders: [
       {
         test: /\.jsx$/,
-        loader: 'jsx-loader?insertPragma=React.DOM&harmony'
+        loader: "jsx-loader?insertPragma=React.DOM&harmony"
       }
     ]
   },
@@ -30,9 +30,11 @@ module.exports = {
   ],
   resolve: {
     modulesDirectories: [distPath, "node_modules"],
-    extensions: ['', '.jsx', '.js', '.json']
+    extensions: ["", ".jsx", ".js", ".json"]
   },
   output: {
-    filename: distPath + '/[name].js'
+    filename: distPath + "/[name].js",
+    libraryTarget: "var",
+    library: "exports"
   }
 }
