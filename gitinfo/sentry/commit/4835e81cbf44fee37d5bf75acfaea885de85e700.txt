commit 4835e81cbf44fee37d5bf75acfaea885de85e700
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Nov 30 14:23:34 2017 -0800

    build(jest): upgrade jest + tests (#6126)
    
    * build(jest): upgrade jest + tests
    
    * Breaking changes to tests, `this` no longer works in test suites, declare
    variable at outter most `describe` block instead
    * `Client` mock has new `mockAsync` static var to mock async responses
    
    * meta(jest): Add vscode debugger for jest
    
    * update snapshots

diff --git a/.vscode/launch.json b/.vscode/launch.json
new file mode 100644
index 0000000000..7988e0ec8d
--- /dev/null
+++ b/.vscode/launch.json
@@ -0,0 +1,36 @@
+{
+    // Use IntelliSense to learn about possible attributes.
+    // Hover to view descriptions of existing attributes.
+    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
+    "version": "0.2.0",
+    "configurations": [
+        {
+          "name": "sentry frontend",
+          "type": "chrome",
+          "request": "launch",
+          "url": "http://localhost:8000",
+          "webRoot": "${workspaceRoot}/src/sentry/static/sentry/app"
+        },
+        {
+          "name": "sentry backend",
+          "type": "python",
+          "request": "launch",
+          "stopOnEntry": true,
+          "program": "/Users/billy/.virtualenvs/sentry/bin/sentry",
+          "args": ["devserver"],
+          "cwd": "${workspaceRoot}",
+          "debugOptions": ["WaitOnAbnormalExit", "WaitOnNormalExit", "RedirectOutput"]
+        },
+        {
+            "name": "jest",
+            "type": "node",
+            "request": "launch",
+            "protocol": "inspector",
+            "program": "${workspaceFolder}/node_modules/.bin/jest",
+            "internalConsoleOptions": "openOnSessionStart",
+            "args": [
+                "--runInBand"
+            ]
+        }
+    ]
+}
diff --git a/package.json b/package.json
index 73244ee724..d4b1797172 100644
--- a/package.json
+++ b/package.json
@@ -85,6 +85,7 @@
     "test-ci": "npm run test -- --runInBand",
     "test-watch": "npm run test -- --watch",
     "jest": "NODE_ENV=test node_modules/.bin/jest",
+    "jest-debug": "NODE_ENV=test node --inspect-brk node_modules/.bin/jest --runInBand",
     "lint": "node_modules/.bin/eslint tests/js src/sentry/static/sentry/app --ext .jsx",
     "dev-proxy": "node scripts/devproxy.js",
     "dev-server": "webpack-dev-server",
@@ -121,7 +122,7 @@
     "@storybook/addon-knobs": "^3.2.10",
     "@storybook/react": "^3.2.11",
     "babel-eslint": "7.2.3",
-    "babel-jest": "^19.0.0",
+    "babel-jest": "21.2.0",
     "chai": "3.4.1",
     "enzyme": "2.9.1",
     "eslint": "4.4.1",
@@ -131,7 +132,7 @@
     "eslint-plugin-getsentry": "1.0.0",
     "eslint-plugin-import": "^2.7.0",
     "eslint-plugin-react": "7.4.0",
-    "jest": "^19.0.2",
+    "jest": "21.2.1",
     "phantomjs-prebuilt": "2.1.14",
     "prettier": "1.7.4",
     "sinon": "1.17.2",
diff --git a/src/sentry/static/sentry/app/__mocks__/api.jsx b/src/sentry/static/sentry/app/__mocks__/api.jsx
index 1e9f185293..883f385264 100644
--- a/src/sentry/static/sentry/app/__mocks__/api.jsx
+++ b/src/sentry/static/sentry/app/__mocks__/api.jsx
@@ -1,6 +1,16 @@
 export class Request {}
 
-export class Client {
+const respond = (isAsync, fn, ...args) => {
+  if (fn) {
+    if (isAsync) {
+      setTimeout(() => fn(...args), 1);
+    } else {
+      fn(...args);
+    }
+  }
+};
+
+class Client {
   static mockResponses = [];
 
   static clearMockResponses() {
@@ -29,6 +39,8 @@ export class Client {
 
   clear() {}
 
+  static mockAsync = false;
+
   merge(params, options) {
     let path = '/projects/' + params.orgId + '/' + params.projectId + '/issues/';
     return this.request(path, {
@@ -47,25 +59,32 @@ export class Client {
         url,
         options.method || 'GET'
       );
-      options.error &&
-        options.error({
-          status: 404,
-          responseText: 'HTTP 404',
-          responseJSON: null,
-        });
+      let resp = {
+        status: 404,
+        responseText: 'HTTP 404',
+        responseJSON: null,
+      };
+      respond(Client.mockAsync, options.error, resp);
     } else if (response.statusCode !== 200) {
       response.callCount++;
-      options.error &&
-        options.error({
-          status: response.statusCode,
-          responseText: JSON.stringify(response.body),
-          responseJSON: response.body,
-        });
+      let resp = {
+        status: response.statusCode,
+        responseText: JSON.stringify(response.body),
+        responseJSON: response.body,
+      };
+      respond(Client.mockAsync, options.error, resp);
     } else {
       response.callCount++;
-      options.success &&
-        options.success(response.body, {}, {getResponseHeader: () => {}});
+      respond(
+        Client.mockAsync,
+        options.success,
+        response.body,
+        {},
+        {getResponseHeader: () => {}}
+      );
     }
-    options.complete && options.complete();
+    respond(Client.mockAsync, options.complete);
   }
 }
+
+export {Client};
diff --git a/tests/js/spec/api.spec.jsx b/tests/js/spec/api.spec.jsx
index 02b4a1dbaf..ca856bcf57 100644
--- a/tests/js/spec/api.spec.jsx
+++ b/tests/js/spec/api.spec.jsx
@@ -5,14 +5,17 @@ import GroupActions from 'app/actions/groupActions';
 jest.unmock('app/api');
 
 describe('api', function() {
+  let sandbox;
+  let api;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.api = new Client();
+    api = new Client();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('paramsToQueryArgs()', function() {
@@ -46,7 +49,7 @@ describe('api', function() {
 
   describe('Client', function() {
     beforeEach(function() {
-      this.sandbox.stub($, 'ajax');
+      sandbox.stub($, 'ajax');
     });
 
     describe('cancel()', function() {
@@ -58,12 +61,12 @@ describe('api', function() {
           abort: sinon.stub(),
         });
 
-        this.api.activeRequests = {
+        api.activeRequests = {
           1: req1,
           2: req2,
         };
 
-        this.api.clear();
+        api.clear();
 
         expect(req1.xhr.abort.calledOnce).toBeTruthy();
         expect(req2.xhr.abort.calledOnce).toBeTruthy();
@@ -73,12 +76,12 @@ describe('api', function() {
 
   describe('bulkUpdate()', function() {
     beforeEach(function() {
-      this.sandbox.stub(this.api, '_wrapRequest');
-      this.sandbox.stub(GroupActions, 'update'); // stub GroupActions.update call from api.update
+      sandbox.stub(api, '_wrapRequest');
+      sandbox.stub(GroupActions, 'update'); // stub GroupActions.update call from api.update
     });
 
     it('should use itemIds as query if provided', function() {
-      this.api.bulkUpdate({
+      api.bulkUpdate({
         orgId: '1337',
         projectId: '1337',
         itemIds: [1, 2, 3],
@@ -86,13 +89,13 @@ describe('api', function() {
         query: 'is:resolved',
       });
 
-      expect(this.api._wrapRequest.calledOnce).toBeTruthy();
-      let requestArgs = this.api._wrapRequest.getCall(0).args[1];
+      expect(api._wrapRequest.calledOnce).toBeTruthy();
+      let requestArgs = api._wrapRequest.getCall(0).args[1];
       expect(requestArgs.query).toEqual({id: [1, 2, 3]});
     });
 
     it('should use query as query if itemIds are absent', function() {
-      this.api.bulkUpdate({
+      api.bulkUpdate({
         orgId: '1337',
         projectId: '1337',
         itemIds: null,
@@ -100,8 +103,8 @@ describe('api', function() {
         query: 'is:resolved',
       });
 
-      expect(this.api._wrapRequest.calledOnce).toBeTruthy();
-      let requestArgs = this.api._wrapRequest.getCall(0).args[1];
+      expect(api._wrapRequest.calledOnce).toBeTruthy();
+      let requestArgs = api._wrapRequest.getCall(0).args[1];
       expect(requestArgs.query).toEqual({query: 'is:resolved'});
     });
   });
@@ -110,12 +113,12 @@ describe('api', function() {
     // TODO: this is totally copypasta from the test above. We need to refactor
     //       these API methods/tests.
     beforeEach(function() {
-      this.sandbox.stub(this.api, '_wrapRequest');
-      this.sandbox.stub(GroupActions, 'merge'); // stub GroupActions.merge call from api.merge
+      sandbox.stub(api, '_wrapRequest');
+      sandbox.stub(GroupActions, 'merge'); // stub GroupActions.merge call from api.merge
     });
 
     it('should use itemIds as query if provided', function() {
-      this.api.merge({
+      api.merge({
         orgId: '1337',
         projectId: '1337',
         itemIds: [1, 2, 3],
@@ -123,13 +126,13 @@ describe('api', function() {
         query: 'is:resolved',
       });
 
-      expect(this.api._wrapRequest.calledOnce).toBeTruthy();
-      let requestArgs = this.api._wrapRequest.getCall(0).args[1];
+      expect(api._wrapRequest.calledOnce).toBeTruthy();
+      let requestArgs = api._wrapRequest.getCall(0).args[1];
       expect(requestArgs.query).toEqual({id: [1, 2, 3]});
     });
 
     it('should use query as query if itemIds are absent', function() {
-      this.api.merge({
+      api.merge({
         orgId: '1337',
         projectId: '1337',
         itemIds: null,
@@ -137,8 +140,8 @@ describe('api', function() {
         query: 'is:resolved',
       });
 
-      expect(this.api._wrapRequest.calledOnce).toBeTruthy();
-      let requestArgs = this.api._wrapRequest.getCall(0).args[1];
+      expect(api._wrapRequest.calledOnce).toBeTruthy();
+      let requestArgs = api._wrapRequest.getCall(0).args[1];
       expect(requestArgs.query).toEqual({query: 'is:resolved'});
     });
   });
diff --git a/tests/js/spec/components/__snapshots__/issueDiff.spec.jsx.snap b/tests/js/spec/components/__snapshots__/issueDiff.spec.jsx.snap
index 060e91bee0..d7c7ed716c 100644
--- a/tests/js/spec/components/__snapshots__/issueDiff.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/issueDiff.spec.jsx.snap
@@ -12,157 +12,157 @@ exports[`IssueDiff can dynamically import SplitDiff 1`] = `
   >
     <SplitDiff
       base="TypeError: Cannot read property 'id' of undefined
-      at StreamGroupHeader.render(./app/components/stream/StreamGroupHeader.jsx:54:0)
-      at ? (~/react/lib/ReactCompositeComponent.js:793:0)
-      at measureLifeCyclePerf(~/react/lib/ReactCompositeComponent.js:74:0)
-      at ReactCompositeComponentWrapper._renderValidatedComponentWithoutOwnerOrContext(~/react/lib/ReactCompositeComponent.js:792:0)
-      at ReactCompositeComponentWrapper._renderValidatedComponent(~/react/lib/ReactCompositeComponent.js:819:0)
-      at ReactCompositeComponentWrapper.performInitialMount(~/react/lib/ReactCompositeComponent.js:361:0)
-      at ReactCompositeComponentWrapper.mountComponent(~/react/lib/ReactCompositeComponent.js:257:0)
-      at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
-      at ReactDOMComponent.mountChildren(~/react/lib/ReactMultiChild.js:240:0)
-      at ReactDOMComponent._createInitialChildren(~/react/lib/ReactDOMComponent.js:699:0)
-      at ReactDOMComponent.mountComponent(~/react/lib/ReactDOMComponent.js:524:0)
-      at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
-      at ReactDOMComponent.mountChildren(~/react/lib/ReactMultiChild.js:240:0)
-      at ReactDOMComponent._createInitialChildren(~/react/lib/ReactDOMComponent.js:699:0)
-      at ReactDOMComponent.mountComponent(~/react/lib/ReactDOMComponent.js:524:0)
-      at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
-      at ReactCompositeComponentWrapper.performInitialMount(~/react/lib/ReactCompositeComponent.js:370:0)
-      at ReactCompositeComponentWrapper.mountComponent(~/react/lib/ReactCompositeComponent.js:257:0)
-      at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
-      at ReactDOMComponent.mountChildren(~/react/lib/ReactMultiChild.js:240:0)
-      at ReactDOMComponent._createInitialChildren(~/react/lib/ReactDOMComponent.js:699:0)
-      at ReactDOMComponent.mountComponent(~/react/lib/ReactDOMComponent.js:524:0)
-      at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
-      at Object.updateChildren(~/react/lib/ReactChildReconciler.js:122:0)
-      at ReactDOMComponent._reconcilerUpdateChildren(~/react/lib/ReactMultiChild.js:210:0)
-      at ReactDOMComponent._updateChildren(~/react/lib/ReactMultiChild.js:314:0)
-      at ReactDOMComponent.updateChildren(~/react/lib/ReactMultiChild.js:301:0)
-      at ReactDOMComponent._updateDOMChildren(~/react/lib/ReactDOMComponent.js:942:0)
-      at ReactDOMComponent.updateComponent(~/react/lib/ReactDOMComponent.js:760:0)
-      at ReactDOMComponent.receiveComponent(~/react/lib/ReactDOMComponent.js:718:0)
-      at Object.receiveComponent(~/react/lib/ReactReconciler.js:126:0)
-      at Object.updateChildren(~/react/lib/ReactChildReconciler.js:110:0)
-      at ReactDOMComponent._reconcilerUpdateChildren(~/react/lib/ReactMultiChild.js:210:0)
-      at ReactDOMComponent._updateChildren(~/react/lib/ReactMultiChild.js:314:0)
-      at ReactDOMComponent.updateChildren(~/react/lib/ReactMultiChild.js:301:0)
-      at ReactDOMComponent._updateDOMChildren(~/react/lib/ReactDOMComponent.js:942:0)
-      at ReactDOMComponent.updateComponent(~/react/lib/ReactDOMComponent.js:760:0)
-      at ReactDOMComponent.receiveComponent(~/react/lib/ReactDOMComponent.js:718:0)
-      at Object.receiveComponent(~/react/lib/ReactReconciler.js:126:0)
-      at Object.updateChildren(~/react/lib/ReactChildReconciler.js:110:0)
-      at ReactDOMComponent._reconcilerUpdateChildren(~/react/lib/ReactMultiChild.js:210:0)
-      at ReactDOMComponent._updateChildren(~/react/lib/ReactMultiChild.js:314:0)
-      at ReactDOMComponent.updateChildren(~/react/lib/ReactMultiChild.js:301:0)
-      at ReactDOMComponent._updateDOMChildren(~/react/lib/ReactDOMComponent.js:942:0)
-      at ReactDOMComponent.updateComponent(~/react/lib/ReactDOMComponent.js:760:0)
-      at ReactDOMComponent.receiveComponent(~/react/lib/ReactDOMComponent.js:718:0)
-      at Object.receiveComponent(~/react/lib/ReactReconciler.js:126:0)
-      at ReactCompositeComponentWrapper._updateRenderedComponent(~/react/lib/ReactCompositeComponent.js:751:0)
-      at ReactCompositeComponentWrapper._performComponentUpdate(~/react/lib/ReactCompositeComponent.js:721:0)
-      at ReactCompositeComponentWrapper.updateComponent(~/react/lib/ReactCompositeComponent.js:642:0)"
+  at StreamGroupHeader.render(./app/components/stream/StreamGroupHeader.jsx:54:0)
+  at ? (~/react/lib/ReactCompositeComponent.js:793:0)
+  at measureLifeCyclePerf(~/react/lib/ReactCompositeComponent.js:74:0)
+  at ReactCompositeComponentWrapper._renderValidatedComponentWithoutOwnerOrContext(~/react/lib/ReactCompositeComponent.js:792:0)
+  at ReactCompositeComponentWrapper._renderValidatedComponent(~/react/lib/ReactCompositeComponent.js:819:0)
+  at ReactCompositeComponentWrapper.performInitialMount(~/react/lib/ReactCompositeComponent.js:361:0)
+  at ReactCompositeComponentWrapper.mountComponent(~/react/lib/ReactCompositeComponent.js:257:0)
+  at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
+  at ReactDOMComponent.mountChildren(~/react/lib/ReactMultiChild.js:240:0)
+  at ReactDOMComponent._createInitialChildren(~/react/lib/ReactDOMComponent.js:699:0)
+  at ReactDOMComponent.mountComponent(~/react/lib/ReactDOMComponent.js:524:0)
+  at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
+  at ReactDOMComponent.mountChildren(~/react/lib/ReactMultiChild.js:240:0)
+  at ReactDOMComponent._createInitialChildren(~/react/lib/ReactDOMComponent.js:699:0)
+  at ReactDOMComponent.mountComponent(~/react/lib/ReactDOMComponent.js:524:0)
+  at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
+  at ReactCompositeComponentWrapper.performInitialMount(~/react/lib/ReactCompositeComponent.js:370:0)
+  at ReactCompositeComponentWrapper.mountComponent(~/react/lib/ReactCompositeComponent.js:257:0)
+  at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
+  at ReactDOMComponent.mountChildren(~/react/lib/ReactMultiChild.js:240:0)
+  at ReactDOMComponent._createInitialChildren(~/react/lib/ReactDOMComponent.js:699:0)
+  at ReactDOMComponent.mountComponent(~/react/lib/ReactDOMComponent.js:524:0)
+  at Object.mountComponent(~/react/lib/ReactReconciler.js:47:0)
+  at Object.updateChildren(~/react/lib/ReactChildReconciler.js:122:0)
+  at ReactDOMComponent._reconcilerUpdateChildren(~/react/lib/ReactMultiChild.js:210:0)
+  at ReactDOMComponent._updateChildren(~/react/lib/ReactMultiChild.js:314:0)
+  at ReactDOMComponent.updateChildren(~/react/lib/ReactMultiChild.js:301:0)
+  at ReactDOMComponent._updateDOMChildren(~/react/lib/ReactDOMComponent.js:942:0)
+  at ReactDOMComponent.updateComponent(~/react/lib/ReactDOMComponent.js:760:0)
+  at ReactDOMComponent.receiveComponent(~/react/lib/ReactDOMComponent.js:718:0)
+  at Object.receiveComponent(~/react/lib/ReactReconciler.js:126:0)
+  at Object.updateChildren(~/react/lib/ReactChildReconciler.js:110:0)
+  at ReactDOMComponent._reconcilerUpdateChildren(~/react/lib/ReactMultiChild.js:210:0)
+  at ReactDOMComponent._updateChildren(~/react/lib/ReactMultiChild.js:314:0)
+  at ReactDOMComponent.updateChildren(~/react/lib/ReactMultiChild.js:301:0)
+  at ReactDOMComponent._updateDOMChildren(~/react/lib/ReactDOMComponent.js:942:0)
+  at ReactDOMComponent.updateComponent(~/react/lib/ReactDOMComponent.js:760:0)
+  at ReactDOMComponent.receiveComponent(~/react/lib/ReactDOMComponent.js:718:0)
+  at Object.receiveComponent(~/react/lib/ReactReconciler.js:126:0)
+  at Object.updateChildren(~/react/lib/ReactChildReconciler.js:110:0)
+  at ReactDOMComponent._reconcilerUpdateChildren(~/react/lib/ReactMultiChild.js:210:0)
+  at ReactDOMComponent._updateChildren(~/react/lib/ReactMultiChild.js:314:0)
+  at ReactDOMComponent.updateChildren(~/react/lib/ReactMultiChild.js:301:0)
+  at ReactDOMComponent._updateDOMChildren(~/react/lib/ReactDOMComponent.js:942:0)
+  at ReactDOMComponent.updateComponent(~/react/lib/ReactDOMComponent.js:760:0)
+  at ReactDOMComponent.receiveComponent(~/react/lib/ReactDOMComponent.js:718:0)
+  at Object.receiveComponent(~/react/lib/ReactReconciler.js:126:0)
+  at ReactCompositeComponentWrapper._updateRenderedComponent(~/react/lib/ReactCompositeComponent.js:751:0)
+  at ReactCompositeComponentWrapper._performComponentUpdate(~/react/lib/ReactCompositeComponent.js:721:0)
+  at ReactCompositeComponentWrapper.updateComponent(~/react/lib/ReactCompositeComponent.js:642:0)"
       target="RangeError: Invalid array length
-      File \\"./app/components/scoreBar.jsx\\", line 73, col 0, in Constructor.render
-        return React.createElement('div', {
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 793, col 0
-        return inst.render();
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 74, col 0, in measureLifeCyclePerf
-        return fn();
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 792, col 0, in ReactCompositeComponentWrapper._renderValidatedComponentWithoutOwnerOrContext
-        renderedComponent = measureLifeCyclePerf(function () {
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 819, col 0, in ReactCompositeComponentWrapper._renderValidatedComponent
-        renderedComponent = this._renderValidatedComponentWithoutOwnerOrContext();
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 361, col 0, in ReactCompositeComponentWrapper.performInitialMount
-        renderedElement = this._renderValidatedComponent();
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 257, col 0, in ReactCompositeComponentWrapper.mountComponent
-        markup = this.performInitialMount(renderedElement, hostParent, hostContainerInfo, transaction, context);
-      File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
-        var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
-      File \\"~/react/lib/ReactMultiChild.js\\", line 240, col 0, in ReactDOMComponent.mountChildren
-        var mountImage = ReactReconciler.mountComponent(child, transaction, this, this._hostContainerInfo, context, selfDebugID);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 699, col 0, in ReactDOMComponent._createInitialChildren
-        var mountImages = this.mountChildren(childrenToUse, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 524, col 0, in ReactDOMComponent.mountComponent
-        this._createInitialChildren(transaction, props, context, lazyTree);
-      File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
-        var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 370, col 0, in ReactCompositeComponentWrapper.performInitialMount
-        var markup = ReactReconciler.mountComponent(child, transaction, hostParent, hostContainerInfo, this._processChildContext(context), debugID);
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 257, col 0, in ReactCompositeComponentWrapper.mountComponent
-        markup = this.performInitialMount(renderedElement, hostParent, hostContainerInfo, transaction, context);
-      File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
-        var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
-      File \\"~/react/lib/ReactMultiChild.js\\", line 240, col 0, in ReactDOMComponent.mountChildren
-        var mountImage = ReactReconciler.mountComponent(child, transaction, this, this._hostContainerInfo, context, selfDebugID);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 699, col 0, in ReactDOMComponent._createInitialChildren
-        var mountImages = this.mountChildren(childrenToUse, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 524, col 0, in ReactDOMComponent.mountComponent
-        this._createInitialChildren(transaction, props, context, lazyTree);
-      File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
-        var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
-      File \\"~/react/lib/ReactMultiChild.js\\", line 240, col 0, in ReactDOMComponent.mountChildren
-        var mountImage = ReactReconciler.mountComponent(child, transaction, this, this._hostContainerInfo, context, selfDebugID);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 699, col 0, in ReactDOMComponent._createInitialChildren
-        var mountImages = this.mountChildren(childrenToUse, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 524, col 0, in ReactDOMComponent.mountComponent
-        this._createInitialChildren(transaction, props, context, lazyTree);
-      File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
-        var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
-      File \\"~/react/lib/ReactMultiChild.js\\", line 240, col 0, in ReactDOMComponent.mountChildren
-        var mountImage = ReactReconciler.mountComponent(child, transaction, this, this._hostContainerInfo, context, selfDebugID);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 699, col 0, in ReactDOMComponent._createInitialChildren
-        var mountImages = this.mountChildren(childrenToUse, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 524, col 0, in ReactDOMComponent.mountComponent
-        this._createInitialChildren(transaction, props, context, lazyTree);
-      File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
-        var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 370, col 0, in ReactCompositeComponentWrapper.performInitialMount
-        var markup = ReactReconciler.mountComponent(child, transaction, hostParent, hostContainerInfo, this._processChildContext(context), debugID);
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 257, col 0, in ReactCompositeComponentWrapper.mountComponent
-        markup = this.performInitialMount(renderedElement, hostParent, hostContainerInfo, transaction, context);
-      File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
-        var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 370, col 0, in ReactCompositeComponentWrapper.performInitialMount
-        var markup = ReactReconciler.mountComponent(child, transaction, hostParent, hostContainerInfo, this._processChildContext(context), debugID);
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 257, col 0, in ReactCompositeComponentWrapper.mountComponent
-        markup = this.performInitialMount(renderedElement, hostParent, hostContainerInfo, transaction, context);
-      File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
-        var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
-      File \\"~/react/lib/ReactChildReconciler.js\\", line 122, col 0, in Object.updateChildren
-        var nextChildMountImage = ReactReconciler.mountComponent(nextChildInstance, transaction, hostParent, hostContainerInfo, context, selfDebugID);
-      File \\"~/react/lib/ReactMultiChild.js\\", line 210, col 0, in ReactDOMComponent._reconcilerUpdateChildren
-        ReactChildReconciler.updateChildren(prevChildren, nextChildren, mountImages, removedNodes, transaction, this, this._hostContainerI {snip}
-      File \\"~/react/lib/ReactMultiChild.js\\", line 314, col 0, in ReactDOMComponent._updateChildren
-        var nextChildren = this._reconcilerUpdateChildren(prevChildren, nextNestedChildrenElements, mountImages, removedNodes, transaction, context);
-      File \\"~/react/lib/ReactMultiChild.js\\", line 301, col 0, in ReactDOMComponent.updateChildren
-        this._updateChildren(nextNestedChildrenElements, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 942, col 0, in ReactDOMComponent._updateDOMChildren
-        this.updateChildren(nextChildren, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 760, col 0, in ReactDOMComponent.updateComponent
-        this._updateDOMChildren(lastProps, nextProps, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 718, col 0, in ReactDOMComponent.receiveComponent
-        this.updateComponent(transaction, prevElement, nextElement, context);
-      File \\"~/react/lib/ReactReconciler.js\\", line 126, col 0, in Object.receiveComponent
-        internalInstance.receiveComponent(nextElement, transaction, context);
-      File \\"~/react/lib/ReactChildReconciler.js\\", line 110, col 0, in Object.updateChildren
-        ReactReconciler.receiveComponent(prevChild, nextElement, transaction, context);
-      File \\"~/react/lib/ReactMultiChild.js\\", line 210, col 0, in ReactDOMComponent._reconcilerUpdateChildren
-        ReactChildReconciler.updateChildren(prevChildren, nextChildren, mountImages, removedNodes, transaction, this, this._hostContainerI {snip}
-      File \\"~/react/lib/ReactMultiChild.js\\", line 314, col 0, in ReactDOMComponent._updateChildren
-        var nextChildren = this._reconcilerUpdateChildren(prevChildren, nextNestedChildrenElements, mountImages, removedNodes, transaction, context);
-      File \\"~/react/lib/ReactMultiChild.js\\", line 301, col 0, in ReactDOMComponent.updateChildren
-        this._updateChildren(nextNestedChildrenElements, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 942, col 0, in ReactDOMComponent._updateDOMChildren
-        this.updateChildren(nextChildren, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 760, col 0, in ReactDOMComponent.updateComponent
-        this._updateDOMChildren(lastProps, nextProps, transaction, context);
-      File \\"~/react/lib/ReactDOMComponent.js\\", line 718, col 0, in ReactDOMComponent.receiveComponent
-        this.updateComponent(transaction, prevElement, nextElement, context);
-      File \\"~/react/lib/ReactReconciler.js\\", line 126, col 0, in Object.receiveComponent
-        internalInstance.receiveComponent(nextElement, transaction, context);
-      File \\"~/react/lib/ReactCompositeComponent.js\\", line 751, col 0, in ReactCompositeComponentWrapper._updateRenderedComponent
-        ReactReconciler.receiveComponent(prevComponentInstance, nextRenderedElement, transaction, this._processChildContext(context));"
+  File \\"./app/components/scoreBar.jsx\\", line 73, col 0, in Constructor.render
+    return React.createElement('div', {
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 793, col 0
+    return inst.render();
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 74, col 0, in measureLifeCyclePerf
+    return fn();
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 792, col 0, in ReactCompositeComponentWrapper._renderValidatedComponentWithoutOwnerOrContext
+    renderedComponent = measureLifeCyclePerf(function () {
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 819, col 0, in ReactCompositeComponentWrapper._renderValidatedComponent
+    renderedComponent = this._renderValidatedComponentWithoutOwnerOrContext();
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 361, col 0, in ReactCompositeComponentWrapper.performInitialMount
+    renderedElement = this._renderValidatedComponent();
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 257, col 0, in ReactCompositeComponentWrapper.mountComponent
+    markup = this.performInitialMount(renderedElement, hostParent, hostContainerInfo, transaction, context);
+  File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
+    var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
+  File \\"~/react/lib/ReactMultiChild.js\\", line 240, col 0, in ReactDOMComponent.mountChildren
+    var mountImage = ReactReconciler.mountComponent(child, transaction, this, this._hostContainerInfo, context, selfDebugID);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 699, col 0, in ReactDOMComponent._createInitialChildren
+    var mountImages = this.mountChildren(childrenToUse, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 524, col 0, in ReactDOMComponent.mountComponent
+    this._createInitialChildren(transaction, props, context, lazyTree);
+  File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
+    var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 370, col 0, in ReactCompositeComponentWrapper.performInitialMount
+    var markup = ReactReconciler.mountComponent(child, transaction, hostParent, hostContainerInfo, this._processChildContext(context), debugID);
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 257, col 0, in ReactCompositeComponentWrapper.mountComponent
+    markup = this.performInitialMount(renderedElement, hostParent, hostContainerInfo, transaction, context);
+  File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
+    var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
+  File \\"~/react/lib/ReactMultiChild.js\\", line 240, col 0, in ReactDOMComponent.mountChildren
+    var mountImage = ReactReconciler.mountComponent(child, transaction, this, this._hostContainerInfo, context, selfDebugID);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 699, col 0, in ReactDOMComponent._createInitialChildren
+    var mountImages = this.mountChildren(childrenToUse, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 524, col 0, in ReactDOMComponent.mountComponent
+    this._createInitialChildren(transaction, props, context, lazyTree);
+  File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
+    var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
+  File \\"~/react/lib/ReactMultiChild.js\\", line 240, col 0, in ReactDOMComponent.mountChildren
+    var mountImage = ReactReconciler.mountComponent(child, transaction, this, this._hostContainerInfo, context, selfDebugID);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 699, col 0, in ReactDOMComponent._createInitialChildren
+    var mountImages = this.mountChildren(childrenToUse, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 524, col 0, in ReactDOMComponent.mountComponent
+    this._createInitialChildren(transaction, props, context, lazyTree);
+  File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
+    var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
+  File \\"~/react/lib/ReactMultiChild.js\\", line 240, col 0, in ReactDOMComponent.mountChildren
+    var mountImage = ReactReconciler.mountComponent(child, transaction, this, this._hostContainerInfo, context, selfDebugID);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 699, col 0, in ReactDOMComponent._createInitialChildren
+    var mountImages = this.mountChildren(childrenToUse, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 524, col 0, in ReactDOMComponent.mountComponent
+    this._createInitialChildren(transaction, props, context, lazyTree);
+  File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
+    var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 370, col 0, in ReactCompositeComponentWrapper.performInitialMount
+    var markup = ReactReconciler.mountComponent(child, transaction, hostParent, hostContainerInfo, this._processChildContext(context), debugID);
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 257, col 0, in ReactCompositeComponentWrapper.mountComponent
+    markup = this.performInitialMount(renderedElement, hostParent, hostContainerInfo, transaction, context);
+  File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
+    var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 370, col 0, in ReactCompositeComponentWrapper.performInitialMount
+    var markup = ReactReconciler.mountComponent(child, transaction, hostParent, hostContainerInfo, this._processChildContext(context), debugID);
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 257, col 0, in ReactCompositeComponentWrapper.mountComponent
+    markup = this.performInitialMount(renderedElement, hostParent, hostContainerInfo, transaction, context);
+  File \\"~/react/lib/ReactReconciler.js\\", line 47, col 0, in Object.mountComponent
+    var markup = internalInstance.mountComponent(transaction, hostParent, hostContainerInfo, context, parentDebugID);
+  File \\"~/react/lib/ReactChildReconciler.js\\", line 122, col 0, in Object.updateChildren
+    var nextChildMountImage = ReactReconciler.mountComponent(nextChildInstance, transaction, hostParent, hostContainerInfo, context, selfDebugID);
+  File \\"~/react/lib/ReactMultiChild.js\\", line 210, col 0, in ReactDOMComponent._reconcilerUpdateChildren
+    ReactChildReconciler.updateChildren(prevChildren, nextChildren, mountImages, removedNodes, transaction, this, this._hostContainerI {snip}
+  File \\"~/react/lib/ReactMultiChild.js\\", line 314, col 0, in ReactDOMComponent._updateChildren
+    var nextChildren = this._reconcilerUpdateChildren(prevChildren, nextNestedChildrenElements, mountImages, removedNodes, transaction, context);
+  File \\"~/react/lib/ReactMultiChild.js\\", line 301, col 0, in ReactDOMComponent.updateChildren
+    this._updateChildren(nextNestedChildrenElements, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 942, col 0, in ReactDOMComponent._updateDOMChildren
+    this.updateChildren(nextChildren, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 760, col 0, in ReactDOMComponent.updateComponent
+    this._updateDOMChildren(lastProps, nextProps, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 718, col 0, in ReactDOMComponent.receiveComponent
+    this.updateComponent(transaction, prevElement, nextElement, context);
+  File \\"~/react/lib/ReactReconciler.js\\", line 126, col 0, in Object.receiveComponent
+    internalInstance.receiveComponent(nextElement, transaction, context);
+  File \\"~/react/lib/ReactChildReconciler.js\\", line 110, col 0, in Object.updateChildren
+    ReactReconciler.receiveComponent(prevChild, nextElement, transaction, context);
+  File \\"~/react/lib/ReactMultiChild.js\\", line 210, col 0, in ReactDOMComponent._reconcilerUpdateChildren
+    ReactChildReconciler.updateChildren(prevChildren, nextChildren, mountImages, removedNodes, transaction, this, this._hostContainerI {snip}
+  File \\"~/react/lib/ReactMultiChild.js\\", line 314, col 0, in ReactDOMComponent._updateChildren
+    var nextChildren = this._reconcilerUpdateChildren(prevChildren, nextNestedChildrenElements, mountImages, removedNodes, transaction, context);
+  File \\"~/react/lib/ReactMultiChild.js\\", line 301, col 0, in ReactDOMComponent.updateChildren
+    this._updateChildren(nextNestedChildrenElements, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 942, col 0, in ReactDOMComponent._updateDOMChildren
+    this.updateChildren(nextChildren, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 760, col 0, in ReactDOMComponent.updateComponent
+    this._updateDOMChildren(lastProps, nextProps, transaction, context);
+  File \\"~/react/lib/ReactDOMComponent.js\\", line 718, col 0, in ReactDOMComponent.receiveComponent
+    this.updateComponent(transaction, prevElement, nextElement, context);
+  File \\"~/react/lib/ReactReconciler.js\\", line 126, col 0, in Object.receiveComponent
+    internalInstance.receiveComponent(nextElement, transaction, context);
+  File \\"~/react/lib/ReactCompositeComponent.js\\", line 751, col 0, in ReactCompositeComponentWrapper._updateRenderedComponent
+    ReactReconciler.receiveComponent(prevComponentInstance, nextRenderedElement, transaction, this._processChildContext(context));"
       type="words"
     >
       <table
diff --git a/tests/js/spec/components/assigneeSelector.spec.jsx b/tests/js/spec/components/assigneeSelector.spec.jsx
index 745e227973..cf64960cf1 100644
--- a/tests/js/spec/components/assigneeSelector.spec.jsx
+++ b/tests/js/spec/components/assigneeSelector.spec.jsx
@@ -11,6 +11,10 @@ import ConfigStore from 'app/stores/configStore';
 import stubReactComponents from '../../helpers/stubReactComponent';
 
 describe('AssigneeSelector', function() {
+  let sandbox;
+  let assigneeSelector;
+  let assignTo;
+
   const USER_1 = {
     id: 1,
     name: 'Jane Doe',
@@ -28,18 +32,18 @@ describe('AssigneeSelector', function() {
   };
 
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    stubReactComponents(this.sandbox, [LoadingIndicator]);
+    sandbox = sinon.sandbox.create();
+    stubReactComponents(sandbox, [LoadingIndicator]);
 
-    this.sandbox.stub(MemberListStore, 'getAll').returns([USER_1, USER_2]);
-    this.sandbox.stub(GroupStore, 'get').returns({
+    sandbox.stub(MemberListStore, 'getAll').returns([USER_1, USER_2]);
+    sandbox.stub(GroupStore, 'get').returns({
       id: 1337,
       assignedTo: null,
     });
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('statics', function() {
@@ -72,26 +76,20 @@ describe('AssigneeSelector', function() {
 
     describe('putSessionUserFirst()', function() {
       it('should place the session user at the top of the member list if present', function() {
-        this.sandbox
-          .stub(ConfigStore, 'get')
-          .withArgs('user')
-          .returns({
-            id: 2,
-            name: 'John Smith',
-            email: 'johnsmith@example.com',
-          });
+        sandbox.stub(ConfigStore, 'get').withArgs('user').returns({
+          id: 2,
+          name: 'John Smith',
+          email: 'johnsmith@example.com',
+        });
         expect(putSessionUserFirst([USER_1, USER_2])).toEqual([USER_2, USER_1]);
       });
 
       it("should return the same member list if the session user isn't present", function() {
-        this.sandbox
-          .stub(ConfigStore, 'get')
-          .withArgs('user')
-          .returns({
-            id: 555,
-            name: 'Here Comes a New Challenger',
-            email: 'guile@mail.us.af.mil',
-          });
+        sandbox.stub(ConfigStore, 'get').withArgs('user').returns({
+          id: 555,
+          name: 'Here Comes a New Challenger',
+          email: 'guile@mail.us.af.mil',
+        });
 
         expect(putSessionUserFirst([USER_1, USER_2])).toEqual([USER_1, USER_2]);
       });
@@ -99,14 +97,13 @@ describe('AssigneeSelector', function() {
   });
 
   describe('loading', function() {
-    let assigneeSelector;
     let openMenu;
 
     beforeEach(function() {
       // Reset sandbox because we don't want <LoadingIndicator /> stubbed
-      this.sandbox.restore();
-      this.sandbox = sinon.sandbox.create();
-      this.sandbox.stub(GroupStore, 'get').returns({
+      sandbox.restore();
+      sandbox = sinon.sandbox.create();
+      sandbox.stub(GroupStore, 'get').returns({
         id: 1337,
         assignedTo: null,
       });
@@ -144,20 +141,16 @@ describe('AssigneeSelector', function() {
   });
 
   describe('onFilterKeyDown()', function() {
-    let assigneeSelector;
-    let assignTo;
-
     beforeEach(function() {
       MemberListStore.loaded = true;
       if (assigneeSelector) {
         assigneeSelector.unmount();
       }
-
       assigneeSelector = mount(<AssigneeSelector id="1337" />);
       // open menu
       assigneeSelector.find('a').simulate('click');
 
-      assignTo = this.sandbox.stub(assigneeSelector.instance(), 'assignTo');
+      assignTo = sandbox.stub(assigneeSelector.instance(), 'assignTo');
     });
 
     afterEach(function() {
@@ -193,7 +186,6 @@ describe('AssigneeSelector', function() {
   });
 
   describe('onFilterKeyUp()', function() {
-    let assigneeSelector;
     beforeEach(function() {
       MemberListStore.loaded = true;
       if (assigneeSelector) {
@@ -226,15 +218,15 @@ describe('AssigneeSelector', function() {
 
   describe('componentDidUpdate()', function() {
     beforeEach(function() {
-      this.assigneeSelector = mount(<AssigneeSelector id="1337" />);
+      assigneeSelector = mount(<AssigneeSelector id="1337" />);
     });
 
     it('should destroy old assignee tooltip and create a new assignee tooltip', function() {
-      let instance = this.assigneeSelector.instance();
-      this.sandbox.spy(instance, 'attachTooltips');
-      this.sandbox.spy(instance, 'removeTooltips');
+      let instance = assigneeSelector.instance();
+      sandbox.spy(instance, 'attachTooltips');
+      sandbox.spy(instance, 'removeTooltips');
 
-      this.assigneeSelector.setState({assignedTo: USER_1});
+      assigneeSelector.setState({assignedTo: USER_1});
 
       expect(instance.attachTooltips.calledOnce).toBeTruthy();
       expect(instance.removeTooltips.calledOnce).toBeTruthy();
diff --git a/tests/js/spec/components/avatar.spec.jsx b/tests/js/spec/components/avatar.spec.jsx
index 7424176a7d..808fb90c30 100644
--- a/tests/js/spec/components/avatar.spec.jsx
+++ b/tests/js/spec/components/avatar.spec.jsx
@@ -3,6 +3,8 @@ import {shallow} from 'enzyme';
 import Avatar from 'app/components/avatar';
 
 describe('Avatar', function() {
+  let sandbox;
+
   const USER = {
     id: 1,
     name: 'Jane Doe',
@@ -10,11 +12,11 @@ describe('Avatar', function() {
   };
 
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
@@ -26,8 +28,8 @@ describe('Avatar', function() {
         },
       });
       let avatar = shallow(<Avatar user={user} />).instance();
-      this.sandbox.stub(avatar, 'buildGravatarUrl');
-      this.sandbox.stub(avatar, 'buildProfileUrl');
+      sandbox.stub(avatar, 'buildGravatarUrl');
+      sandbox.stub(avatar, 'buildProfileUrl');
       avatar.renderImg();
       expect(avatar.buildGravatarUrl.calledOnce).toBeTruthy();
       expect(avatar.buildProfileUrl.called).not.toBeTruthy();
@@ -41,8 +43,8 @@ describe('Avatar', function() {
         },
       });
       let avatar = shallow(<Avatar user={user} />).instance();
-      this.sandbox.stub(avatar, 'buildGravatarUrl');
-      this.sandbox.stub(avatar, 'buildProfileUrl');
+      sandbox.stub(avatar, 'buildGravatarUrl');
+      sandbox.stub(avatar, 'buildProfileUrl');
       avatar.renderImg();
       expect(avatar.buildProfileUrl.calledOnce).toBeTruthy();
       expect(avatar.buildGravatarUrl.called).not.toBeTruthy();
@@ -56,8 +58,8 @@ describe('Avatar', function() {
         },
       });
       let avatar = shallow(<Avatar user={user} />).instance();
-      this.sandbox.stub(avatar, 'buildGravatarUrl');
-      this.sandbox.stub(avatar, 'buildProfileUrl');
+      sandbox.stub(avatar, 'buildGravatarUrl');
+      sandbox.stub(avatar, 'buildProfileUrl');
       avatar.renderImg();
       expect(avatar.buildProfileUrl.called).not.toBeTruthy();
       expect(avatar.buildGravatarUrl.called).not.toBeTruthy();
@@ -65,8 +67,8 @@ describe('Avatar', function() {
 
     it('should show a gravatar when no avatar type is set and user has an email address', function() {
       let avatar = shallow(<Avatar user={USER} />).instance();
-      this.sandbox.stub(avatar, 'buildGravatarUrl');
-      this.sandbox.stub(avatar, 'buildProfileUrl');
+      sandbox.stub(avatar, 'buildGravatarUrl');
+      sandbox.stub(avatar, 'buildProfileUrl');
       avatar.renderImg();
       expect(avatar.buildGravatarUrl.calledOnce).toBeTruthy();
       expect(avatar.buildProfileUrl.called).not.toBeTruthy();
@@ -76,8 +78,8 @@ describe('Avatar', function() {
       let user = Object.assign({}, USER);
       delete user.email;
       let avatar = shallow(<Avatar user={user} />).instance();
-      this.sandbox.stub(avatar, 'buildGravatarUrl');
-      this.sandbox.stub(avatar, 'buildProfileUrl');
+      sandbox.stub(avatar, 'buildGravatarUrl');
+      sandbox.stub(avatar, 'buildProfileUrl');
       avatar.renderImg();
       expect(avatar.buildGravatarUrl.called).not.toBeTruthy();
       expect(avatar.buildProfileUrl.called).not.toBeTruthy();
diff --git a/tests/js/spec/components/dynamicWrapper.spec.jsx b/tests/js/spec/components/dynamicWrapper.spec.jsx
index d059ba5766..5d4811377a 100644
--- a/tests/js/spec/components/dynamicWrapper.spec.jsx
+++ b/tests/js/spec/components/dynamicWrapper.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import DynamicWrapper from 'app/components/dynamicWrapper';
 
 describe('DynamicWrapper', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders actual value', function() {
diff --git a/tests/js/spec/components/events/interfaces/frame.spec.jsx b/tests/js/spec/components/events/interfaces/frame.spec.jsx
index 676c01719d..6fdbd9f045 100644
--- a/tests/js/spec/components/events/interfaces/frame.spec.jsx
+++ b/tests/js/spec/components/events/interfaces/frame.spec.jsx
@@ -7,18 +7,21 @@ import FrameVariables from 'app/components/events/interfaces/frameVariables';
 import stubReactComponents from '../../../../helpers/stubReactComponent';
 
 describe('Frame', function() {
+  let sandbox;
+  let data;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    stubReactComponents(this.sandbox, [FrameVariables]);
+    sandbox = sinon.sandbox.create();
+    stubReactComponents(sandbox, [FrameVariables]);
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('renderOriginalSourceInfo()', function() {
     beforeEach(function() {
-      this.data = {
+      data = {
         origAbsPath: 'https://beta.getsentry.com/_static/sentry/dist/vendor.js',
         origColNo: 2503,
         origFilename: '/_static/sentry/dist/vendor.js',
@@ -30,7 +33,7 @@ describe('Frame', function() {
     });
 
     it('should render the source map information as a HTML string', function() {
-      let frame = TestUtils.renderIntoDocument(<Frame data={this.data} />);
+      let frame = TestUtils.renderIntoDocument(<Frame data={data} />);
 
       // NOTE: indentation/whitespace intentional to match output string
       expect(frame.renderOriginalSourceInfo()).toEqual(
diff --git a/tests/js/spec/components/events/interfaces/richHttpContent.spec.jsx b/tests/js/spec/components/events/interfaces/richHttpContent.spec.jsx
index d704cb0405..ef10d6fb30 100644
--- a/tests/js/spec/components/events/interfaces/richHttpContent.spec.jsx
+++ b/tests/js/spec/components/events/interfaces/richHttpContent.spec.jsx
@@ -4,25 +4,29 @@ import {mount, shallow} from 'enzyme';
 import RichHttpContent from 'app/components/events/interfaces/richHttpContent';
 
 describe('RichHttpContent', function() {
+  let sandbox;
+  let data;
+  let elem;
+
   beforeEach(function() {
-    this.data = {
+    data = {
       query: '',
       data: '',
       headers: [],
       cookies: [],
       env: {},
     };
-    this.elem = shallow(<RichHttpContent data={this.data} />).instance();
-    this.sandbox = sinon.sandbox.create();
+    elem = shallow(<RichHttpContent data={data} />).instance();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('getBodySection', function() {
     it('should return plain-text when given unrecognized inferred Content-Type', function() {
-      let out = this.elem.getBodySection({
+      let out = elem.getBodySection({
         inferredContentType: null, // no inferred content type
         data: 'helloworld',
       });
@@ -31,7 +35,7 @@ describe('RichHttpContent', function() {
     });
 
     it('should return a KeyValueList element when inferred Content-Type is x-www-form-urlencoded', function() {
-      let out = this.elem.getBodySection({
+      let out = elem.getBodySection({
         inferredContentType: 'application/x-www-form-urlencoded',
         data: {foo: ['bar'], bar: ['baz']},
       });
@@ -42,7 +46,7 @@ describe('RichHttpContent', function() {
     });
 
     it('should return a ContextData element when inferred Content-Type is application/json', function() {
-      let out = this.elem.getBodySection({
+      let out = elem.getBodySection({
         inferredContentType: 'application/json',
         data: {foo: 'bar'},
       });
@@ -57,7 +61,7 @@ describe('RichHttpContent', function() {
     it('should not blow up in a malformed uri', function() {
       // > decodeURIComponent('a%AFc')
       // URIError: URI malformed
-      let data = {
+      data = {
         query: 'a%AFc',
         data: '',
         headers: [],
@@ -68,7 +72,7 @@ describe('RichHttpContent', function() {
     });
 
     it("should not cause an invariant violation if data.data isn't a string", function() {
-      let data = {
+      data = {
         query: '',
         data: [{foo: 'bar', baz: 1}],
         headers: [],
diff --git a/tests/js/spec/components/eventsTable/eventsTable.spec.jsx b/tests/js/spec/components/eventsTable/eventsTable.spec.jsx
index 960e355432..a59655b1a3 100644
--- a/tests/js/spec/components/eventsTable/eventsTable.spec.jsx
+++ b/tests/js/spec/components/eventsTable/eventsTable.spec.jsx
@@ -5,12 +5,14 @@ import EventsTable from 'app/components/eventsTable/eventsTable';
 import events from '../../../mocks/events';
 
 describe('EventsTable', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/components/eventsTable/eventsTableRow.spec.jsx b/tests/js/spec/components/eventsTable/eventsTableRow.spec.jsx
index 39343b26bc..667fcb2b9e 100644
--- a/tests/js/spec/components/eventsTable/eventsTableRow.spec.jsx
+++ b/tests/js/spec/components/eventsTable/eventsTableRow.spec.jsx
@@ -4,12 +4,14 @@ import EventsTableRow from 'app/components/eventsTable/eventsTableRow';
 import events from '../../../mocks/events';
 
 describe('EventsTableRow', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/components/group/tagDistributionMeter.spec.jsx b/tests/js/spec/components/group/tagDistributionMeter.spec.jsx
index 49bec4b247..83db04b2bf 100644
--- a/tests/js/spec/components/group/tagDistributionMeter.spec.jsx
+++ b/tests/js/spec/components/group/tagDistributionMeter.spec.jsx
@@ -7,12 +7,16 @@ import {Client} from 'app/api';
 import TagDistributionMeter from 'app/components/group/tagDistributionMeter';
 
 describe('TagDistributionMeter', function() {
+  let sandbox;
+  let stubbedApiRequest;
+  let element;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
 
-    this.element = TestUtils.renderIntoDocument(
+    element = TestUtils.renderIntoDocument(
       <TagDistributionMeter
         tag="browser"
         group={{id: '1337'}}
@@ -23,53 +27,51 @@ describe('TagDistributionMeter', function() {
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('fetchData()', function() {
     it('should make a request to the groups/tags endpoint', function() {
       // NOTE: creation of OrganizationTeams causes a bunch of API requests to fire ...
       //       reset the request stub so that we can get an accurate count
-      this.stubbedApiRequest.reset();
+      stubbedApiRequest.reset();
 
-      this.element.fetchData();
+      element.fetchData();
 
-      expect(this.stubbedApiRequest.callCount).toEqual(1);
-      expect(this.stubbedApiRequest.getCall(0).args[0]).toEqual(
-        '/issues/1337/tags/browser/'
-      );
+      expect(stubbedApiRequest.callCount).toEqual(1);
+      expect(stubbedApiRequest.getCall(0).args[0]).toEqual('/issues/1337/tags/browser/');
     });
   });
 
   describe('renderBody()', function() {
     it('should return null if loading', function(done) {
-      this.element.setState(
+      element.setState(
         {
           loading: true,
           error: false,
         },
         () => {
-          expect(this.element.renderBody()).toBe(null);
+          expect(element.renderBody()).toBe(null);
           done();
         }
       );
     });
 
     it('should return null if in an error state', function(done) {
-      this.element.setState(
+      element.setState(
         {
           error: true,
           loading: false,
         },
         () => {
-          expect(this.element.renderBody()).toBe(null);
+          expect(element.renderBody()).toBe(null);
           done();
         }
       );
     });
 
     it('should return "no recent data" if no total values present', function(done) {
-      this.element.setState(
+      element.setState(
         {
           error: false,
           loading: false,
@@ -78,7 +80,7 @@ describe('TagDistributionMeter', function() {
           },
         },
         () => {
-          let out = this.element.renderBody();
+          let out = element.renderBody();
           expect(ReactDOMServer.renderToStaticMarkup(out)).toEqual(
             '<p>No recent data.</p>'
           );
@@ -88,9 +90,9 @@ describe('TagDistributionMeter', function() {
     });
 
     it('should call renderSegments() if values present', function(done) {
-      this.sandbox.stub(this.element, 'renderSegments');
+      sandbox.stub(element, 'renderSegments');
 
-      this.element.setState(
+      element.setState(
         {
           error: false,
           loading: false,
@@ -99,8 +101,8 @@ describe('TagDistributionMeter', function() {
           },
         },
         () => {
-          this.element.renderBody();
-          expect(this.element.renderSegments.calledOnce);
+          element.renderBody();
+          expect(element.renderSegments.calledOnce);
           done();
         }
       );
diff --git a/tests/js/spec/components/issueDiff.spec.jsx b/tests/js/spec/components/issueDiff.spec.jsx
index 317dbae105..2c8e5af41b 100644
--- a/tests/js/spec/components/issueDiff.spec.jsx
+++ b/tests/js/spec/components/issueDiff.spec.jsx
@@ -7,12 +7,14 @@ import entries from '../../mocks/entries';
 jest.mock('app/api');
 
 describe('IssueDiff', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('is loading when initially rendering', function() {
diff --git a/tests/js/spec/components/issues/snoozeAction.spec.jsx b/tests/js/spec/components/issues/snoozeAction.spec.jsx
index 983382d48a..cc5d869f13 100644
--- a/tests/js/spec/components/issues/snoozeAction.spec.jsx
+++ b/tests/js/spec/components/issues/snoozeAction.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import SnoozeAction from 'app/components/issues/snoozeAction';
 
 describe('SnoozeAction', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/components/modals/diffModal.spec.jsx b/tests/js/spec/components/modals/diffModal.spec.jsx
index 439fc91636..b6d932d92c 100644
--- a/tests/js/spec/components/modals/diffModal.spec.jsx
+++ b/tests/js/spec/components/modals/diffModal.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import DiffModal from 'app/components/modals/diffModal';
 
 describe('DiffModal', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/components/scoreBar.spec.jsx b/tests/js/spec/components/scoreBar.spec.jsx
index 5233fdab2e..8225f04403 100644
--- a/tests/js/spec/components/scoreBar.spec.jsx
+++ b/tests/js/spec/components/scoreBar.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import ScoreBar from 'app/components/scoreBar';
 
 describe('ScoreBar', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/components/similarScoreCard.spec.jsx b/tests/js/spec/components/similarScoreCard.spec.jsx
index 2ec7bc9784..1c25c783fb 100644
--- a/tests/js/spec/components/similarScoreCard.spec.jsx
+++ b/tests/js/spec/components/similarScoreCard.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import SimilarScoreCard from 'app/components/similarScoreCard';
 
 describe('SimilarScoreCard', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/components/similarSpectrum.spec.jsx b/tests/js/spec/components/similarSpectrum.spec.jsx
index 7dfa81f224..ca4fb58667 100644
--- a/tests/js/spec/components/similarSpectrum.spec.jsx
+++ b/tests/js/spec/components/similarSpectrum.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import SimilarSpectrum from 'app/components/similarSpectrum';
 
 describe('SimilarSpectrum', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/components/splitDiff.spec.jsx b/tests/js/spec/components/splitDiff.spec.jsx
index e4ce377d62..b1d5b09df7 100644
--- a/tests/js/spec/components/splitDiff.spec.jsx
+++ b/tests/js/spec/components/splitDiff.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import SplitDiff from 'app/components/splitDiff';
 
 describe('SplitDiff', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/components/toolbar.spec.jsx b/tests/js/spec/components/toolbar.spec.jsx
index c761edf814..b61b12f606 100644
--- a/tests/js/spec/components/toolbar.spec.jsx
+++ b/tests/js/spec/components/toolbar.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import Toolbar from 'app/components/toolbar';
 
 describe('Toolbar', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/components/toolbarHeader.spec.jsx b/tests/js/spec/components/toolbarHeader.spec.jsx
index 2d84f8c6a2..ea143f0af6 100644
--- a/tests/js/spec/components/toolbarHeader.spec.jsx
+++ b/tests/js/spec/components/toolbarHeader.spec.jsx
@@ -3,12 +3,14 @@ import {shallow} from 'enzyme';
 import ToolbarHeader from 'app/components/toolbarHeader';
 
 describe('ToolbarHeader', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders', function() {
diff --git a/tests/js/spec/stores/__snapshots__/groupingStore.spec.jsx.snap b/tests/js/spec/stores/__snapshots__/groupingStore.spec.jsx.snap
index 94fbafb8a8..9314a4d467 100644
--- a/tests/js/spec/stores/__snapshots__/groupingStore.spec.jsx.snap
+++ b/tests/js/spec/stores/__snapshots__/groupingStore.spec.jsx.snap
@@ -31,7 +31,7 @@ Object {
     },
   ],
   "loading": false,
-  "mergeState": Array [],
+  "mergeState": Map {},
   "mergedItems": Array [],
   "mergedLinks": "",
   "similarItems": Array [
@@ -128,6 +128,6 @@ Object {
     },
   ],
   "similarLinks": undefined,
-  "unmergeState": Array [],
+  "unmergeState": Map {},
 }
 `;
diff --git a/tests/js/spec/stores/groupStore.spec.jsx b/tests/js/spec/stores/groupStore.spec.jsx
index 861ce84103..50b5cc4dd6 100644
--- a/tests/js/spec/stores/groupStore.spec.jsx
+++ b/tests/js/spec/stores/groupStore.spec.jsx
@@ -1,13 +1,15 @@
 import GroupStore from 'app/stores/groupStore';
 
 describe('GroupStore', function() {
+  let sandbox;
+
   beforeEach(function() {
     GroupStore.reset();
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('add()', function() {
@@ -52,7 +54,7 @@ describe('GroupStore', function() {
 
     describe('onUpdate()', function() {
       it("should treat undefined itemIds argument as 'all'", function() {
-        this.sandbox.stub(GroupStore, 'trigger');
+        sandbox.stub(GroupStore, 'trigger');
         GroupStore.onUpdate(1337, undefined, 'somedata');
 
         expect(GroupStore.trigger.calledOnce).toBeTruthy();
@@ -62,7 +64,7 @@ describe('GroupStore', function() {
 
     describe('onUpdateSuccess()', function() {
       it("should treat undefined itemIds argument as 'all'", function() {
-        this.sandbox.stub(GroupStore, 'trigger');
+        sandbox.stub(GroupStore, 'trigger');
         GroupStore.onUpdateSuccess(1337, undefined, 'somedata');
 
         expect(GroupStore.trigger.calledOnce).toBeTruthy();
@@ -72,7 +74,7 @@ describe('GroupStore', function() {
 
     describe('onUpdateError()', function() {
       it("should treat undefined itemIds argument as 'all'", function() {
-        this.sandbox.stub(GroupStore, 'trigger');
+        sandbox.stub(GroupStore, 'trigger');
         GroupStore.onUpdateError(1337, undefined, 'something failed', false);
 
         expect(GroupStore.trigger.calledOnce).toBeTruthy();
diff --git a/tests/js/spec/stores/groupingStore.spec.jsx b/tests/js/spec/stores/groupingStore.spec.jsx
index aebf7369dc..57cc93089f 100644
--- a/tests/js/spec/stores/groupingStore.spec.jsx
+++ b/tests/js/spec/stores/groupingStore.spec.jsx
@@ -1,21 +1,19 @@
 import GroupingStore from 'app/stores/groupingStore';
 import {Client} from 'app/api';
 
-jest.mock('app/api');
-
-/*
-expect.extend({
-  toHaveBeenLastCalledWithMatch(received, arg) {
-    console.log(this, received, arg);
-  }
-});
- */
-
 describe('Grouping Store', function() {
   let trigger;
+
+  beforeAll(function() {
+    Client.mockAsync = true;
+  });
+
+  afterAll(function() {
+    Client.mockAsync = false;
+  });
+
   beforeEach(function() {
     trigger = jest.spyOn(GroupingStore, 'trigger');
-    // this.sandbox = sinon.sandbox.create();
     Client.clearMockResponses();
     Client.addMockResponse({
       url: '/issues/groupId/hashes/',
@@ -101,7 +99,6 @@ describe('Grouping Store', function() {
   });
 
   afterEach(function() {
-    // this.sandbox.restore();
     trigger.mockReset();
   });
 
@@ -331,7 +328,20 @@ describe('Grouping Store', function() {
       afterEach(function() {});
 
       it('disables rows to be merged', async function() {
+        trigger.mockReset();
         GroupingStore.onToggleMerge('1');
+        mergeList.add('1');
+        mergeState.set('1', {checked: true});
+
+        expect(trigger).toHaveBeenLastCalledWith({
+          mergeDisabled: false,
+          mergeList,
+          mergeState,
+        });
+
+        trigger.mockReset();
+
+        // Everything is sync so trigger will have been called multiple times
         let promise = GroupingStore.onMerge({
           params: {
             orgId: 'orgId',
@@ -340,8 +350,7 @@ describe('Grouping Store', function() {
           },
         });
 
-        mergeList.add('1');
-        mergeState.set('1', {checked: true, busy: false});
+        mergeState.set('1', {checked: true, busy: true});
 
         expect(trigger).toHaveBeenCalledWith({
           mergeDisabled: true,
@@ -365,6 +374,9 @@ describe('Grouping Store', function() {
           }
         );
 
+        // Should be removed from mergeList after merged
+        mergeList.delete('1');
+        mergeState.set('1', {checked: false, busy: true});
         expect(trigger).toHaveBeenLastCalledWith({
           mergeDisabled: false,
           mergeList,
@@ -375,8 +387,18 @@ describe('Grouping Store', function() {
       it('keeps rows in "busy" state and unchecks after successfully adding to merge queue', async function() {
         GroupingStore.onToggleMerge('1');
         mergeList.add('1');
-        mergeState.set('1', {checked: true, busy: false});
+        mergeState.set('1', {checked: true});
+
+        // Expect checked
+        expect(trigger).toHaveBeenCalledWith({
+          mergeDisabled: false,
+          mergeList,
+          mergeState,
+        });
+
+        trigger.mockReset();
 
+        // Start unmerge
         let promise = GroupingStore.onMerge({
           params: {
             orgId: 'orgId',
@@ -385,6 +407,9 @@ describe('Grouping Store', function() {
           },
         });
 
+        mergeState.set('1', {checked: true, busy: true});
+
+        // Expect checked to remain the same, but is now busy
         expect(trigger).toHaveBeenCalledWith({
           mergeDisabled: true,
           mergeList,
@@ -393,6 +418,9 @@ describe('Grouping Store', function() {
 
         await promise;
 
+        mergeState.set('1', {checked: false, busy: true});
+
+        // After promise, reset checked to false, but keep busy
         expect(trigger).toHaveBeenLastCalledWith({
           mergeDisabled: false,
           mergeList: new Set(),
@@ -411,7 +439,7 @@ describe('Grouping Store', function() {
 
         GroupingStore.onToggleMerge('1');
         mergeList.add('1');
-        mergeState.set('1', {checked: true, busy: false});
+        mergeState.set('1', {checked: true});
 
         let promise = GroupingStore.onMerge({
           params: {
@@ -421,6 +449,7 @@ describe('Grouping Store', function() {
           },
         });
 
+        mergeState.set('1', {checked: true, busy: true});
         expect(trigger).toHaveBeenCalledWith({
           mergeDisabled: true,
           mergeList,
@@ -429,6 +458,8 @@ describe('Grouping Store', function() {
 
         await promise;
 
+        // Error state
+        mergeState.set('1', {checked: true, busy: false});
         expect(trigger).toHaveBeenLastCalledWith({
           mergeDisabled: false,
           mergeList,
@@ -543,6 +574,10 @@ describe('Grouping Store', function() {
     });
 
     describe('onUnmerge', function() {
+      beforeAll(function() {
+        GroupingStore.init();
+      });
+
       beforeEach(function() {
         Client.clearMockResponses();
         Client.addMockResponse({
@@ -552,12 +587,14 @@ describe('Grouping Store', function() {
       });
       afterEach(function() {});
 
-      it('disables rows to be merged', function() {
+      it('can not toggle unmerge for a locked item', function() {
+        // Event 1 is locked
         GroupingStore.onToggleUnmerge(['1', 'event-1']);
-        unmergeList.set('1', 'event-1');
-        unmergeState.set('1', {checked: true, busy: false});
+        unmergeState.set('1', {busy: true});
+
+        // trigger does NOT get called because an item returned via API is in a "locked" state
+        expect(trigger).not.toHaveBeenCalled();
 
-        trigger.mockClear();
         GroupingStore.onUnmerge({
           groupId: 'groupId',
         });
@@ -571,15 +608,57 @@ describe('Grouping Store', function() {
         });
       });
 
+      it('disables rows to be merged', async function() {
+        GroupingStore.onToggleUnmerge(['2', 'event-2']);
+        unmergeList.set('2', 'event-2');
+        unmergeState.set('2', {checked: true, busy: false});
+
+        // trigger does NOT get called because an item returned via API is in a "locked" state
+        expect(trigger).toHaveBeenCalledWith({
+          enableFingerprintCompare: false,
+          unmergeLastCollapsed: false,
+          unmergeDisabled: false,
+          unmergeList,
+          unmergeState,
+        });
+
+        let promise = GroupingStore.onUnmerge({
+          groupId: 'groupId',
+        });
+
+        unmergeState.set('2', {checked: false, busy: true});
+        expect(trigger).toHaveBeenCalledWith({
+          enableFingerprintCompare: false,
+          unmergeLastCollapsed: false,
+          unmergeDisabled: true,
+          unmergeList,
+          unmergeState,
+        });
+
+        await promise;
+
+        // Success
+        unmergeState.set('2', {checked: false, busy: true});
+        unmergeList.delete('2');
+        expect(trigger).toHaveBeenLastCalledWith({
+          enableFingerprintCompare: false,
+          unmergeLastCollapsed: false,
+          unmergeDisabled: false,
+          unmergeList,
+          unmergeState,
+        });
+      });
+
       it('keeps rows in "busy" state and unchecks after successfully adding to unmerge queue', async function() {
-        GroupingStore.onToggleUnmerge(['1', 'event-1']);
-        unmergeList.set('1', 'event-1');
-        unmergeState.set('1', {checked: true, busy: false});
+        GroupingStore.onToggleUnmerge(['2', 'event-2']);
+        unmergeList.set('2', 'event-2');
+        unmergeState.set('2', {checked: true, busy: false});
 
         let promise = GroupingStore.onUnmerge({
           groupId: 'groupId',
         });
 
+        unmergeState.set('2', {checked: false, busy: true});
         expect(trigger).toHaveBeenCalledWith({
           enableFingerprintCompare: false,
           unmergeLastCollapsed: false,
@@ -609,13 +688,13 @@ describe('Grouping Store', function() {
         });
 
         GroupingStore.onToggleUnmerge(['2', 'event-2']);
-        unmergeList.set('1', 'event-1');
-        unmergeState.set('1', {checked: true, busy: false});
+        unmergeList.set('2', 'event-2');
 
         let promise = GroupingStore.onUnmerge({
           groupId: 'groupId',
         });
 
+        unmergeState.set('2', {checked: false, busy: true});
         expect(trigger).toHaveBeenCalledWith({
           enableFingerprintCompare: false,
           unmergeLastCollapsed: false,
@@ -626,6 +705,7 @@ describe('Grouping Store', function() {
 
         await promise;
 
+        unmergeState.set('2', {checked: true, busy: false});
         expect(trigger).toHaveBeenLastCalledWith({
           enableFingerprintCompare: false,
           unmergeLastCollapsed: false,
diff --git a/tests/js/spec/stores/selectedGroupStore.spec.js b/tests/js/spec/stores/selectedGroupStore.spec.js
index febc42a481..f34dd0b7a6 100644
--- a/tests/js/spec/stores/selectedGroupStore.spec.js
+++ b/tests/js/spec/stores/selectedGroupStore.spec.js
@@ -2,27 +2,30 @@ import GroupStore from 'app/stores/groupStore';
 import SelectedGroupStore from 'app/stores/selectedGroupStore';
 
 describe('SelectedGroupStore', function() {
+  let sandbox;
+  let trigger;
+
   beforeEach(function() {
     SelectedGroupStore.records = {};
 
-    this.sandbox = sinon.sandbox.create();
-    this.trigger = this.sandbox.spy(SelectedGroupStore, 'trigger');
+    sandbox = sinon.sandbox.create();
+    trigger = sandbox.spy(SelectedGroupStore, 'trigger');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('prune()', function() {
     it('removes records no longer in the GroupStore', function() {
-      this.sandbox.stub(GroupStore, 'getAllItemIds', () => ['3']);
+      sandbox.stub(GroupStore, 'getAllItemIds', () => ['3']);
       SelectedGroupStore.records = {1: true, 2: true, 3: true};
       SelectedGroupStore.prune();
       expect(SelectedGroupStore.records).toEqual({3: true});
     });
 
     it("doesn't have any effect when already in sync", function() {
-      this.sandbox.stub(GroupStore, 'getAllItemIds', () => ['1', '2', '3']);
+      sandbox.stub(GroupStore, 'getAllItemIds', () => ['1', '2', '3']);
       SelectedGroupStore.records = {1: true, 2: true, 3: true};
       SelectedGroupStore.prune();
       expect(SelectedGroupStore.records).toEqual({1: true, 2: true, 3: true});
@@ -44,24 +47,27 @@ describe('SelectedGroupStore', function() {
   });
 
   describe('onGroupChange()', function() {
+    let prune;
+    let add;
+
     beforeEach(function() {
-      this.prune = this.sandbox.stub(SelectedGroupStore, 'prune');
-      this.add = this.sandbox.stub(SelectedGroupStore, 'add');
+      prune = sandbox.stub(SelectedGroupStore, 'prune');
+      add = sandbox.stub(SelectedGroupStore, 'add');
     });
 
     it('adds new ids', function() {
       SelectedGroupStore.onGroupChange([]);
-      expect(this.add.called).toBe(true);
+      expect(add.called).toBe(true);
     });
 
     it('prunes stale records', function() {
       SelectedGroupStore.onGroupChange([]);
-      expect(this.prune.called).toBe(true);
+      expect(prune.called).toBe(true);
     });
 
     it('triggers an update', function() {
       SelectedGroupStore.onGroupChange([]);
-      expect(this.trigger.called).toBe(true);
+      expect(trigger.called).toBe(true);
     });
   });
 
@@ -157,7 +163,7 @@ describe('SelectedGroupStore', function() {
 
     it('triggers an update', function() {
       SelectedGroupStore.deselectAll();
-      expect(this.trigger.called).toBe(true);
+      expect(trigger.called).toBe(true);
     });
   });
 
@@ -178,12 +184,12 @@ describe('SelectedGroupStore', function() {
     it('triggers an update given pre-existing id', function() {
       SelectedGroupStore.records = {1: true};
       SelectedGroupStore.toggleSelect(1);
-      expect(this.trigger.called).toBe(true);
+      expect(trigger.called).toBe(true);
     });
 
     it('does not trigger an update given unknown id', function() {
       SelectedGroupStore.toggleSelect();
-      expect(this.trigger.called).toBe(false);
+      expect(trigger.called).toBe(false);
     });
   });
 
@@ -202,7 +208,7 @@ describe('SelectedGroupStore', function() {
 
     it('triggers an update', function() {
       SelectedGroupStore.toggleSelectAll();
-      expect(this.trigger.called).toBe(true);
+      expect(trigger.called).toBe(true);
     });
   });
 });
diff --git a/tests/js/spec/stores/streamTagStore.spec.jsx b/tests/js/spec/stores/streamTagStore.spec.jsx
index a5ea3eb4bf..dcf7c69b11 100644
--- a/tests/js/spec/stores/streamTagStore.spec.jsx
+++ b/tests/js/spec/stores/streamTagStore.spec.jsx
@@ -2,18 +2,20 @@ import StreamTagStore from 'app/stores/streamTagStore';
 import MemberListStore from 'app/stores/memberListStore';
 
 describe('StreamTagStore', function() {
+  let sandbox;
+
   beforeEach(() => {
     StreamTagStore.reset();
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(() => {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('onMemberListStoreChange()', () => {
     it('should map each user\'s username to the "assigned" value array', () => {
-      this.sandbox.stub(MemberListStore, 'getAll').returns([
+      sandbox.stub(MemberListStore, 'getAll').returns([
         {
           username: 'janesmith',
           email: 'janesmith@example.org',
@@ -24,7 +26,7 @@ describe('StreamTagStore', function() {
     });
 
     it("should fall back to email when username isn't available", () => {
-      this.sandbox.stub(MemberListStore, 'getAll').returns([
+      sandbox.stub(MemberListStore, 'getAll').returns([
         {
           email: 'janesmith@example.org',
         },
@@ -39,7 +41,7 @@ describe('StreamTagStore', function() {
 
   describe('onLoadTagsSuccess()', () => {
     it('should add a new tag with empty values and trigger the new addition', () => {
-      this.sandbox.stub(StreamTagStore, 'trigger');
+      sandbox.stub(StreamTagStore, 'trigger');
 
       StreamTagStore.onLoadTagsSuccess([
         {
diff --git a/tests/js/spec/utils/logging.spec.jsx b/tests/js/spec/utils/logging.spec.jsx
index a6ce8277f2..09ba04683e 100644
--- a/tests/js/spec/utils/logging.spec.jsx
+++ b/tests/js/spec/utils/logging.spec.jsx
@@ -2,15 +2,17 @@ import {logAjaxError} from 'app/utils/logging';
 import Raven from 'raven-js';
 
 describe('logging', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.sandbox.stub(Raven, 'captureMessage');
-    this.sandbox.stub(window.console, 'error');
+    sandbox.stub(Raven, 'captureMessage');
+    sandbox.stub(window.console, 'error');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('logAjaxError()', function() {
diff --git a/tests/js/spec/utils/streamManager.spec.js b/tests/js/spec/utils/streamManager.spec.js
index af01810fe6..58917b9551 100644
--- a/tests/js/spec/utils/streamManager.spec.js
+++ b/tests/js/spec/utils/streamManager.spec.js
@@ -2,8 +2,10 @@ import Reflux from 'reflux';
 import StreamManager from 'app/utils/streamManager';
 
 describe('StreamManager', function() {
+  let store;
+
   beforeEach(function() {
-    this.store = Reflux.createStore({
+    store = Reflux.createStore({
       add() {},
       getAllItems() {},
       remove() {},
@@ -12,22 +14,22 @@ describe('StreamManager', function() {
 
   it('allows options configuration', function() {
     let options = {limit: 2};
-    let mgr = new StreamManager(this.store, options);
+    let mgr = new StreamManager(store, options);
 
     expect(mgr.limit).toEqual(options.limit);
   });
 
   describe('push()', function() {
     it('allows passing no items', function() {
-      let mgr = new StreamManager(this.store);
+      let mgr = new StreamManager(store);
       expect(() => mgr.push()).not.toThrow();
       expect(() => mgr.push([])).not.toThrow();
       expect(mgr.idList.length).toEqual(0);
     });
 
     it('adds items', function() {
-      let storeAdd = sinon.spy(this.store, 'add');
-      let mgr = new StreamManager(this.store);
+      let storeAdd = sinon.spy(store, 'add');
+      let mgr = new StreamManager(store);
       let items = [{id: 1}];
       mgr.push(items);
 
@@ -36,8 +38,8 @@ describe('StreamManager', function() {
     });
 
     it('allows adding a single item', function() {
-      let storeAdd = sinon.spy(this.store, 'add');
-      let mgr = new StreamManager(this.store);
+      let storeAdd = sinon.spy(store, 'add');
+      let mgr = new StreamManager(store);
       let item = {id: 1};
       mgr.push(item);
 
@@ -46,8 +48,8 @@ describe('StreamManager', function() {
     });
 
     it('trims after adding', function() {
-      let mgr = new StreamManager(this.store, {limit: 1});
-      let storeRemove = sinon.spy(this.store, 'remove');
+      let mgr = new StreamManager(store, {limit: 1});
+      let storeRemove = sinon.spy(store, 'remove');
       let mgrTrim = sinon.spy(mgr, 'trim');
       mgr.push([{id: 1}, {id: 2}]);
 
@@ -57,7 +59,7 @@ describe('StreamManager', function() {
     });
 
     it('preserves NEW order of duplicates', function() {
-      let mgr = new StreamManager(this.store);
+      let mgr = new StreamManager(store);
       mgr.push([{id: 1}, {id: 3}]);
       mgr.push([{id: 1}, {id: 2}]); // New order of "1" if after "3"
 
@@ -67,8 +69,8 @@ describe('StreamManager', function() {
 
   describe('trim()', function() {
     it('removes trailing items in excess of the limit', function() {
-      let storeRemove = sinon.spy(this.store, 'remove');
-      let mgr = new StreamManager(this.store, {limit: 1});
+      let storeRemove = sinon.spy(store, 'remove');
+      let mgr = new StreamManager(store, {limit: 1});
       mgr.idList = [1, 2, 3];
       mgr.trim();
 
@@ -79,8 +81,8 @@ describe('StreamManager', function() {
     });
 
     it('does nothing with fewer items than limit', function() {
-      let storeRemove = sinon.spy(this.store, 'remove');
-      let mgr = new StreamManager(this.store, {limit: 10});
+      let storeRemove = sinon.spy(store, 'remove');
+      let mgr = new StreamManager(store, {limit: 10});
       mgr.idList = [1, 2, 3];
       mgr.trim();
 
@@ -92,10 +94,10 @@ describe('StreamManager', function() {
 
   describe('getAllItems()', function() {
     it('retrives ordered items from store', function() {
-      let storeGetAllItems = sinon.stub(this.store, 'getAllItems', function() {
+      let storeGetAllItems = sinon.stub(store, 'getAllItems', function() {
         return [{id: 1}, {id: 2}];
       });
-      let mgr = new StreamManager(this.store);
+      let mgr = new StreamManager(store);
       mgr.push({id: 2});
       mgr.push({id: 1});
       let items = mgr.getAllItems();
@@ -106,21 +108,21 @@ describe('StreamManager', function() {
 
     it('does not mutate store', function() {
       let storeItems = [{id: 1}, {id: 2}];
-      sinon.stub(this.store, 'getAllItems', function() {
+      sinon.stub(store, 'getAllItems', function() {
         return storeItems;
       });
-      let mgr = new StreamManager(this.store);
+      let mgr = new StreamManager(store);
       mgr.push([{id: 2}, {id: 1}]);
       mgr.getAllItems();
 
-      expect(this.store.getAllItems()).toEqual([{id: 1}, {id: 2}]);
+      expect(store.getAllItems()).toEqual([{id: 1}, {id: 2}]);
     });
   });
 
   describe('unshift()', function() {
     it('adds items to the start of the list', function() {
-      let storeAdd = sinon.spy(this.store, 'add');
-      let mgr = new StreamManager(this.store);
+      let storeAdd = sinon.spy(store, 'add');
+      let mgr = new StreamManager(store);
       mgr.unshift([{id: 2}]);
       mgr.unshift([{id: 1}]);
 
@@ -130,7 +132,7 @@ describe('StreamManager', function() {
     });
 
     it('moves duplicates to the start of the list', function() {
-      let mgr = new StreamManager(this.store);
+      let mgr = new StreamManager(store);
       mgr.unshift([{id: 2}, {id: 1}]);
       mgr.unshift([{id: 1}]);
 
@@ -138,7 +140,7 @@ describe('StreamManager', function() {
     });
 
     it('moves a duplicate array to the start of the list and preserves order', function() {
-      let mgr = new StreamManager(this.store);
+      let mgr = new StreamManager(store);
       mgr.unshift([{id: 3}, {id: 2}, {id: 1}]);
       mgr.unshift([{id: 2}, {id: 1}]);
 
@@ -146,7 +148,7 @@ describe('StreamManager', function() {
     });
 
     it('allows adding a single item', function() {
-      let mgr = new StreamManager(this.store);
+      let mgr = new StreamManager(store);
       mgr.unshift({id: 1});
 
       expect(mgr.idList).toEqual([1]);
diff --git a/tests/js/spec/utils/utils.spec.jsx b/tests/js/spec/utils/utils.spec.jsx
index e90228dbff..8955c98991 100644
--- a/tests/js/spec/utils/utils.spec.jsx
+++ b/tests/js/spec/utils/utils.spec.jsx
@@ -157,8 +157,8 @@ describe('utils.parseRepo', function() {
     expect(parseRepo('github.com/example/example/commits/adsadsa')).toEqual(
       'example/example'
     );
-    it('should work for nothing passed', function() {
-      expect(parseRepo().toEqual());
-    });
+  });
+  it('should work for nothing passed', function() {
+    expect(parseRepo()).toEqual();
   });
 });
diff --git a/tests/js/spec/views/__snapshots__/organizationMembersView.spec.jsx.snap b/tests/js/spec/views/__snapshots__/organizationMembersView.spec.jsx.snap
index dab36537a7..c0fd89fa62 100644
--- a/tests/js/spec/views/__snapshots__/organizationMembersView.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/organizationMembersView.spec.jsx.snap
@@ -98,7 +98,7 @@ exports[`OrganizationMembersView No Require Link does not have 2fa warning if us
         </div>
       </SpreadLayout>
       <OrganizationAccessRequests
-        accessRequestBusy={Array []}
+        accessRequestBusy={Map {}}
         onApprove={[Function]}
         onDeny={[Function]}
         requestList={Array []}
@@ -800,7 +800,7 @@ exports[`OrganizationMembersView Require Link does not have 2fa warning if user
         </div>
       </SpreadLayout>
       <OrganizationAccessRequests
-        accessRequestBusy={Array []}
+        accessRequestBusy={Map {}}
         onApprove={[Function]}
         onDeny={[Function]}
         requestList={Array []}
diff --git a/tests/js/spec/views/adminSettings.spec.jsx b/tests/js/spec/views/adminSettings.spec.jsx
index 1add37084f..22c570d6af 100644
--- a/tests/js/spec/views/adminSettings.spec.jsx
+++ b/tests/js/spec/views/adminSettings.spec.jsx
@@ -1,6 +1,7 @@
 import React from 'react';
 import {shallow} from 'enzyme';
 
+import {Client} from 'app/api';
 import AdminSettings from 'app/views/adminSettings';
 
 // TODO(dcramer): this doesnt really test anything as we need to
@@ -8,7 +9,7 @@ import AdminSettings from 'app/views/adminSettings';
 describe('AdminSettings', function() {
   describe('render()', function() {
     beforeEach(() => {
-      MockApiClient.addMockResponse({
+      Client.addMockResponse({
         url: '/internal/options/',
         body: {
           'system.url-prefix': {
diff --git a/tests/js/spec/views/groupActivity/index.spec.jsx b/tests/js/spec/views/groupActivity/index.spec.jsx
index ba584caea6..b055857a96 100644
--- a/tests/js/spec/views/groupActivity/index.spec.jsx
+++ b/tests/js/spec/views/groupActivity/index.spec.jsx
@@ -7,17 +7,16 @@ import ConfigStore from 'app/stores/configStore';
 import GroupStore from 'app/stores/groupStore';
 
 describe('GroupActivity', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.sandbox
-      .stub(ConfigStore, 'get')
-      .withArgs('user')
-      .returns({});
+    sandbox.stub(ConfigStore, 'get').withArgs('user').returns({});
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   it('renders a NoteInput', function() {
@@ -33,8 +32,10 @@ describe('GroupActivity', function() {
   });
 
   describe('onNoteDelete()', function() {
+    let instance;
+
     beforeEach(function() {
-      this.instance = shallow(<GroupActivity group={{id: '1337', activity: []}} />, {
+      instance = shallow(<GroupActivity group={{id: '1337', activity: []}} />, {
         context: {
           group: {id: '1337'},
           project: {id: 'foo'},
@@ -45,21 +46,17 @@ describe('GroupActivity', function() {
     });
 
     it('should do nothing if not present in GroupStore', function() {
-      let instance = this.instance;
-
-      this.sandbox.stub(GroupStore, 'removeActivity').returns(-1); // not found
-      let request = this.sandbox.stub(instance.api, 'request');
+      sandbox.stub(GroupStore, 'removeActivity').returns(-1); // not found
+      let request = sandbox.stub(instance.api, 'request');
 
       instance.onNoteDelete({id: 1});
       expect(request.calledOnce).not.toBeTruthy();
     });
 
     it('should remove remove the item from the GroupStore make a DELETE API request', function() {
-      let instance = this.instance;
-
-      this.sandbox.stub(GroupStore, 'removeActivity').returns(1);
+      sandbox.stub(GroupStore, 'removeActivity').returns(1);
 
-      let request = this.sandbox.stub(instance.api, 'request');
+      let request = sandbox.stub(instance.api, 'request');
       instance.onNoteDelete({id: 1});
       expect(request.calledOnce).toBeTruthy();
       expect(request.getCall(0).args[0]).toEqual('/issues/1337/comments/1/');
diff --git a/tests/js/spec/views/groupDetails/actions.spec.jsx b/tests/js/spec/views/groupDetails/actions.spec.jsx
index 4e72a081c4..87c62e7023 100644
--- a/tests/js/spec/views/groupDetails/actions.spec.jsx
+++ b/tests/js/spec/views/groupDetails/actions.spec.jsx
@@ -5,14 +5,16 @@ import GroupActions from 'app/views/groupDetails/actions';
 import ConfigStore from 'app/stores/configStore';
 
 describe('GroupActions', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.sandbox.stub(ConfigStore, 'get').returns([]);
+    sandbox.stub(ConfigStore, 'get').returns([]);
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/views/groupDetails/seenBy.spec.jsx b/tests/js/spec/views/groupDetails/seenBy.spec.jsx
index 68c60ed76d..3a988fb4bb 100644
--- a/tests/js/spec/views/groupDetails/seenBy.spec.jsx
+++ b/tests/js/spec/views/groupDetails/seenBy.spec.jsx
@@ -5,14 +5,16 @@ import GroupSeenBy from 'app/views/groupDetails/seenBy';
 import ConfigStore from 'app/stores/configStore';
 
 describe('GroupSeenBy', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.sandbox.stub(ConfigStore, 'get').returns([]);
+    sandbox.stub(ConfigStore, 'get').returns([]);
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap b/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
index 2121cdc3a4..6f0a818137 100644
--- a/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
+++ b/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
@@ -172,9 +172,9 @@ exports[`CreateProject render() should render roles when available and allowed,
       </RoleSelect>
       <TeamSelect
         selectedTeams={
-          Array [
+          Set {
             "bar",
-          ]
+          }
         }
         teams={
           Array [
diff --git a/tests/js/spec/views/inviteMember/inviteMember.spec.jsx b/tests/js/spec/views/inviteMember/inviteMember.spec.jsx
index 4c400efd35..544b193077 100644
--- a/tests/js/spec/views/inviteMember/inviteMember.spec.jsx
+++ b/tests/js/spec/views/inviteMember/inviteMember.spec.jsx
@@ -9,14 +9,16 @@ jest.mock('app/api');
 jest.mock('jquery');
 
 describe('CreateProject', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    this.sandbox.stub(ConfigStore, 'getConfig').returns({id: 1, invitesEnabled: true});
+    sandbox = sinon.sandbox.create();
+    sandbox.stub(ConfigStore, 'getConfig').returns({id: 1, invitesEnabled: true});
     Client.clearMockResponses();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
@@ -78,8 +80,8 @@ describe('CreateProject', function() {
     });
 
     it('should use invite/add language based on config', function() {
-      this.sandbox.restore(ConfigStore, 'getConfig');
-      this.sandbox.stub(ConfigStore, 'getConfig').returns({id: 1, invitesEnabled: false});
+      sandbox.restore(ConfigStore, 'getConfig');
+      sandbox.stub(ConfigStore, 'getConfig').returns({id: 1, invitesEnabled: false});
 
       let wrapper = shallow(<InviteMember {...baseProps} />, baseContext);
       wrapper.setState({
@@ -105,10 +107,7 @@ describe('CreateProject', function() {
         },
       });
 
-      let handleSubmitStub = this.sandbox.stub(
-        InviteMember.prototype,
-        'redirectToMemberPage'
-      );
+      let handleSubmitStub = sandbox.stub(InviteMember.prototype, 'redirectToMemberPage');
       //   this is a hack to defeat the method auto binding so we can fully stub the method. It would not be neccessary with es6 class components and it relies on react internals so it's fragile - maxbittker
       const index =
         InviteMember.prototype.__reactAutoBindPairs.indexOf('redirectToMemberPage') + 1;
diff --git a/tests/js/spec/views/onboarding/configure/index.spec.jsx b/tests/js/spec/views/onboarding/configure/index.spec.jsx
index af37259e5f..1c62468ff0 100644
--- a/tests/js/spec/views/onboarding/configure/index.spec.jsx
+++ b/tests/js/spec/views/onboarding/configure/index.spec.jsx
@@ -6,13 +6,16 @@ import Configure from 'app/views/onboarding/configure';
 import SentryTypes from '../../../../../../src/sentry/static/sentry/app/proptypes';
 
 describe('Configure should render correctly', function() {
+  let sandbox;
+  let stubbedApiRequest;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    sandbox = sinon.sandbox.create();
+    stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
@@ -37,11 +40,7 @@ describe('Configure should render correctly', function() {
 
       const component = wrapper.instance();
 
-      let handleSubmitStub = this.sandbox.stub(
-        component,
-        'redirectToNeutralDocs',
-        () => {}
-      );
+      let handleSubmitStub = sandbox.stub(component, 'redirectToNeutralDocs', () => {});
 
       wrapper.update();
       expect(wrapper).toMatchSnapshot();
@@ -54,10 +53,7 @@ describe('Configure should render correctly', function() {
       };
       props.params.platform = 'other';
 
-      let handleSubmitStub = this.sandbox.stub(
-        Configure.prototype,
-        'redirectToNeutralDocs'
-      );
+      let handleSubmitStub = sandbox.stub(Configure.prototype, 'redirectToNeutralDocs');
 
       //   this is a hack to defeat the method auto binding so we can fully stub the method. It would not be neccessary with es6 class components and it relies on react internals so it's fragile - maxbittker
       const index =
@@ -106,7 +102,7 @@ describe('Configure should render correctly', function() {
         childContextTypes: {organization: SentryTypes.Organization},
       });
       expect(wrapper).toMatchSnapshot();
-      expect(this.stubbedApiRequest.callCount).toEqual(5);
+      expect(stubbedApiRequest.callCount).toEqual(5);
     });
   });
 });
diff --git a/tests/js/spec/views/onboarding/createProject.spec.jsx b/tests/js/spec/views/onboarding/createProject.spec.jsx
index 05d5d00f3b..3c5fb691d7 100644
--- a/tests/js/spec/views/onboarding/createProject.spec.jsx
+++ b/tests/js/spec/views/onboarding/createProject.spec.jsx
@@ -5,13 +5,15 @@ import {Client} from 'app/api';
 import CreateProject from 'app/views/onboarding/createProject';
 
 describe('CreateProject', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    sandbox = sinon.sandbox.create();
+    this.stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/views/onboarding/index.spec.jsx b/tests/js/spec/views/onboarding/index.spec.jsx
index 2d3a0add66..80ce872275 100644
--- a/tests/js/spec/views/onboarding/index.spec.jsx
+++ b/tests/js/spec/views/onboarding/index.spec.jsx
@@ -6,13 +6,15 @@ import OnboardingWizard from 'app/views/onboarding/';
 import Project from 'app/views/onboarding/project';
 
 describe('OnboardingWizard', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    sandbox = sinon.sandbox.create();
+    this.stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/views/onboarding/project/__snapshots__/platformpicker.spec.jsx.snap b/tests/js/spec/views/onboarding/project/__snapshots__/platformpicker.spec.jsx.snap
index 6b3e1db39c..b40069d1d7 100644
--- a/tests/js/spec/views/onboarding/project/__snapshots__/platformpicker.spec.jsx.snap
+++ b/tests/js/spec/views/onboarding/project/__snapshots__/platformpicker.spec.jsx.snap
@@ -312,7 +312,7 @@ exports[`PlatformPicker render() should render renderPlatformList with community
   </ul>
   <p>
     Not finding your platform? There's a rich ecosystem of community supported SDKs as well (including Perl, CFML, Clojure, and ActionScript).
-     Try searching for Sentry clients or contacting support.
+ Try searching for Sentry clients or contacting support.
   </p>
 </div>
 `;
diff --git a/tests/js/spec/views/onboarding/project/index.spec.jsx b/tests/js/spec/views/onboarding/project/index.spec.jsx
index 9003c46145..3416839d1f 100644
--- a/tests/js/spec/views/onboarding/project/index.spec.jsx
+++ b/tests/js/spec/views/onboarding/project/index.spec.jsx
@@ -5,13 +5,15 @@ import {Client} from 'app/api';
 import Project from 'app/views/onboarding/project';
 
 describe('Project', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    sandbox = sinon.sandbox.create();
+    this.stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/views/onboarding/project/platformpicker.spec.jsx b/tests/js/spec/views/onboarding/project/platformpicker.spec.jsx
index f65652d5ea..b5ec54832b 100644
--- a/tests/js/spec/views/onboarding/project/platformpicker.spec.jsx
+++ b/tests/js/spec/views/onboarding/project/platformpicker.spec.jsx
@@ -7,13 +7,15 @@ import {categoryLists} from 'app/views/onboarding/utils';
 import sinon from 'sinon';
 
 describe('PlatformPicker', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    sandbox = sinon.sandbox.create();
+    this.stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/views/organizationTeams.spec.jsx b/tests/js/spec/views/organizationTeams.spec.jsx
index b063c848ad..7e96cf25aa 100644
--- a/tests/js/spec/views/organizationTeams.spec.jsx
+++ b/tests/js/spec/views/organizationTeams.spec.jsx
@@ -5,14 +5,17 @@ import {Client} from 'app/api';
 import OrganizationTeams from 'app/views/organizationTeams';
 
 describe('OrganizationTeams', function() {
+  let sandbox;
+  let stubbedApiRequest;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('fetchStats()', function() {
@@ -23,14 +26,12 @@ describe('OrganizationTeams', function() {
 
       // NOTE: creation of OrganizationTeams causes a bunch of API requests to fire ...
       //       reset the request stub so that we can get an accurate count
-      this.stubbedApiRequest.reset();
+      stubbedApiRequest.reset();
 
       organizationTeams.fetchStats();
 
-      expect(this.stubbedApiRequest.callCount).toEqual(1);
-      expect(this.stubbedApiRequest.getCall(0).args[0]).toEqual(
-        '/organizations/123/stats/'
-      );
+      expect(stubbedApiRequest.callCount).toEqual(1);
+      expect(stubbedApiRequest.getCall(0).args[0]).toEqual('/organizations/123/stats/');
     });
   });
 });
diff --git a/tests/js/spec/views/projectAlertSettings.spec.jsx b/tests/js/spec/views/projectAlertSettings.spec.jsx
index 49357b569d..5ae35e7a98 100644
--- a/tests/js/spec/views/projectAlertSettings.spec.jsx
+++ b/tests/js/spec/views/projectAlertSettings.spec.jsx
@@ -1,20 +1,24 @@
 import React from 'react';
 import {shallow} from 'enzyme';
 
+import {Client} from 'app/api';
 import ProjectAlertSettings from 'app/views/projectAlertSettings';
 
 describe('ProjectAlertSettings', function() {
+  let org;
+  let project;
+
   beforeEach(function() {
-    this.org = TestStubs.Organization();
-    this.project = TestStubs.Project();
+    org = TestStubs.Organization();
+    project = TestStubs.Project();
 
-    MockApiClient.addMockResponse({
-      url: `/projects/${this.org.slug}/${this.project.slug}/`,
+    Client.addMockResponse({
+      url: `/projects/${org.slug}/${project.slug}/`,
       method: 'GET',
-      body: this.project,
+      body: project,
     });
-    MockApiClient.addMockResponse({
-      url: `/projects/${this.org.slug}/${this.project.slug}/plugins/`,
+    Client.addMockResponse({
+      url: `/projects/${org.slug}/${project.slug}/plugins/`,
       method: 'GET',
       body: [],
     });
@@ -24,8 +28,8 @@ describe('ProjectAlertSettings', function() {
     it('renders', function() {
       let wrapper = shallow(
         <ProjectAlertSettings
-          params={{orgId: this.org.slug, projectId: this.project.slug}}
-          organization={this.org}
+          params={{orgId: org.slug, projectId: project.slug}}
+          organization={org}
         />,
         {
           context: {
diff --git a/tests/js/spec/views/projectInstall/newProject.spec.jsx b/tests/js/spec/views/projectInstall/newProject.spec.jsx
index f358d49631..5d831720ec 100644
--- a/tests/js/spec/views/projectInstall/newProject.spec.jsx
+++ b/tests/js/spec/views/projectInstall/newProject.spec.jsx
@@ -5,13 +5,15 @@ import {Client} from 'app/api';
 import NewProject from 'app/views/projectInstall/newProject';
 
 describe('NewProjectPlatform', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    sandbox = sinon.sandbox.create();
+    this.stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/views/projectInstall/platform.spec.jsx b/tests/js/spec/views/projectInstall/platform.spec.jsx
index 8b31427ba0..d3a604609f 100644
--- a/tests/js/spec/views/projectInstall/platform.spec.jsx
+++ b/tests/js/spec/views/projectInstall/platform.spec.jsx
@@ -5,14 +5,16 @@ import {Client} from 'app/api';
 import ProjectInstallPlatform from 'app/views/projectInstall/platform';
 
 describe('ProjectInstallPlatform', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    this.stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
diff --git a/tests/js/spec/views/projectReleases.spec.jsx b/tests/js/spec/views/projectReleases.spec.jsx
index 1022c863c0..5d6e0d6957 100644
--- a/tests/js/spec/views/projectReleases.spec.jsx
+++ b/tests/js/spec/views/projectReleases.spec.jsx
@@ -10,23 +10,27 @@ import Pagination from 'app/components/pagination';
 import stubReactComponents from '../../helpers/stubReactComponent';
 
 describe('ProjectReleases', function() {
+  let sandbox;
+  let props;
+  let projectReleases;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.sandbox.stub(Client.prototype, 'request');
-    stubReactComponents(this.sandbox, [SearchBar, Pagination]);
-    this.sandbox.stub(browserHistory, 'pushState');
+    sandbox.stub(Client.prototype, 'request');
+    stubReactComponents(sandbox, [SearchBar, Pagination]);
+    sandbox.stub(browserHistory, 'pushState');
 
-    this.props = {
+    props = {
       setProjectNavSection: function() {},
       params: {orgId: '123', projectId: '456'},
       location: {query: {per_page: 0, query: 'derp'}},
     };
-    this.projectReleases = shallow(<ProjectReleases {...this.props} />);
+    projectReleases = shallow(<ProjectReleases {...props} />);
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('fetchData()', function() {
@@ -39,14 +43,12 @@ describe('ProjectReleases', function() {
 
   describe('getInitialState()', function() {
     it('should take query state from query string', function() {
-      expect(this.projectReleases.state('query')).toEqual('derp');
+      expect(projectReleases.state('query')).toEqual('derp');
     });
   });
 
   describe('onSearch', function() {
     it('should change query string with new search parameter', function() {
-      let projectReleases = this.projectReleases;
-
       projectReleases.instance().onSearch('searchquery');
 
       expect(browserHistory.pushState.calledOnce).toBeTruthy();
@@ -62,18 +64,16 @@ describe('ProjectReleases', function() {
 
   describe('componentWillReceiveProps()', function() {
     it('should update state with latest query pulled from query string', function() {
-      let projectReleases = this.projectReleases.instance();
-
-      let setState = this.sandbox.stub(projectReleases, 'setState');
+      let setState = sandbox.stub(projectReleases.instance(), 'setState');
 
       let newProps = {
-        ...this.props,
+        ...props,
         location: {
           search: '?query=newquery',
           query: {query: 'newquery'},
         },
       };
-      projectReleases.componentWillReceiveProps(newProps);
+      projectReleases.instance().componentWillReceiveProps(newProps);
 
       expect(setState.calledOnce).toBeTruthy();
       expect(setState.getCall(0).args[0]).toEqual({
diff --git a/tests/js/spec/views/releaseArtifacts.spec.jsx b/tests/js/spec/views/releaseArtifacts.spec.jsx
index 11bbc1e77b..f00fc9c876 100644
--- a/tests/js/spec/views/releaseArtifacts.spec.jsx
+++ b/tests/js/spec/views/releaseArtifacts.spec.jsx
@@ -5,12 +5,17 @@ import {Client} from 'app/api';
 import ReleaseArtifacts from 'app/views/releaseArtifacts';
 
 describe('ReleaseArtifacts', function() {
+  let sandbox;
+  let stubbedApiRequest;
+  let wrapper;
+  let wrapperWithPermission;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
 
-    this.wrapper = shallow(
+    wrapper = shallow(
       <ReleaseArtifacts
         location={{query: {cursor: '0:0:100'}}}
         params={{orgId: '123', projectId: '456', version: 'abcdef'}}
@@ -25,7 +30,7 @@ describe('ReleaseArtifacts', function() {
       }
     );
 
-    this.wrapperWithPermission = shallow(
+    wrapperWithPermission = shallow(
       <ReleaseArtifacts
         location={{query: {cursor: '0:0:100'}}}
         params={{orgId: '123', projectId: '456', version: 'abcdef'}}
@@ -42,12 +47,11 @@ describe('ReleaseArtifacts', function() {
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('render()', function() {
     it('should render a row for each file', function() {
-      let wrapper = this.wrapper;
       wrapper.setState({
         loading: false,
         fileList: [
@@ -68,7 +72,6 @@ describe('ReleaseArtifacts', function() {
     });
 
     it('should have no permission to download', function() {
-      let wrapper = this.wrapper;
       wrapper.setState({
         loading: false,
         fileList: [
@@ -89,7 +92,7 @@ describe('ReleaseArtifacts', function() {
     });
 
     it('should have permission to download', function() {
-      let wrapper = this.wrapperWithPermission;
+      wrapper = wrapperWithPermission;
       wrapper.setState({
         loading: false,
         fileList: [
@@ -112,7 +115,6 @@ describe('ReleaseArtifacts', function() {
 
   describe('handleRemove()', function() {
     it('should remove the file from the file list', function() {
-      let wrapper = this.wrapper;
       wrapper.setState({
         loading: false,
         fileList: [
@@ -130,8 +132,8 @@ describe('ReleaseArtifacts', function() {
       });
 
       let instance = wrapper.instance();
-      this.stubbedApiRequest.restore();
-      this.sandbox.stub(instance.api, 'request', function(url, options) {
+      stubbedApiRequest.restore();
+      sandbox.stub(instance.api, 'request', function(url, options) {
         // emulate successful api completion
         options.success();
         options.complete();
@@ -146,10 +148,9 @@ describe('ReleaseArtifacts', function() {
 
   describe('fetchData()', function() {
     it('should append the location query string to the request URL', function() {
-      let wrapper = this.wrapper;
       wrapper.instance().fetchData();
 
-      let apiArgs = this.stubbedApiRequest.lastCall.args;
+      let apiArgs = stubbedApiRequest.lastCall.args;
       expect(apiArgs[0]).toEqual('/projects/123/456/releases/abcdef/files/');
       expect(apiArgs[1].data).toHaveProperty('cursor', '0:0:100');
     });
diff --git a/tests/js/spec/views/ruleEditor/ruleNodeList.spec.jsx b/tests/js/spec/views/ruleEditor/ruleNodeList.spec.jsx
index 89b679fda4..60391764ef 100644
--- a/tests/js/spec/views/ruleEditor/ruleNodeList.spec.jsx
+++ b/tests/js/spec/views/ruleEditor/ruleNodeList.spec.jsx
@@ -4,8 +4,10 @@ import {shallow} from 'enzyme';
 import RuleNodeList from 'app/views/ruleEditor/ruleNodeList';
 
 describe('RuleNodeList', function() {
+  let sampleNodes;
+
   beforeEach(function() {
-    this.sampleNodes = [
+    sampleNodes = [
       {
         id: 'sentry.rules.conditions.every_event.EveryEventCondition',
         label: 'An event is seen',
@@ -35,7 +37,7 @@ describe('RuleNodeList', function() {
       ];
 
       let wrapper = shallow(
-        <RuleNodeList nodes={this.sampleNodes} initialItems={initialItems} />
+        <RuleNodeList nodes={sampleNodes} initialItems={initialItems} />
       );
 
       expect(wrapper.state('items')[0]).toHaveProperty('key_attr', 0);
@@ -46,7 +48,7 @@ describe('RuleNodeList', function() {
 
   describe('onAddRow()', function() {
     it('should add a new item with key_attr value equal to state.counter, and increment state.counter', function() {
-      let wrapper = shallow(<RuleNodeList nodes={this.sampleNodes} />);
+      let wrapper = shallow(<RuleNodeList nodes={sampleNodes} />);
 
       wrapper.setState({
         counter: 5,
diff --git a/tests/js/spec/views/stream.spec.jsx b/tests/js/spec/views/stream.spec.jsx
index 2ea356ed57..8d2751df93 100644
--- a/tests/js/spec/views/stream.spec.jsx
+++ b/tests/js/spec/views/stream.spec.jsx
@@ -16,25 +16,26 @@ const DEFAULT_LINKS_HEADER =
   '<http://127.0.0.1:8000/api/0/projects/sentry/ludic-science/issues/?cursor=1443575731:0:0>; rel="next"; results="true"; cursor="1443575731:0:0';
 
 describe('Stream', function() {
+  let sandbox;
+  let stubbedApiRequest;
+  let context;
+  let wrapper;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
-
-    this.stubbedApiRequest = this.sandbox.stub(
-      Client.prototype,
-      'request',
-      (url, options) => {
-        if (
-          url === 'http://127.0.0.1/api/0/projects/sentry/ludic-science/searches/' &&
-          options.method === 'GET'
-        ) {
-          options.success &&
-            options.success([{id: '789', query: 'is:unresolved', name: 'test'}]);
-        }
-        options.complete && options.complete();
+    sandbox = sinon.sandbox.create();
+
+    stubbedApiRequest = sandbox.stub(Client.prototype, 'request', (url, options) => {
+      if (
+        url === 'http://127.0.0.1/api/0/projects/sentry/ludic-science/searches/' &&
+        options.method === 'GET'
+      ) {
+        options.success &&
+          options.success([{id: '789', query: 'is:unresolved', name: 'test'}]);
       }
-    );
+      options.complete && options.complete();
+    });
 
-    this.context = {
+    context = {
       project: {
         id: '3559',
         slug: 'foo-project',
@@ -53,23 +54,23 @@ describe('Stream', function() {
       params: {orgId: '123', projectId: '456'},
     };
 
-    this.wrapper = shallow(<Stream {...props} />, {
-      context: this.context,
+    wrapper = shallow(<Stream {...props} />, {
+      context,
     });
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('fetchData()', function() {
     describe('complete handler', function() {
       beforeEach(function() {
-        this.sandbox.stub(CursorPoller.prototype, 'setEndpoint');
+        sandbox.stub(CursorPoller.prototype, 'setEndpoint');
       });
 
       it('should reset the poller endpoint and sets cursor URL', function() {
-        let stream = this.wrapper.instance();
+        let stream = wrapper.instance();
         stream.state.pageLinks = DEFAULT_LINKS_HEADER;
         stream.state.realtimeActive = true;
         stream.fetchData();
@@ -82,7 +83,7 @@ describe('Stream', function() {
       });
 
       it('should not enable the poller if realtimeActive is false', function() {
-        let stream = this.wrapper.instance();
+        let stream = wrapper.instance();
         stream.state.pageLinks = DEFAULT_LINKS_HEADER;
         stream.state.realtimeActive = false;
         stream.fetchData();
@@ -91,7 +92,7 @@ describe('Stream', function() {
       });
 
       it("should not enable the poller if the 'previous' link has results", function() {
-        let stream = this.wrapper.instance();
+        let stream = wrapper.instance();
         stream.state.pageLinks =
           '<http://127.0.0.1:8000/api/0/projects/sentry/ludic-science/issues/?cursor=1443575731:0:1>; rel="previous"; results="true"; cursor="1443575731:0:1", ' +
           '<http://127.0.0.1:8000/api/0/projects/sentry/ludic-science/issues/?cursor=1443575731:0:0>; rel="next"; results="true"; cursor="1443575731:0:0';
@@ -104,11 +105,11 @@ describe('Stream', function() {
     }); // complete handler
 
     it('should cancel any previous, unfinished fetches', function() {
-      this.stubbedApiRequest.restore();
+      stubbedApiRequest.restore();
 
-      let requestCancel = this.sandbox.stub();
+      let requestCancel = sandbox.stub();
       let requestOptions;
-      this.sandbox.stub(Client.prototype, 'request', function(url, options) {
+      sandbox.stub(Client.prototype, 'request', function(url, options) {
         requestOptions = options;
         return {
           cancel: requestCancel,
@@ -116,7 +117,7 @@ describe('Stream', function() {
       });
 
       // NOTE: fetchData called once after render automatically
-      let stream = this.wrapper.instance();
+      let stream = wrapper.instance();
 
       // 2nd fetch should call cancel
       stream.fetchData();
@@ -136,19 +137,16 @@ describe('Stream', function() {
 
   describe('render()', function() {
     it('displays a loading indicator when component is loading', function() {
-      let wrapper = this.wrapper;
       wrapper.setState({loading: true});
       expect(wrapper.find('.loading')).toBeTruthy();
     });
 
     it('displays a loading indicator when data is loading', function() {
-      let wrapper = this.wrapper;
       wrapper.setState({dataLoading: true});
       expect(wrapper.find('.loading')).toBeTruthy();
     });
 
     it('displays an error when component has errored', function() {
-      let wrapper = this.wrapper;
       wrapper.setState({
         error: 'Something bad happened',
         loading: false,
@@ -158,7 +156,6 @@ describe('Stream', function() {
     });
 
     it('displays the group list', function() {
-      let wrapper = this.wrapper;
       wrapper.setState({
         error: false,
         groupIds: ['1'],
@@ -169,8 +166,6 @@ describe('Stream', function() {
     });
 
     it('displays empty with no ids', function() {
-      let wrapper = this.wrapper;
-
       wrapper.setState({
         error: false,
         groupIds: [],
@@ -181,9 +176,7 @@ describe('Stream', function() {
     });
 
     it('shows "awaiting events" message when no events have been sent', function() {
-      let wrapper = this.wrapper;
-
-      this.context.project.firstEvent = false; // Set false for this test only
+      context.project.firstEvent = false; // Set false for this test only
 
       wrapper.setState({
         error: false,
@@ -192,17 +185,17 @@ describe('Stream', function() {
         dataLoading: false,
       });
 
-      expect(this.wrapper.find('.awaiting-events').length).toEqual(1);
+      expect(wrapper.find('.awaiting-events').length).toEqual(1);
 
-      this.context.project.firstEvent = true; // Reset for other tests
+      context.project.firstEvent = true; // Reset for other tests
     });
 
     it('does not have real time event updates when events exist', function() {
-      let wrapper = shallow(<Stream {...this.wrapper.instance().props} />, {
+      wrapper = shallow(<Stream {...wrapper.instance().props} />, {
         context: {
-          ...this.context,
+          ...context,
           project: {
-            ...this.context.project,
+            ...context.project,
             firstEvent: true,
           },
         },
@@ -213,11 +206,11 @@ describe('Stream', function() {
 
     it('does not have real time event updates enabled when cookie is present (even if there are no events)', function() {
       Cookies.set('realtimeActive', 'false');
-      let wrapper = shallow(<Stream {...this.wrapper.instance().props} />, {
+      wrapper = shallow(<Stream {...wrapper.instance().props} />, {
         context: {
-          ...this.context,
+          ...context,
           project: {
-            ...this.context.project,
+            ...context.project,
             firstEvent: false,
           },
         },
@@ -235,11 +228,11 @@ describe('Stream', function() {
     });
 
     it('has real time event updates enabled when there are no events', function() {
-      let wrapper = shallow(<Stream {...this.wrapper.instance().props} />, {
+      wrapper = shallow(<Stream {...wrapper.instance().props} />, {
         context: {
-          ...this.context,
+          ...context,
           project: {
-            ...this.context.project,
+            ...context.project,
             firstEvent: false,
           },
         },
@@ -264,21 +257,21 @@ describe('Stream', function() {
     it('reads the realtimeActive state from a cookie', function() {
       Cookies.set('realtimeActive', 'false');
 
-      let stream = this.wrapper.instance();
+      let stream = wrapper.instance();
       expect(stream.getInitialState()).toHaveProperty('realtimeActive', false);
     });
 
     it('reads the true realtimeActive state from a cookie', function() {
       Cookies.set('realtimeActive', 'true');
 
-      let stream = this.wrapper.instance();
+      let stream = wrapper.instance();
       expect(stream.getInitialState()).toHaveProperty('realtimeActive', true);
     });
   });
 
   describe('onRealtimeChange', function() {
     it('sets the realtimeActive state', function() {
-      let stream = this.wrapper.instance();
+      let stream = wrapper.instance();
       stream.state.realtimeActive = false;
       stream.onRealtimeChange(true);
       expect(stream.state.realtimeActive).toEqual(true);
@@ -308,7 +301,7 @@ describe('Stream', function() {
         sort: 'date',
       };
 
-      let actual = this.wrapper.instance().getInitialState();
+      let actual = wrapper.instance().getInitialState();
       expect(_.pick(actual, _.keys(expected))).toEqual(expected);
     });
 
@@ -336,7 +329,7 @@ describe('Stream', function() {
       };
 
       let stream = shallow(<Stream {...props} />, {
-        context: this.context,
+        context,
       }).instance();
 
       let actual = stream.getInitialState();
@@ -366,8 +359,8 @@ describe('Stream', function() {
         searchId: '789',
       };
 
-      let wrapper = shallow(<Stream {...props} />, {
-        context: this.context,
+      wrapper = shallow(<Stream {...props} />, {
+        context,
       });
 
       wrapper.setState({
@@ -402,7 +395,7 @@ describe('Stream', function() {
       };
 
       let stream = shallow(<Stream {...props} />, {
-        context: this.context,
+        context,
       }).instance();
 
       let actual = stream.getInitialState();
diff --git a/tests/js/spec/views/stream/actionLink.spec.jsx b/tests/js/spec/views/stream/actionLink.spec.jsx
index 686cd5d057..654b1aca29 100644
--- a/tests/js/spec/views/stream/actionLink.spec.jsx
+++ b/tests/js/spec/views/stream/actionLink.spec.jsx
@@ -5,14 +5,16 @@ import {Client} from 'app/api';
 import ActionLink from 'app/views/stream/actionLink';
 
 describe('ActionLink', function() {
+  let sandbox;
+
   beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+    this.stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('shouldConfirm()', function() {
diff --git a/tests/js/spec/views/stream/actions.spec.jsx b/tests/js/spec/views/stream/actions.spec.jsx
index fbc3674447..bfac6334e8 100644
--- a/tests/js/spec/views/stream/actions.spec.jsx
+++ b/tests/js/spec/views/stream/actions.spec.jsx
@@ -1,24 +1,24 @@
 import React from 'react';
 import {shallow} from 'enzyme';
 
-import {Client} from 'app/api';
 import StreamActions from 'app/views/stream/actions';
 import SelectedGroupStore from 'app/stores/selectedGroupStore';
 
 describe('StreamActions', function() {
-  beforeEach(function() {
-    this.sandbox = sinon.sandbox.create();
+  let sandbox;
+  let actions;
 
-    this.stubbedApiRequest = this.sandbox.stub(Client.prototype, 'request');
+  beforeEach(function() {
+    sandbox = sinon.sandbox.create();
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('actionSelectedGroups()', function() {
     beforeEach(function() {
-      this.actions = shallow(
+      actions = shallow(
         <StreamActions
           query=""
           orgId="1337"
@@ -34,31 +34,29 @@ describe('StreamActions', function() {
 
     describe('for all items', function() {
       it("should invoke the callback with 'undefined' and deselect all", function() {
-        this.sandbox.stub(SelectedGroupStore, 'deselectAll');
-        let callback = this.sandbox.stub();
+        sandbox.stub(SelectedGroupStore, 'deselectAll');
+        let callback = sandbox.stub();
 
-        this.actions.state.allInQuerySelected = true;
+        actions.state.allInQuerySelected = true;
 
-        this.actions.actionSelectedGroups(callback);
+        actions.actionSelectedGroups(callback);
 
         expect(callback.withArgs(undefined).calledOnce).toBeTruthy();
         expect(SelectedGroupStore.deselectAll.calledOnce).toBeTruthy();
 
         // all selected is reset
-        expect(this.actions.state.allInQuerySelected, false);
+        expect(actions.state.allInQuerySelected).toBe(false);
       });
     });
 
     describe('for page-selected items', function() {
       it('should invoke the callback with an array of selected items and deselect all', function() {
-        this.sandbox.stub(SelectedGroupStore, 'deselectAll');
-        this.sandbox
-          .stub(SelectedGroupStore, 'getSelectedIds')
-          .returns(new Set([1, 2, 3]));
+        sandbox.stub(SelectedGroupStore, 'deselectAll');
+        sandbox.stub(SelectedGroupStore, 'getSelectedIds').returns(new Set([1, 2, 3]));
 
-        this.actions.state.allInQuerySelected = false;
-        let callback = this.sandbox.stub();
-        this.actions.actionSelectedGroups(callback);
+        actions.state.allInQuerySelected = false;
+        let callback = sandbox.stub();
+        actions.actionSelectedGroups(callback);
 
         expect(callback.withArgs([1, 2, 3]).calledOnce).toBeTruthy();
         expect(SelectedGroupStore.deselectAll.calledOnce).toBeTruthy();
diff --git a/tests/js/spec/views/stream/searchBar.spec.jsx b/tests/js/spec/views/stream/searchBar.spec.jsx
index b2063ce927..4faf92684f 100644
--- a/tests/js/spec/views/stream/searchBar.spec.jsx
+++ b/tests/js/spec/views/stream/searchBar.spec.jsx
@@ -6,16 +6,18 @@ import SearchBar from 'app/views/stream/searchBar';
 import StreamTagStore from 'app/stores/streamTagStore';
 
 describe('SearchBar', function() {
+  let sandbox;
+
   beforeEach(function() {
     StreamTagStore.reset();
 
-    this.sandbox = sinon.sandbox.create();
+    sandbox = sinon.sandbox.create();
 
-    this.sandbox.stub(Client.prototype, 'request');
+    sandbox.stub(Client.prototype, 'request');
   });
 
   afterEach(function() {
-    this.sandbox.restore();
+    sandbox.restore();
   });
 
   describe('getQueryTerms()', function() {
@@ -70,7 +72,7 @@ describe('SearchBar', function() {
         projectId: '456',
         query: 'is:unresolved ruby',
         defaultQuery: 'is:unresolved',
-        onSearch: this.sandbox.spy(),
+        onSearch: sandbox.spy(),
       };
       let searchBar = shallow(<SearchBar {...props} />).instance();
 
@@ -99,7 +101,7 @@ describe('SearchBar', function() {
       let searchBar = shallow(<SearchBar orgId="123" projectId="456" />).instance();
       searchBar.state.dropdownVisible = true;
 
-      let clock = this.sandbox.useFakeTimers();
+      let clock = sandbox.useFakeTimers();
       searchBar.onQueryBlur();
       clock.tick(201); // doesn't close until 200ms
 
@@ -114,7 +116,7 @@ describe('SearchBar', function() {
         wrapper.setState({dropdownVisible: true});
 
         let instance = wrapper.instance();
-        this.sandbox.stub(instance, 'blur');
+        sandbox.stub(instance, 'blur');
 
         wrapper.find('input').simulate('keyup', {key: 'Escape', keyCode: '27'});
 
@@ -125,7 +127,7 @@ describe('SearchBar', function() {
 
   describe('render()', function() {
     it('invokes onSearch() when submitting the form', function() {
-      let stubbedOnSearch = this.sandbox.spy();
+      let stubbedOnSearch = sandbox.spy();
       let wrapper = mount(
         <SearchBar onSearch={stubbedOnSearch} orgId="123" projectId="456" />
       );
@@ -142,7 +144,7 @@ describe('SearchBar', function() {
         orgId: '123',
         projectId: '456',
         query: 'is:unresolved',
-        onSearch: this.sandbox.spy(),
+        onSearch: sandbox.spy(),
       };
       let wrapper = mount(<SearchBar {...props} />);
 
diff --git a/yarn.lock b/yarn.lock
index dac27f3a0a..e43a4e1599 100644
--- a/yarn.lock
+++ b/yarn.lock
@@ -314,10 +314,6 @@ amdefine@>=0.0.4:
   version "1.0.1"
   resolved "https://registry.yarnpkg.com/amdefine/-/amdefine-1.0.1.tgz#4a5282ac164729e93619bcfd3ad151f817ce91f5"
 
-ansi-escapes@^1.4.0:
-  version "1.4.0"
-  resolved "https://registry.yarnpkg.com/ansi-escapes/-/ansi-escapes-1.4.0.tgz#d3a8a83b319aa67793662b13e761c7911422306e"
-
 ansi-escapes@^3.0.0:
   version "3.0.0"
   resolved "https://registry.yarnpkg.com/ansi-escapes/-/ansi-escapes-3.0.0.tgz#ec3e8b4e9f8064fc02c3ac9b65f1c275bda8ef92"
@@ -338,7 +334,7 @@ ansi-styles@^2.2.1:
   version "2.2.1"
   resolved "https://registry.yarnpkg.com/ansi-styles/-/ansi-styles-2.2.1.tgz#b432dd3358b634cf75e1e4664368240533c1ddbe"
 
-ansi-styles@^3.0.0, ansi-styles@^3.1.0:
+ansi-styles@^3.1.0, ansi-styles@^3.2.0:
   version "3.2.0"
   resolved "https://registry.yarnpkg.com/ansi-styles/-/ansi-styles-3.2.0.tgz#c159b8d5be0f9e5a6f346dab94f16ce022161b88"
   dependencies:
@@ -471,6 +467,10 @@ ast-types@0.9.11:
   version "0.9.11"
   resolved "https://registry.yarnpkg.com/ast-types/-/ast-types-0.9.11.tgz#371177bb59232ff5ceaa1d09ee5cad705b1a5aa9"
 
+astral-regex@^1.0.0:
+  version "1.0.0"
+  resolved "https://registry.yarnpkg.com/astral-regex/-/astral-regex-1.0.0.tgz#6c8c3fb827dd43ee3918f27b82782ab7658a6fd9"
+
 async-each@^1.0.0:
   version "1.0.1"
   resolved "https://registry.yarnpkg.com/async-each/-/async-each-1.0.1.tgz#19d386a1d9edc6e7c1c85d388aedbcc56d33602d"
@@ -779,13 +779,12 @@ babel-helpers@^6.16.0, babel-helpers@^6.24.1:
     babel-runtime "^6.22.0"
     babel-template "^6.24.1"
 
-babel-jest@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/babel-jest/-/babel-jest-19.0.0.tgz#59323ced99a3a84d359da219ca881074ffc6ce3f"
+babel-jest@21.2.0, babel-jest@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/babel-jest/-/babel-jest-21.2.0.tgz#2ce059519a9374a2c46f2455b6fbef5ad75d863e"
   dependencies:
-    babel-core "^6.0.0"
     babel-plugin-istanbul "^4.0.0"
-    babel-preset-jest "^19.0.0"
+    babel-preset-jest "^21.2.0"
 
 babel-loader@^7.0.0, babel-loader@^7.1.2:
   version "7.1.2"
@@ -831,9 +830,9 @@ babel-plugin-istanbul@^4.0.0:
     istanbul-lib-instrument "^1.7.2"
     test-exclude "^4.1.1"
 
-babel-plugin-jest-hoist@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/babel-plugin-jest-hoist/-/babel-plugin-jest-hoist-19.0.0.tgz#4ae2a04ea612a6e73651f3fde52c178991304bea"
+babel-plugin-jest-hoist@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/babel-plugin-jest-hoist/-/babel-plugin-jest-hoist-21.2.0.tgz#2cef637259bd4b628a6cace039de5fcd14dbb006"
 
 babel-plugin-lodash@^3.2.11:
   version "3.2.11"
@@ -963,7 +962,7 @@ babel-plugin-syntax-jsx@^6.3.13, babel-plugin-syntax-jsx@^6.8.0:
   version "6.18.0"
   resolved "https://registry.yarnpkg.com/babel-plugin-syntax-jsx/-/babel-plugin-syntax-jsx-6.18.0.tgz#0af32a9a6e13ca7a3fd5069e62d7b0f58d0d8946"
 
-babel-plugin-syntax-object-rest-spread@^6.8.0:
+babel-plugin-syntax-object-rest-spread@^6.13.0, babel-plugin-syntax-object-rest-spread@^6.8.0:
   version "6.13.0"
   resolved "https://registry.yarnpkg.com/babel-plugin-syntax-object-rest-spread/-/babel-plugin-syntax-object-rest-spread-6.13.0.tgz#fd6536f2bce13836ffa3a5458c4903a597bb3bf5"
 
@@ -1465,11 +1464,12 @@ babel-preset-flow@^6.23.0:
   dependencies:
     babel-plugin-transform-flow-strip-types "^6.22.0"
 
-babel-preset-jest@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/babel-preset-jest/-/babel-preset-jest-19.0.0.tgz#22d67201d02324a195811288eb38294bb3cac396"
+babel-preset-jest@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/babel-preset-jest/-/babel-preset-jest-21.2.0.tgz#ff9d2bce08abd98e8a36d9a8a5189b9173b85638"
   dependencies:
-    babel-plugin-jest-hoist "^19.0.0"
+    babel-plugin-jest-hoist "^21.2.0"
+    babel-plugin-syntax-object-rest-spread "^6.13.0"
 
 babel-preset-latest@^6.16.0:
   version "6.24.1"
@@ -1867,12 +1867,6 @@ browserslist@^2.1.2, browserslist@^2.1.5:
     caniuse-lite "^1.0.30000704"
     electron-to-chromium "^1.3.16"
 
-bser@1.0.2:
-  version "1.0.2"
-  resolved "https://registry.yarnpkg.com/bser/-/bser-1.0.2.tgz#381116970b2a6deea5646dd15dd7278444b56169"
-  dependencies:
-    node-int64 "^0.4.0"
-
 bser@^2.0.0:
   version "2.0.0"
   resolved "https://registry.yarnpkg.com/bser/-/bser-2.0.0.tgz#9ac78d3ed5d915804fd87acb158bc797147a1719"
@@ -2301,6 +2295,10 @@ convert-source-map@^1.1.0, convert-source-map@^1.5.0:
   version "1.5.0"
   resolved "https://registry.yarnpkg.com/convert-source-map/-/convert-source-map-1.5.0.tgz#9acd70851c6d5dfdd93d9282e5edf94a03ff46b5"
 
+convert-source-map@^1.4.0:
+  version "1.5.1"
+  resolved "https://registry.yarnpkg.com/convert-source-map/-/convert-source-map-1.5.1.tgz#b8278097b9bc229365de5c62cf5fcaed8b5599e5"
+
 cookie-signature@1.0.6:
   version "1.0.6"
   resolved "https://registry.yarnpkg.com/cookie-signature/-/cookie-signature-1.0.6.tgz#e303a882b342cc3ee8ca513a79999734dab3ae2c"
@@ -2569,6 +2567,12 @@ debug@^2.1.1, debug@^2.2.0, debug@^2.6.3, debug@^2.6.8:
   dependencies:
     ms "2.0.0"
 
+debug@^3.1.0:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/debug/-/debug-3.1.0.tgz#5bb5a0672628b64149566ba16819e61518c67261"
+  dependencies:
+    ms "2.0.0"
+
 decamelize@^1.0.0, decamelize@^1.1.1, decamelize@^1.1.2:
   version "1.2.0"
   resolved "https://registry.yarnpkg.com/decamelize/-/decamelize-1.2.0.tgz#f6534d15148269b20352e7bee26f501f9a191290"
@@ -2668,11 +2672,19 @@ detect-indent@^4.0.0:
   dependencies:
     repeating "^2.0.0"
 
+detect-libc@^1.0.2:
+  version "1.0.3"
+  resolved "https://registry.yarnpkg.com/detect-libc/-/detect-libc-1.0.3.tgz#fa137c4bd698edf55cd5cd02ac559f91a4c4ba9b"
+
 detect-node@^2.0.3:
   version "2.0.3"
   resolved "https://registry.yarnpkg.com/detect-node/-/detect-node-2.0.3.tgz#a2033c09cc8e158d37748fbde7507832bd6ce127"
 
-diff@^3.0.0, diff@^3.3.0:
+diff@^3.2.0:
+  version "3.4.0"
+  resolved "https://registry.yarnpkg.com/diff/-/diff-3.4.0.tgz#b1d85507daf3964828de54b37d0d73ba67dda56c"
+
+diff@^3.3.0:
   version "3.3.0"
   resolved "https://registry.yarnpkg.com/diff/-/diff-3.3.0.tgz#056695150d7aa93237ca7e378ac3b1682b7963b9"
 
@@ -3215,6 +3227,17 @@ expand-range@^1.8.1:
   dependencies:
     fill-range "^2.1.0"
 
+expect@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/expect/-/expect-21.2.1.tgz#003ac2ac7005c3c29e73b38a272d4afadd6d1d7b"
+  dependencies:
+    ansi-styles "^3.2.0"
+    jest-diff "^21.2.1"
+    jest-get-type "^21.2.0"
+    jest-matcher-utils "^21.2.1"
+    jest-message-util "^21.2.1"
+    jest-regex-util "^21.2.0"
+
 express@^4.13.3, express@^4.15.3:
   version "4.15.3"
   resolved "https://registry.yarnpkg.com/express/-/express-4.15.3.tgz#bab65d0f03aa80c358408972fc700f916944b662"
@@ -3320,12 +3343,6 @@ faye-websocket@~0.11.0:
   dependencies:
     websocket-driver ">=0.5.1"
 
-fb-watchman@^1.8.0:
-  version "1.9.2"
-  resolved "https://registry.yarnpkg.com/fb-watchman/-/fb-watchman-1.9.2.tgz#a24cf47827f82d38fb59a69ad70b76e3b6ae7383"
-  dependencies:
-    bser "1.0.2"
-
 fb-watchman@^2.0.0:
   version "2.0.0"
   resolved "https://registry.yarnpkg.com/fb-watchman/-/fb-watchman-2.0.0.tgz#54e9abf7dfa2f26cd9b1636c588c1afc05de5d58"
@@ -3517,6 +3534,13 @@ fsevents@^1.0.0, fsevents@^1.1.2:
     nan "^2.3.0"
     node-pre-gyp "^0.6.36"
 
+fsevents@^1.1.1:
+  version "1.1.3"
+  resolved "https://registry.yarnpkg.com/fsevents/-/fsevents-1.1.3.tgz#11f82318f5fe7bb2cd22965a108e9306208216d8"
+  dependencies:
+    nan "^2.3.0"
+    node-pre-gyp "^0.6.39"
+
 fstream-ignore@^1.0.5:
   version "1.0.5"
   resolved "https://registry.yarnpkg.com/fstream-ignore/-/fstream-ignore-1.0.5.tgz#9c31dae34767018fe1d249b24dada67d092da105"
@@ -3788,7 +3812,7 @@ hasha@~2.2.0:
     is-stream "^1.0.1"
     pinkie-promise "^2.0.0"
 
-hawk@~3.1.3:
+hawk@3.1.3, hawk@~3.1.3:
   version "3.1.3"
   resolved "https://registry.yarnpkg.com/hawk/-/hawk-3.1.3.tgz#078444bd7c1640b0fe540d2c9b73d59678e8e1c4"
   dependencies:
@@ -4131,7 +4155,7 @@ is-callable@^1.1.1, is-callable@^1.1.3:
   version "1.1.3"
   resolved "https://registry.yarnpkg.com/is-callable/-/is-callable-1.1.3.tgz#86eb75392805ddc33af71c92a0eedf74ee7604b2"
 
-is-ci@^1.0.9:
+is-ci@^1.0.10:
   version "1.0.10"
   resolved "https://registry.yarnpkg.com/is-ci/-/is-ci-1.0.10.tgz#f739336b2632365061a9d48270cd56ae3369318e"
   dependencies:
@@ -4361,33 +4385,45 @@ isstream@~0.1.2:
   version "0.1.2"
   resolved "https://registry.yarnpkg.com/isstream/-/isstream-0.1.2.tgz#47e63f7af55afa6f92e1500e690eb8b8529c099a"
 
-istanbul-api@^1.1.0-alpha.1:
-  version "1.1.11"
-  resolved "https://registry.yarnpkg.com/istanbul-api/-/istanbul-api-1.1.11.tgz#fcc0b461e2b3bda71e305155138238768257d9de"
+istanbul-api@^1.1.1:
+  version "1.2.1"
+  resolved "https://registry.yarnpkg.com/istanbul-api/-/istanbul-api-1.2.1.tgz#0c60a0515eb11c7d65c6b50bba2c6e999acd8620"
   dependencies:
     async "^2.1.4"
     fileset "^2.0.2"
     istanbul-lib-coverage "^1.1.1"
-    istanbul-lib-hook "^1.0.7"
-    istanbul-lib-instrument "^1.7.4"
-    istanbul-lib-report "^1.1.1"
-    istanbul-lib-source-maps "^1.2.1"
-    istanbul-reports "^1.1.1"
+    istanbul-lib-hook "^1.1.0"
+    istanbul-lib-instrument "^1.9.1"
+    istanbul-lib-report "^1.1.2"
+    istanbul-lib-source-maps "^1.2.2"
+    istanbul-reports "^1.1.3"
     js-yaml "^3.7.0"
     mkdirp "^0.5.1"
     once "^1.4.0"
 
-istanbul-lib-coverage@^1.0.0, istanbul-lib-coverage@^1.1.1:
+istanbul-lib-coverage@^1.0.1, istanbul-lib-coverage@^1.1.1:
   version "1.1.1"
   resolved "https://registry.yarnpkg.com/istanbul-lib-coverage/-/istanbul-lib-coverage-1.1.1.tgz#73bfb998885299415c93d38a3e9adf784a77a9da"
 
-istanbul-lib-hook@^1.0.7:
-  version "1.0.7"
-  resolved "https://registry.yarnpkg.com/istanbul-lib-hook/-/istanbul-lib-hook-1.0.7.tgz#dd6607f03076578fe7d6f2a630cf143b49bacddc"
+istanbul-lib-hook@^1.1.0:
+  version "1.1.0"
+  resolved "https://registry.yarnpkg.com/istanbul-lib-hook/-/istanbul-lib-hook-1.1.0.tgz#8538d970372cb3716d53e55523dd54b557a8d89b"
   dependencies:
     append-transform "^0.4.0"
 
-istanbul-lib-instrument@^1.1.1, istanbul-lib-instrument@^1.7.2, istanbul-lib-instrument@^1.7.4:
+istanbul-lib-instrument@^1.4.2, istanbul-lib-instrument@^1.9.1:
+  version "1.9.1"
+  resolved "https://registry.yarnpkg.com/istanbul-lib-instrument/-/istanbul-lib-instrument-1.9.1.tgz#250b30b3531e5d3251299fdd64b0b2c9db6b558e"
+  dependencies:
+    babel-generator "^6.18.0"
+    babel-template "^6.16.0"
+    babel-traverse "^6.18.0"
+    babel-types "^6.18.0"
+    babylon "^6.18.0"
+    istanbul-lib-coverage "^1.1.1"
+    semver "^5.3.0"
+
+istanbul-lib-instrument@^1.7.2:
   version "1.7.4"
   resolved "https://registry.yarnpkg.com/istanbul-lib-instrument/-/istanbul-lib-instrument-1.7.4.tgz#e9fd920e4767f3d19edc765e2d6b3f5ccbd0eea8"
   dependencies:
@@ -4399,28 +4435,28 @@ istanbul-lib-instrument@^1.1.1, istanbul-lib-instrument@^1.7.2, istanbul-lib-ins
     istanbul-lib-coverage "^1.1.1"
     semver "^5.3.0"
 
-istanbul-lib-report@^1.1.1:
-  version "1.1.1"
-  resolved "https://registry.yarnpkg.com/istanbul-lib-report/-/istanbul-lib-report-1.1.1.tgz#f0e55f56655ffa34222080b7a0cd4760e1405fc9"
+istanbul-lib-report@^1.1.2:
+  version "1.1.2"
+  resolved "https://registry.yarnpkg.com/istanbul-lib-report/-/istanbul-lib-report-1.1.2.tgz#922be27c13b9511b979bd1587359f69798c1d425"
   dependencies:
     istanbul-lib-coverage "^1.1.1"
     mkdirp "^0.5.1"
     path-parse "^1.0.5"
     supports-color "^3.1.2"
 
-istanbul-lib-source-maps@^1.2.1:
-  version "1.2.1"
-  resolved "https://registry.yarnpkg.com/istanbul-lib-source-maps/-/istanbul-lib-source-maps-1.2.1.tgz#a6fe1acba8ce08eebc638e572e294d267008aa0c"
+istanbul-lib-source-maps@^1.1.0, istanbul-lib-source-maps@^1.2.2:
+  version "1.2.2"
+  resolved "https://registry.yarnpkg.com/istanbul-lib-source-maps/-/istanbul-lib-source-maps-1.2.2.tgz#750578602435f28a0c04ee6d7d9e0f2960e62c1c"
   dependencies:
-    debug "^2.6.3"
+    debug "^3.1.0"
     istanbul-lib-coverage "^1.1.1"
     mkdirp "^0.5.1"
     rimraf "^2.6.1"
     source-map "^0.5.3"
 
-istanbul-reports@^1.1.1:
-  version "1.1.1"
-  resolved "https://registry.yarnpkg.com/istanbul-reports/-/istanbul-reports-1.1.1.tgz#042be5c89e175bc3f86523caab29c014e77fee4e"
+istanbul-reports@^1.1.3:
+  version "1.1.3"
+  resolved "https://registry.yarnpkg.com/istanbul-reports/-/istanbul-reports-1.1.3.tgz#3b9e1e8defb6d18b1d425da8e8b32c5a163f2d10"
   dependencies:
     handlebars "^4.0.3"
 
@@ -4428,207 +4464,230 @@ jed@^1.1.0:
   version "1.1.1"
   resolved "https://registry.yarnpkg.com/jed/-/jed-1.1.1.tgz#7a549bbd9ffe1585b0cd0a191e203055bee574b4"
 
-jest-changed-files@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-changed-files/-/jest-changed-files-19.0.2.tgz#16c54c84c3270be408e06d2e8af3f3e37a885824"
+jest-changed-files@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/jest-changed-files/-/jest-changed-files-21.2.0.tgz#5dbeecad42f5d88b482334902ce1cba6d9798d29"
+  dependencies:
+    throat "^4.0.0"
 
-jest-cli@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-cli/-/jest-cli-19.0.2.tgz#cc3620b62acac5f2d93a548cb6ef697d4ec85443"
+jest-cli@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-cli/-/jest-cli-21.2.1.tgz#9c528b6629d651911138d228bdb033c157ec8c00"
   dependencies:
-    ansi-escapes "^1.4.0"
-    callsites "^2.0.0"
-    chalk "^1.1.1"
-    graceful-fs "^4.1.6"
-    is-ci "^1.0.9"
-    istanbul-api "^1.1.0-alpha.1"
-    istanbul-lib-coverage "^1.0.0"
-    istanbul-lib-instrument "^1.1.1"
-    jest-changed-files "^19.0.2"
-    jest-config "^19.0.2"
-    jest-environment-jsdom "^19.0.2"
-    jest-haste-map "^19.0.0"
-    jest-jasmine2 "^19.0.2"
-    jest-message-util "^19.0.0"
-    jest-regex-util "^19.0.0"
-    jest-resolve-dependencies "^19.0.0"
-    jest-runtime "^19.0.2"
-    jest-snapshot "^19.0.2"
-    jest-util "^19.0.2"
+    ansi-escapes "^3.0.0"
+    chalk "^2.0.1"
+    glob "^7.1.2"
+    graceful-fs "^4.1.11"
+    is-ci "^1.0.10"
+    istanbul-api "^1.1.1"
+    istanbul-lib-coverage "^1.0.1"
+    istanbul-lib-instrument "^1.4.2"
+    istanbul-lib-source-maps "^1.1.0"
+    jest-changed-files "^21.2.0"
+    jest-config "^21.2.1"
+    jest-environment-jsdom "^21.2.1"
+    jest-haste-map "^21.2.0"
+    jest-message-util "^21.2.1"
+    jest-regex-util "^21.2.0"
+    jest-resolve-dependencies "^21.2.0"
+    jest-runner "^21.2.1"
+    jest-runtime "^21.2.1"
+    jest-snapshot "^21.2.1"
+    jest-util "^21.2.1"
     micromatch "^2.3.11"
-    node-notifier "^5.0.1"
+    node-notifier "^5.0.2"
+    pify "^3.0.0"
     slash "^1.0.0"
-    string-length "^1.0.1"
-    throat "^3.0.0"
-    which "^1.1.1"
+    string-length "^2.0.0"
+    strip-ansi "^4.0.0"
+    which "^1.2.12"
     worker-farm "^1.3.1"
-    yargs "^6.3.0"
+    yargs "^9.0.0"
 
-jest-config@^19.0.2:
-  version "19.0.4"
-  resolved "https://registry.yarnpkg.com/jest-config/-/jest-config-19.0.4.tgz#42980211d46417e91ca7abffd086c270234f73fd"
+jest-config@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-config/-/jest-config-21.2.1.tgz#c7586c79ead0bcc1f38c401e55f964f13bf2a480"
   dependencies:
-    chalk "^1.1.1"
-    jest-environment-jsdom "^19.0.2"
-    jest-environment-node "^19.0.2"
-    jest-jasmine2 "^19.0.2"
-    jest-regex-util "^19.0.0"
-    jest-resolve "^19.0.2"
-    jest-validate "^19.0.2"
-    pretty-format "^19.0.0"
-
-jest-diff@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/jest-diff/-/jest-diff-19.0.0.tgz#d1563cfc56c8b60232988fbc05d4d16ed90f063c"
+    chalk "^2.0.1"
+    glob "^7.1.1"
+    jest-environment-jsdom "^21.2.1"
+    jest-environment-node "^21.2.1"
+    jest-get-type "^21.2.0"
+    jest-jasmine2 "^21.2.1"
+    jest-regex-util "^21.2.0"
+    jest-resolve "^21.2.0"
+    jest-util "^21.2.1"
+    jest-validate "^21.2.1"
+    pretty-format "^21.2.1"
+
+jest-diff@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-diff/-/jest-diff-21.2.1.tgz#46cccb6cab2d02ce98bc314011764bb95b065b4f"
   dependencies:
-    chalk "^1.1.3"
-    diff "^3.0.0"
-    jest-matcher-utils "^19.0.0"
-    pretty-format "^19.0.0"
+    chalk "^2.0.1"
+    diff "^3.2.0"
+    jest-get-type "^21.2.0"
+    pretty-format "^21.2.1"
+
+jest-docblock@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/jest-docblock/-/jest-docblock-21.2.0.tgz#51529c3b30d5fd159da60c27ceedc195faf8d414"
 
-jest-environment-jsdom@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-environment-jsdom/-/jest-environment-jsdom-19.0.2.tgz#ceda859c4a4b94ab35e4de7dab54b926f293e4a3"
+jest-environment-jsdom@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-environment-jsdom/-/jest-environment-jsdom-21.2.1.tgz#38d9980c8259b2a608ec232deee6289a60d9d5b4"
   dependencies:
-    jest-mock "^19.0.0"
-    jest-util "^19.0.2"
-    jsdom "^9.11.0"
+    jest-mock "^21.2.0"
+    jest-util "^21.2.1"
+    jsdom "^9.12.0"
 
-jest-environment-node@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-environment-node/-/jest-environment-node-19.0.2.tgz#6e84079db87ed21d0c05e1f9669f207b116fe99b"
+jest-environment-node@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-environment-node/-/jest-environment-node-21.2.1.tgz#98c67df5663c7fbe20f6e792ac2272c740d3b8c8"
   dependencies:
-    jest-mock "^19.0.0"
-    jest-util "^19.0.2"
+    jest-mock "^21.2.0"
+    jest-util "^21.2.1"
 
-jest-file-exists@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/jest-file-exists/-/jest-file-exists-19.0.0.tgz#cca2e587a11ec92e24cfeab3f8a94d657f3fceb8"
+jest-get-type@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/jest-get-type/-/jest-get-type-21.2.0.tgz#f6376ab9db4b60d81e39f30749c6c466f40d4a23"
 
-jest-haste-map@^19.0.0:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-haste-map/-/jest-haste-map-19.0.2.tgz#286484c3a16e86da7872b0877c35dce30c3d6f07"
+jest-haste-map@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/jest-haste-map/-/jest-haste-map-21.2.0.tgz#1363f0a8bb4338f24f001806571eff7a4b2ff3d8"
   dependencies:
     fb-watchman "^2.0.0"
-    graceful-fs "^4.1.6"
+    graceful-fs "^4.1.11"
+    jest-docblock "^21.2.0"
     micromatch "^2.3.11"
-    sane "~1.5.0"
+    sane "^2.0.0"
     worker-farm "^1.3.1"
 
-jest-jasmine2@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-jasmine2/-/jest-jasmine2-19.0.2.tgz#167991ac825981fb1a800af126e83afcca832c73"
+jest-jasmine2@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-jasmine2/-/jest-jasmine2-21.2.1.tgz#9cc6fc108accfa97efebce10c4308548a4ea7592"
   dependencies:
-    graceful-fs "^4.1.6"
-    jest-matcher-utils "^19.0.0"
-    jest-matchers "^19.0.0"
-    jest-message-util "^19.0.0"
-    jest-snapshot "^19.0.2"
-
-jest-matcher-utils@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/jest-matcher-utils/-/jest-matcher-utils-19.0.0.tgz#5ecd9b63565d2b001f61fbf7ec4c7f537964564d"
-  dependencies:
-    chalk "^1.1.3"
-    pretty-format "^19.0.0"
+    chalk "^2.0.1"
+    expect "^21.2.1"
+    graceful-fs "^4.1.11"
+    jest-diff "^21.2.1"
+    jest-matcher-utils "^21.2.1"
+    jest-message-util "^21.2.1"
+    jest-snapshot "^21.2.1"
+    p-cancelable "^0.3.0"
 
-jest-matchers@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/jest-matchers/-/jest-matchers-19.0.0.tgz#c74ecc6ebfec06f384767ba4d6fa4a42d6755754"
+jest-matcher-utils@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-matcher-utils/-/jest-matcher-utils-21.2.1.tgz#72c826eaba41a093ac2b4565f865eb8475de0f64"
   dependencies:
-    jest-diff "^19.0.0"
-    jest-matcher-utils "^19.0.0"
-    jest-message-util "^19.0.0"
-    jest-regex-util "^19.0.0"
+    chalk "^2.0.1"
+    jest-get-type "^21.2.0"
+    pretty-format "^21.2.1"
 
-jest-message-util@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/jest-message-util/-/jest-message-util-19.0.0.tgz#721796b89c0e4d761606f9ba8cb828a3b6246416"
+jest-message-util@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-message-util/-/jest-message-util-21.2.1.tgz#bfe5d4692c84c827d1dcf41823795558f0a1acbe"
   dependencies:
-    chalk "^1.1.1"
+    chalk "^2.0.1"
     micromatch "^2.3.11"
+    slash "^1.0.0"
 
-jest-mock@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/jest-mock/-/jest-mock-19.0.0.tgz#67038641e9607ab2ce08ec4a8cb83aabbc899d01"
+jest-mock@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/jest-mock/-/jest-mock-21.2.0.tgz#7eb0770e7317968165f61ea2a7281131534b3c0f"
 
-jest-regex-util@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/jest-regex-util/-/jest-regex-util-19.0.0.tgz#b7754587112aede1456510bb1f6afe74ef598691"
+jest-regex-util@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/jest-regex-util/-/jest-regex-util-21.2.0.tgz#1b1e33e63143babc3e0f2e6c9b5ba1eb34b2d530"
 
-jest-resolve-dependencies@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/jest-resolve-dependencies/-/jest-resolve-dependencies-19.0.0.tgz#a741ad1fa094140e64ecf2642a504f834ece22ee"
+jest-resolve-dependencies@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/jest-resolve-dependencies/-/jest-resolve-dependencies-21.2.0.tgz#9e231e371e1a736a1ad4e4b9a843bc72bfe03d09"
   dependencies:
-    jest-file-exists "^19.0.0"
+    jest-regex-util "^21.2.0"
 
-jest-resolve@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-resolve/-/jest-resolve-19.0.2.tgz#5793575de4f07aec32f7d7ff0c6c181963eefb3c"
+jest-resolve@^21.2.0:
+  version "21.2.0"
+  resolved "https://registry.yarnpkg.com/jest-resolve/-/jest-resolve-21.2.0.tgz#068913ad2ba6a20218e5fd32471f3874005de3a6"
   dependencies:
     browser-resolve "^1.11.2"
-    jest-haste-map "^19.0.0"
-    resolve "^1.2.0"
+    chalk "^2.0.1"
+    is-builtin-module "^1.0.0"
+
+jest-runner@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-runner/-/jest-runner-21.2.1.tgz#194732e3e518bfb3d7cbfc0fd5871246c7e1a467"
+  dependencies:
+    jest-config "^21.2.1"
+    jest-docblock "^21.2.0"
+    jest-haste-map "^21.2.0"
+    jest-jasmine2 "^21.2.1"
+    jest-message-util "^21.2.1"
+    jest-runtime "^21.2.1"
+    jest-util "^21.2.1"
+    pify "^3.0.0"
+    throat "^4.0.0"
+    worker-farm "^1.3.1"
 
-jest-runtime@^19.0.2:
-  version "19.0.4"
-  resolved "https://registry.yarnpkg.com/jest-runtime/-/jest-runtime-19.0.4.tgz#f167d9f1347752f2027361067926485349fcc245"
+jest-runtime@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-runtime/-/jest-runtime-21.2.1.tgz#99dce15309c670442eee2ebe1ff53a3cbdbbb73e"
   dependencies:
     babel-core "^6.0.0"
-    babel-jest "^19.0.0"
+    babel-jest "^21.2.0"
     babel-plugin-istanbul "^4.0.0"
-    chalk "^1.1.3"
-    graceful-fs "^4.1.6"
-    jest-config "^19.0.2"
-    jest-file-exists "^19.0.0"
-    jest-haste-map "^19.0.0"
-    jest-regex-util "^19.0.0"
-    jest-resolve "^19.0.2"
-    jest-util "^19.0.2"
+    chalk "^2.0.1"
+    convert-source-map "^1.4.0"
+    graceful-fs "^4.1.11"
+    jest-config "^21.2.1"
+    jest-haste-map "^21.2.0"
+    jest-regex-util "^21.2.0"
+    jest-resolve "^21.2.0"
+    jest-util "^21.2.1"
     json-stable-stringify "^1.0.1"
     micromatch "^2.3.11"
+    slash "^1.0.0"
     strip-bom "3.0.0"
-    yargs "^6.3.0"
+    write-file-atomic "^2.1.0"
+    yargs "^9.0.0"
 
-jest-snapshot@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-snapshot/-/jest-snapshot-19.0.2.tgz#9c1b216214f7187c38bfd5c70b1efab16b0ff50b"
+jest-snapshot@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-snapshot/-/jest-snapshot-21.2.1.tgz#29e49f16202416e47343e757e5eff948c07fd7b0"
   dependencies:
-    chalk "^1.1.3"
-    jest-diff "^19.0.0"
-    jest-file-exists "^19.0.0"
-    jest-matcher-utils "^19.0.0"
-    jest-util "^19.0.2"
+    chalk "^2.0.1"
+    jest-diff "^21.2.1"
+    jest-matcher-utils "^21.2.1"
+    mkdirp "^0.5.1"
     natural-compare "^1.4.0"
-    pretty-format "^19.0.0"
+    pretty-format "^21.2.1"
 
-jest-util@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-util/-/jest-util-19.0.2.tgz#e0a0232a2ab9e6b2b53668bdb3534c2b5977ed41"
+jest-util@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-util/-/jest-util-21.2.1.tgz#a274b2f726b0897494d694a6c3d6a61ab819bb78"
   dependencies:
-    chalk "^1.1.1"
-    graceful-fs "^4.1.6"
-    jest-file-exists "^19.0.0"
-    jest-message-util "^19.0.0"
-    jest-mock "^19.0.0"
-    jest-validate "^19.0.2"
-    leven "^2.0.0"
+    callsites "^2.0.0"
+    chalk "^2.0.1"
+    graceful-fs "^4.1.11"
+    jest-message-util "^21.2.1"
+    jest-mock "^21.2.0"
+    jest-validate "^21.2.1"
     mkdirp "^0.5.1"
 
-jest-validate@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest-validate/-/jest-validate-19.0.2.tgz#dc534df5f1278d5b63df32b14241d4dbf7244c0c"
+jest-validate@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest-validate/-/jest-validate-21.2.1.tgz#cc0cbca653cd54937ba4f2a111796774530dd3c7"
   dependencies:
-    chalk "^1.1.1"
-    jest-matcher-utils "^19.0.0"
-    leven "^2.0.0"
-    pretty-format "^19.0.0"
+    chalk "^2.0.1"
+    jest-get-type "^21.2.0"
+    leven "^2.1.0"
+    pretty-format "^21.2.1"
 
-jest@^19.0.2:
-  version "19.0.2"
-  resolved "https://registry.yarnpkg.com/jest/-/jest-19.0.2.tgz#b794faaf8ff461e7388f28beef559a54f20b2c10"
+jest@21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/jest/-/jest-21.2.1.tgz#c964e0b47383768a1438e3ccf3c3d470327604e1"
   dependencies:
-    jest-cli "^19.0.2"
+    jest-cli "^21.2.1"
 
 jquery@2.1.4:
   version "2.1.4"
@@ -4675,7 +4734,7 @@ jschardet@^1.4.2:
   version "1.6.0"
   resolved "https://registry.yarnpkg.com/jschardet/-/jschardet-1.6.0.tgz#c7d1a71edcff2839db2f9ec30fc5d5ebd3c1a678"
 
-jsdom@^9.11.0, jsdom@^9.12.0:
+jsdom@^9.12.0:
   version "9.12.0"
   resolved "https://registry.yarnpkg.com/jsdom/-/jsdom-9.12.0.tgz#e8c546fffcb06c00d4833ca84410fed7f8a097d4"
   dependencies:
@@ -4831,7 +4890,7 @@ less@2.5.3:
     request "^2.51.0"
     source-map "^0.4.2"
 
-leven@^2.0.0:
+leven@^2.1.0:
   version "2.1.0"
   resolved "https://registry.yarnpkg.com/leven/-/leven-2.1.0.tgz#c2e7a9f772094dee9d34202ae8acce4687875580"
 
@@ -5443,7 +5502,7 @@ node-libs-browser@^2.0.0:
     util "^0.10.3"
     vm-browserify "0.0.4"
 
-node-notifier@^5.0.1:
+node-notifier@^5.0.2:
   version "5.1.2"
   resolved "https://registry.yarnpkg.com/node-notifier/-/node-notifier-5.1.2.tgz#2fa9e12605fa10009d44549d6fcd8a63dde0e4ff"
   dependencies:
@@ -5466,6 +5525,22 @@ node-pre-gyp@^0.6.36:
     tar "^2.2.1"
     tar-pack "^3.4.0"
 
+node-pre-gyp@^0.6.39:
+  version "0.6.39"
+  resolved "https://registry.yarnpkg.com/node-pre-gyp/-/node-pre-gyp-0.6.39.tgz#c00e96860b23c0e1420ac7befc5044e1d78d8649"
+  dependencies:
+    detect-libc "^1.0.2"
+    hawk "3.1.3"
+    mkdirp "^0.5.1"
+    nopt "^4.0.1"
+    npmlog "^4.0.2"
+    rc "^1.1.7"
+    request "2.81.0"
+    rimraf "^2.6.1"
+    semver "^5.3.0"
+    tar "^2.2.1"
+    tar-pack "^3.4.0"
+
 nopt@^4.0.1:
   version "4.0.1"
   resolved "https://registry.yarnpkg.com/nopt/-/nopt-4.0.1.tgz#d0d4685afd5415193c8c7505602d0d17cd64474d"
@@ -5691,6 +5766,10 @@ osenv@^0.1.4:
     os-homedir "^1.0.0"
     os-tmpdir "^1.0.0"
 
+p-cancelable@^0.3.0:
+  version "0.3.0"
+  resolved "https://registry.yarnpkg.com/p-cancelable/-/p-cancelable-0.3.0.tgz#b9e123800bcebb7ac13a479be195b507b98d30fa"
+
 p-finally@^1.0.0:
   version "1.0.0"
   resolved "https://registry.yarnpkg.com/p-finally/-/p-finally-1.0.0.tgz#3fbcfb15b899a44123b34b6dcc18b724336a2cae"
@@ -6202,11 +6281,12 @@ prettier@1.7.4:
   version "1.7.4"
   resolved "https://registry.yarnpkg.com/prettier/-/prettier-1.7.4.tgz#5e8624ae9363c80f95ec644584ecdf55d74f93fa"
 
-pretty-format@^19.0.0:
-  version "19.0.0"
-  resolved "https://registry.yarnpkg.com/pretty-format/-/pretty-format-19.0.0.tgz#56530d32acb98a3fa4851c4e2b9d37b420684c84"
+pretty-format@^21.2.1:
+  version "21.2.1"
+  resolved "https://registry.yarnpkg.com/pretty-format/-/pretty-format-21.2.1.tgz#ae5407f3cf21066cd011aa1ba5fce7b6a2eddb36"
   dependencies:
-    ansi-styles "^3.0.0"
+    ansi-regex "^3.0.0"
+    ansi-styles "^3.2.0"
 
 private@^0.1.6, private@^0.1.7, private@~0.1.5:
   version "0.1.7"
@@ -6940,7 +7020,7 @@ request-promise@^4.1.1:
     stealthy-require "^1.1.0"
     tough-cookie ">=2.3.0"
 
-request@^2.40.0, request@^2.51.0, request@^2.79.0, request@^2.81.0:
+request@2.81.0, request@^2.40.0, request@^2.51.0, request@^2.79.0, request@^2.81.0:
   version "2.81.0"
   resolved "https://registry.yarnpkg.com/request/-/request-2.81.0.tgz#c6928946a0e06c5f8d6f8a9333469ffda46298a0"
   dependencies:
@@ -7087,17 +7167,19 @@ samsam@1.1.2, samsam@~1.1:
   version "1.1.2"
   resolved "https://registry.yarnpkg.com/samsam/-/samsam-1.1.2.tgz#bec11fdc83a9fda063401210e40176c3024d1567"
 
-sane@~1.5.0:
-  version "1.5.0"
-  resolved "https://registry.yarnpkg.com/sane/-/sane-1.5.0.tgz#a4adeae764d048621ecb27d5f9ecf513101939f3"
+sane@^2.0.0:
+  version "2.2.0"
+  resolved "https://registry.yarnpkg.com/sane/-/sane-2.2.0.tgz#d6d2e2fcab00e3d283c93b912b7c3a20846f1d56"
   dependencies:
     anymatch "^1.3.0"
     exec-sh "^0.2.0"
-    fb-watchman "^1.8.0"
+    fb-watchman "^2.0.0"
     minimatch "^3.0.2"
     minimist "^1.1.1"
     walker "~1.0.5"
-    watch "~0.10.0"
+    watch "~0.18.0"
+  optionalDependencies:
+    fsevents "^1.1.1"
 
 sax@^1.2.1, sax@~1.2.1:
   version "1.2.4"
@@ -7430,11 +7512,12 @@ strict-uri-encode@^1.0.0:
   version "1.1.0"
   resolved "https://registry.yarnpkg.com/strict-uri-encode/-/strict-uri-encode-1.1.0.tgz#279b225df1d582b1f54e65addd4352e18faa0713"
 
-string-length@^1.0.1:
-  version "1.0.1"
-  resolved "https://registry.yarnpkg.com/string-length/-/string-length-1.0.1.tgz#56970fb1c38558e9e70b728bf3de269ac45adfac"
+string-length@^2.0.0:
+  version "2.0.0"
+  resolved "https://registry.yarnpkg.com/string-length/-/string-length-2.0.0.tgz#d40dbb686a3ace960c1cffca562bf2c45f8363ed"
   dependencies:
-    strip-ansi "^3.0.0"
+    astral-regex "^1.0.0"
+    strip-ansi "^4.0.0"
 
 string-width@^1.0.1, string-width@^1.0.2:
   version "1.0.2"
@@ -7633,9 +7716,9 @@ text-table@~0.2.0:
   version "0.2.0"
   resolved "https://registry.yarnpkg.com/text-table/-/text-table-0.2.0.tgz#7f5ee823ae805207c00af2df4a84ec3fcfa570b4"
 
-throat@^3.0.0:
-  version "3.2.0"
-  resolved "https://registry.yarnpkg.com/throat/-/throat-3.2.0.tgz#50cb0670edbc40237b9e347d7e1f88e4620af836"
+throat@^4.0.0:
+  version "4.1.0"
+  resolved "https://registry.yarnpkg.com/throat/-/throat-4.1.0.tgz#89037cbc92c56ab18926e6ba4cbb200e15672a6a"
 
 throttleit@^1.0.0:
   version "1.0.0"
@@ -7955,9 +8038,12 @@ warning@^3.0.0:
   dependencies:
     loose-envify "^1.0.0"
 
-watch@~0.10.0:
-  version "0.10.0"
-  resolved "https://registry.yarnpkg.com/watch/-/watch-0.10.0.tgz#77798b2da0f9910d595f1ace5b0c2258521f21dc"
+watch@~0.18.0:
+  version "0.18.0"
+  resolved "https://registry.yarnpkg.com/watch/-/watch-0.18.0.tgz#28095476c6df7c90c963138990c0a5423eb4b986"
+  dependencies:
+    exec-sh "^0.2.0"
+    minimist "^1.2.0"
 
 watchpack@^1.4.0:
   version "1.4.0"
@@ -8106,7 +8192,7 @@ which-module@^2.0.0:
   version "2.0.0"
   resolved "https://registry.yarnpkg.com/which-module/-/which-module-2.0.0.tgz#d9ef07dce77b9902b8a3a8fa4b31c3e3f7e6e87a"
 
-which@^1.1.1, which@^1.2.12, which@^1.2.9, which@~1.2.10:
+which@^1.2.12, which@^1.2.9, which@~1.2.10:
   version "1.2.14"
   resolved "https://registry.yarnpkg.com/which/-/which-1.2.14.tgz#9a87c4378f03e827cecaf1acdf56c736c01c14e5"
   dependencies:
@@ -8156,6 +8242,14 @@ write-file-atomic@^2.0.0:
     imurmurhash "^0.1.4"
     slide "^1.1.5"
 
+write-file-atomic@^2.1.0:
+  version "2.3.0"
+  resolved "https://registry.yarnpkg.com/write-file-atomic/-/write-file-atomic-2.3.0.tgz#1ff61575c2e2a4e8e510d6fa4e243cce183999ab"
+  dependencies:
+    graceful-fs "^4.1.11"
+    imurmurhash "^0.1.4"
+    signal-exit "^3.0.2"
+
 write@^0.2.1:
   version "0.2.1"
   resolved "https://registry.yarnpkg.com/write/-/write-0.2.1.tgz#5fc03828e264cea3fe91455476f7a3c566cb0757"
@@ -8200,7 +8294,7 @@ yargs-parser@^7.0.0:
   dependencies:
     camelcase "^4.1.0"
 
-yargs@^6.3.0, yargs@^6.6.0:
+yargs@^6.6.0:
   version "6.6.0"
   resolved "https://registry.yarnpkg.com/yargs/-/yargs-6.6.0.tgz#782ec21ef403345f830a808ca3d513af56065208"
   dependencies:
@@ -8254,6 +8348,24 @@ yargs@^8.0.2:
     y18n "^3.2.1"
     yargs-parser "^7.0.0"
 
+yargs@^9.0.0:
+  version "9.0.1"
+  resolved "https://registry.yarnpkg.com/yargs/-/yargs-9.0.1.tgz#52acc23feecac34042078ee78c0c007f5085db4c"
+  dependencies:
+    camelcase "^4.1.0"
+    cliui "^3.2.0"
+    decamelize "^1.1.1"
+    get-caller-file "^1.0.1"
+    os-locale "^2.0.0"
+    read-pkg-up "^2.0.0"
+    require-directory "^2.1.1"
+    require-main-filename "^1.0.1"
+    set-blocking "^2.0.0"
+    string-width "^2.0.0"
+    which-module "^2.0.0"
+    y18n "^3.2.1"
+    yargs-parser "^7.0.0"
+
 yargs@~3.10.0:
   version "3.10.0"
   resolved "https://registry.yarnpkg.com/yargs/-/yargs-3.10.0.tgz#f7ee7bd857dd7c1d2d38c0e74efbd681d1431fd1"
