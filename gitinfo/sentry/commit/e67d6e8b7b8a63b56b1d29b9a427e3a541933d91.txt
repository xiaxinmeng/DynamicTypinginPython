commit e67d6e8b7b8a63b56b1d29b9a427e3a541933d91
Author: Stephen Cefali <scefali@sentry.io>
Date:   Fri Jan 24 10:53:00 2020 -0800

    Feat/legacy integration analytics (#16613)

diff --git a/src/sentry/static/sentry/app/plugins/components/settings.jsx b/src/sentry/static/sentry/app/plugins/components/settings.jsx
index f7560a2af9..d091917f93 100644
--- a/src/sentry/static/sentry/app/plugins/components/settings.jsx
+++ b/src/sentry/static/sentry/app/plugins/components/settings.jsx
@@ -8,6 +8,7 @@ import {parseRepo} from 'app/utils';
 import {t, tct} from 'app/locale';
 import LoadingIndicator from 'app/components/loadingIndicator';
 import PluginComponentBase from 'app/components/bases/pluginComponentBase';
+import {trackIntegrationEvent} from 'app/utils/integrationUtil';
 
 class PluginSettings extends PluginComponentBase {
   constructor(props, context) {
@@ -64,6 +65,16 @@ class PluginSettings extends PluginComponentBase {
           initialData,
           errors: {},
         });
+        trackIntegrationEvent(
+          {
+            eventKey: 'integrations.config_saved',
+            eventName: 'Integrations: Config Saved',
+            integration: this.props.plugin.id,
+            view: 'plugin_details',
+            project_id: this.props.project.id,
+          },
+          this.props.organization
+        );
       }),
       error: this.onSaveError.bind(this, error => {
         this.setState({
diff --git a/src/sentry/static/sentry/app/utils/integrationUtil.tsx b/src/sentry/static/sentry/app/utils/integrationUtil.tsx
index d67c4af57d..9dc9a520c1 100644
--- a/src/sentry/static/sentry/app/utils/integrationUtil.tsx
+++ b/src/sentry/static/sentry/app/utils/integrationUtil.tsx
@@ -31,13 +31,19 @@ type OtherSingleIntegrationEvents = {
     | 'integrations.installation_complete'
     | 'integrations.details_viewed'
     | 'integrations.uninstall_clicked'
-    | 'integrations.uninstall_completed';
+    | 'integrations.uninstall_completed'
+    | 'integrations.enabled'
+    | 'integrations.disabled'
+    | 'integrations.config_saved';
   eventName:
     | 'Integrations: Installation Start'
     | 'Integrations: Installation Complete'
     | 'Integrations: Details Viewed'
     | 'Integrations: Uninstall Clicked'
-    | 'Integrations: Uninstall Completed';
+    | 'Integrations: Uninstall Completed'
+    | 'Integrations: Enabled'
+    | 'Integrations: Disabled'
+    | 'Integrations: Config Saved';
 };
 
 type SentryAppEvent = {
@@ -55,7 +61,6 @@ type SingleIntegrationEvent = (ModalOpenEvent | OtherSingleIntegrationEvents) &
     integration: string; //the slug
   };
 
-//TODO(Steve): hook up events
 type MultipleIntegrationsEvent = {
   eventKey: 'integrations.index_viewed';
   eventName: 'Integrations: Index Page Viewed';
@@ -67,7 +72,9 @@ type IntegrationsEventParams = (MultipleIntegrationsEvent | SingleIntegrationEve
     | 'external_install'
     | 'integrations_page'
     | 'legacy_integrations'
+    | 'plugin_details'
     | 'integrations_directory';
+  project_id?: string;
 } & Parameters<Hooks['analytics:track-event']>[0];
 
 /**
diff --git a/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.tsx b/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.tsx
index b6df880481..cdc4bee4fb 100644
--- a/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.tsx
+++ b/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.tsx
@@ -117,11 +117,15 @@ export default function getConfiguration({project}: ConfigParams): NavigationSec
           path: `${pathPrefix}/plugins/`,
           title: t('Legacy Integrations'),
           description: t('View, enable, and disable all integrations for a project'),
+          id: 'legacy_integrations',
+          recordAnalytics: true,
         },
         ...plugins.map(plugin => ({
           path: `${pathPrefix}/plugins/${plugin.id}/`,
           title: plugin.name,
           show: ({access}) => access.has('project:write'),
+          id: 'plugin_details',
+          recordAnalytics: true,
         })),
       ],
     },
diff --git a/src/sentry/static/sentry/app/views/settings/projectPlugins/details.jsx b/src/sentry/static/sentry/app/views/settings/projectPlugins/details.jsx
index 6d7f967ba8..d1cb1ed503 100644
--- a/src/sentry/static/sentry/app/views/settings/projectPlugins/details.jsx
+++ b/src/sentry/static/sentry/app/views/settings/projectPlugins/details.jsx
@@ -13,6 +13,9 @@ import ExternalLink from 'app/components/links/externalLink';
 import PluginConfig from 'app/components/pluginConfig';
 import SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';
 import withPlugins from 'app/utils/withPlugins';
+import withOrganization from 'app/utils/withOrganization';
+import withProject from 'app/utils/withProject';
+import {trackIntegrationEvent} from 'app/utils/integrationUtil';
 
 import {DEPRECATED_PLUGINS} from './constants';
 
@@ -26,6 +29,32 @@ import {DEPRECATED_PLUGINS} from './constants';
  *    PluginsStore
  */
 class ProjectPluginDetails extends AsyncView {
+  componentDidUpdate(prevProps) {
+    super.componentDidUpdate(...arguments);
+    if (prevProps.params.pluginId !== this.props.params.pluginId) {
+      this.recordDetailsViewed();
+    }
+  }
+  componentDidMount() {
+    this.recordDetailsViewed();
+  }
+
+  recordDetailsViewed() {
+    const {pluginId} = this.props.params;
+
+    trackIntegrationEvent(
+      {
+        eventKey: 'integrations.details_viewed',
+        eventName: 'Integrations: Details Viewed',
+        integration: pluginId,
+        integration_type: 'plugin',
+        view: 'plugin_details',
+        project_id: this.props.project.id,
+      },
+      this.props.organization
+    );
+  }
+
   getTitle() {
     const {plugin} = this.state;
     if (plugin && plugin.name) {
@@ -48,12 +77,35 @@ class ProjectPluginDetails extends AsyncView {
     const {projectId, orgId, pluginId} = this.props.params;
 
     addLoadingMessage(t('Saving changes..'));
+    trackIntegrationEvent(
+      {
+        eventKey: 'integrations.uninstall_clicked',
+        eventName: 'Integrations: Uninstall Clicked',
+        integration: pluginId,
+        integration_type: 'plugin',
+        view: 'plugin_details',
+        project_id: this.props.project.id,
+      },
+      this.props.organization
+    );
+
     this.api.request(`/projects/${orgId}/${projectId}/plugins/${pluginId}/`, {
       method: 'POST',
       data: {reset: true},
       success: pluginDetails => {
         this.setState({pluginDetails});
         addSuccessMessage(t('Plugin was reset'));
+        trackIntegrationEvent(
+          {
+            eventKey: 'integrations.uninstall_completed',
+            eventName: 'Integrations: Uninstall Completed',
+            integration: pluginId,
+            integration_type: 'plugin',
+            view: 'plugin_details',
+            project_id: this.props.project.id,
+          },
+          this.props.organization
+        );
       },
       error: () => {
         addErrorMessage(t('An error occurred'));
@@ -63,10 +115,27 @@ class ProjectPluginDetails extends AsyncView {
 
   handleEnable = () => {
     enablePlugin(this.props.params);
+    this.analyticsChangeEnableStatus(true);
   };
 
   handleDisable = () => {
     disablePlugin(this.props.params);
+    this.analyticsChangeEnableStatus(false);
+  };
+
+  analyticsChangeEnableStatus = enabled => {
+    const {pluginId} = this.props.params;
+    trackIntegrationEvent(
+      {
+        eventKey: `integrations.${enabled ? 'enabled' : 'disabled'}`,
+        eventName: `Integrations: ${enabled ? 'Enabled' : 'Disabled'}`,
+        integration: pluginId,
+        integration_type: 'plugin',
+        view: 'plugin_details',
+        project_id: this.props.project.id,
+      },
+      this.props.organization
+    );
   };
 
   // Enabled state is handled via PluginsStore and not via plugins detail
@@ -192,4 +261,4 @@ class ProjectPluginDetails extends AsyncView {
 
 export {ProjectPluginDetails};
 
-export default withPlugins(ProjectPluginDetails);
+export default withProject(withPlugins(withOrganization(ProjectPluginDetails)));
diff --git a/src/sentry/static/sentry/app/views/settings/projectPlugins/index.jsx b/src/sentry/static/sentry/app/views/settings/projectPlugins/index.jsx
index 0ef414adbe..153dd307f6 100644
--- a/src/sentry/static/sentry/app/views/settings/projectPlugins/index.jsx
+++ b/src/sentry/static/sentry/app/views/settings/projectPlugins/index.jsx
@@ -7,20 +7,39 @@ import PermissionAlert from 'app/views/settings/project/permissionAlert';
 import SentryTypes from 'app/sentryTypes';
 import SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';
 import withPlugins from 'app/utils/withPlugins';
+import withOrganization from 'app/utils/withOrganization';
+import withProject from 'app/utils/withProject';
+import {trackIntegrationEvent} from 'app/utils/integrationUtil';
 
 import ProjectPlugins from './projectPlugins';
 
 class ProjectPluginsContainer extends React.Component {
   static propTypes = {
     plugins: SentryTypes.PluginsStore,
+    organization: SentryTypes.Organization,
+    project: SentryTypes.Project,
   };
 
   componentDidMount() {
     this.fetchData();
   }
 
-  fetchData = () => {
-    fetchPlugins(this.props.params);
+  fetchData = async () => {
+    const plugins = await fetchPlugins(this.props.params);
+    const installCount = plugins.filter(
+      plugin => plugin.hasConfiguration && plugin.enabled
+    ).length;
+    trackIntegrationEvent(
+      {
+        eventKey: 'integrations.index_viewed',
+        eventName: 'Integrations: Index Page Viewed',
+        integrations_installed: installCount,
+        view: 'legacy_integrations',
+        project_id: this.props.project.id,
+      },
+      this.props.organization,
+      {startSession: true}
+    );
   };
 
   handleChange = (pluginId, shouldEnable) => {
@@ -54,4 +73,4 @@ class ProjectPluginsContainer extends React.Component {
   }
 }
 
-export default withPlugins(ProjectPluginsContainer);
+export default withProject(withOrganization(withPlugins(ProjectPluginsContainer)));
diff --git a/src/sentry/static/sentry/app/views/settings/projectPlugins/projectPluginRow.jsx b/src/sentry/static/sentry/app/views/settings/projectPlugins/projectPluginRow.jsx
index 53eadb40c2..af29c52ac0 100644
--- a/src/sentry/static/sentry/app/views/settings/projectPlugins/projectPluginRow.jsx
+++ b/src/sentry/static/sentry/app/views/settings/projectPlugins/projectPluginRow.jsx
@@ -13,6 +13,9 @@ import SentryTypes from 'app/sentryTypes';
 import Switch from 'app/components/switch';
 import getDynamicText from 'app/utils/getDynamicText';
 import recreateRoute from 'app/utils/recreateRoute';
+import withOrganization from 'app/utils/withOrganization';
+import withProject from 'app/utils/withProject';
+import {trackIntegrationEvent} from 'app/utils/integrationUtil';
 
 const grayText = css`
   color: #979ba0;
@@ -27,6 +30,17 @@ class ProjectPluginRow extends React.PureComponent {
   handleChange = () => {
     const {onChange, id, enabled} = this.props;
     onChange(id, !enabled);
+    trackIntegrationEvent(
+      {
+        eventKey: `integrations.${!enabled ? 'enabled' : 'disabled'}`,
+        eventName: `Integrations: ${!enabled ? 'Enabled' : 'Disabled'}`,
+        integration: id,
+        integration_type: 'plugin',
+        view: 'legacy_integrations',
+        project_id: this.props.project.id,
+      },
+      this.props.organization
+    );
   };
 
   render() {
@@ -93,7 +107,7 @@ class ProjectPluginRow extends React.PureComponent {
   }
 }
 
-export default ProjectPluginRow;
+export default withOrganization(withProject(ProjectPluginRow));
 
 // Includes icon, name, version, configure link
 const PluginInfo = styled('div')`
diff --git a/tests/js/spec/views/__snapshots__/projectPluginDetails.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectPluginDetails.spec.jsx.snap
index d90cec83fd..8c7453ddcb 100644
--- a/tests/js/spec/views/__snapshots__/projectPluginDetails.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectPluginDetails.spec.jsx.snap
@@ -1,7 +1,7 @@
 // Jest Snapshot v1, https://goo.gl/fbAQLP
 
 exports[`ProjectPluginDetails renders 1`] = `
-<WithOrganizationMockWrapper
+<withProject(WithOrganizationMockWrapper)
   location={
     Object {
       "pathame": "/mock-pathname/",
@@ -56,7 +56,7 @@ exports[`ProjectPluginDetails renders 1`] = `
     }
   }
 >
-  <withProject(withPlugins(ProjectPluginDetails))
+  <WithOrganizationMockWrapper
     location={
       Object {
         "pathame": "/mock-pathname/",
@@ -111,7 +111,7 @@ exports[`ProjectPluginDetails renders 1`] = `
       }
     }
   >
-    <withPlugins(ProjectPluginDetails)
+    <withProject(withPlugins(WithOrganizationMockWrapper))
       location={
         Object {
           "pathame": "/mock-pathname/",
@@ -166,7 +166,7 @@ exports[`ProjectPluginDetails renders 1`] = `
         }
       }
     >
-      <ProjectPluginDetails
+      <withPlugins(WithOrganizationMockWrapper)
         location={
           Object {
             "pathame": "/mock-pathname/",
@@ -208,14 +208,6 @@ exports[`ProjectPluginDetails renders 1`] = `
             "projectId": "project-slug",
           }
         }
-        plugins={
-          Object {
-            "error": null,
-            "loading": true,
-            "pageLinks": null,
-            "plugins": Array [],
-          }
-        }
         project={
           Object {
             "environments": Array [],
@@ -229,128 +221,228 @@ exports[`ProjectPluginDetails renders 1`] = `
           }
         }
       >
-        <SideEffect(DocumentTitle)
-          title="Sentry - Sentry"
+        <WithOrganizationMockWrapper
+          location={
+            Object {
+              "pathame": "/mock-pathname/",
+              "query": Object {},
+            }
+          }
+          organization={
+            Object {
+              "access": Array [
+                "org:read",
+                "org:write",
+                "org:admin",
+                "org:integrations",
+                "project:read",
+                "project:write",
+                "project:admin",
+                "team:read",
+                "team:write",
+                "team:admin",
+              ],
+              "features": Array [],
+              "id": "3",
+              "name": "Organization Name",
+              "onboardingTasks": Array [],
+              "projects": Array [],
+              "scrapeJavaScript": true,
+              "slug": "org-slug",
+              "status": Object {
+                "id": "active",
+                "name": "active",
+              },
+              "teams": Array [],
+            }
+          }
+          params={
+            Object {
+              "orgId": "org-slug",
+              "pluginId": "amazon-sqs",
+              "projectId": "project-slug",
+            }
+          }
+          plugins={
+            Object {
+              "error": null,
+              "loading": true,
+              "pageLinks": null,
+              "plugins": Array [],
+            }
+          }
+          project={
+            Object {
+              "environments": Array [],
+              "hasAccess": true,
+              "id": "2",
+              "isBookmarked": false,
+              "isMember": true,
+              "name": "Project Name",
+              "slug": "project-slug",
+              "teams": Array [],
+            }
+          }
         >
-          <DocumentTitle
-            title="Sentry - Sentry"
+          <ProjectPluginDetails
+            location={
+              Object {
+                "pathame": "/mock-pathname/",
+                "query": Object {},
+              }
+            }
+            organization={
+              Object {
+                "access": Array [
+                  "org:read",
+                  "org:write",
+                  "org:admin",
+                  "org:integrations",
+                  "project:read",
+                  "project:write",
+                  "project:admin",
+                  "team:read",
+                  "team:write",
+                  "team:admin",
+                ],
+                "features": Array [],
+                "id": "3",
+                "name": "Organization Name",
+                "onboardingTasks": Array [],
+                "projects": Array [],
+                "scrapeJavaScript": true,
+                "slug": "org-slug",
+                "status": Object {
+                  "id": "active",
+                  "name": "active",
+                },
+                "teams": Array [],
+              }
+            }
+            params={
+              Object {
+                "orgId": "org-slug",
+                "pluginId": "amazon-sqs",
+                "projectId": "project-slug",
+              }
+            }
+            plugins={
+              Object {
+                "error": null,
+                "loading": true,
+                "pageLinks": null,
+                "plugins": Array [],
+              }
+            }
+            project={
+              Object {
+                "environments": Array [],
+                "hasAccess": true,
+                "id": "2",
+                "isBookmarked": false,
+                "isMember": true,
+                "name": "Project Name",
+                "slug": "project-slug",
+                "teams": Array [],
+              }
+            }
           >
-            <div>
-              <StyledSettingsPageHeading
-                action={
-                  <div
-                    className="pull-right"
-                  >
-                    <ForwardRef
-                      disabled={false}
-                      onClick={[Function]}
-                      size="small"
-                      style={
-                        Object {
-                          "marginRight": "6px",
-                        }
-                      }
-                    >
-                      Enable Plugin
-                    </ForwardRef>
-                    <ForwardRef
-                      onClick={[Function]}
-                      size="small"
-                    >
-                      Reset Configuration
-                    </ForwardRef>
-                  </div>
-                }
-                noTitleStyles={false}
-                title="Amazon SQS"
+            <SideEffect(DocumentTitle)
+              title="Sentry - Sentry"
+            >
+              <DocumentTitle
+                title="Sentry - Sentry"
               >
-                <SettingsPageHeading
-                  action={
-                    <div
-                      className="pull-right"
-                    >
-                      <ForwardRef
-                        disabled={false}
-                        onClick={[Function]}
-                        size="small"
-                        style={
-                          Object {
-                            "marginRight": "6px",
-                          }
-                        }
-                      >
-                        Enable Plugin
-                      </ForwardRef>
-                      <ForwardRef
-                        onClick={[Function]}
-                        size="small"
-                      >
-                        Reset Configuration
-                      </ForwardRef>
-                    </div>
-                  }
-                  className="css-xtfhnp-StyledSettingsPageHeading e1uay4fd4"
-                  noTitleStyles={false}
-                  title="Amazon SQS"
-                >
-                  <div
-                    className="css-xtfhnp-StyledSettingsPageHeading e1uay4fd4"
-                  >
-                    <TitleAndActions>
+                <div>
+                  <StyledSettingsPageHeading
+                    action={
                       <div
-                        className="css-ifzfc5-TitleAndActions e1uay4fd0"
+                        className="pull-right"
                       >
-                        <Title
-                          styled={false}
+                        <ForwardRef
+                          disabled={false}
+                          onClick={[Function]}
+                          size="small"
+                          style={
+                            Object {
+                              "marginRight": "6px",
+                            }
+                          }
                         >
-                          <div
-                            className="css-120v9s3-Title e1uay4fd1"
+                          Enable Plugin
+                        </ForwardRef>
+                        <ForwardRef
+                          onClick={[Function]}
+                          size="small"
+                        >
+                          Reset Configuration
+                        </ForwardRef>
+                      </div>
+                    }
+                    noTitleStyles={false}
+                    title="Amazon SQS"
+                  >
+                    <SettingsPageHeading
+                      action={
+                        <div
+                          className="pull-right"
+                        >
+                          <ForwardRef
+                            disabled={false}
+                            onClick={[Function]}
+                            size="small"
+                            style={
+                              Object {
+                                "marginRight": "6px",
+                              }
+                            }
                           >
-                            <HeaderTitle>
-                              <h4
-                                className="css-1bosio6-HeaderTitle eqkydle2"
-                              >
-                                Amazon SQS
-                              </h4>
-                            </HeaderTitle>
-                          </div>
-                        </Title>
-                        <Action>
+                            Enable Plugin
+                          </ForwardRef>
+                          <ForwardRef
+                            onClick={[Function]}
+                            size="small"
+                          >
+                            Reset Configuration
+                          </ForwardRef>
+                        </div>
+                      }
+                      className="css-xtfhnp-StyledSettingsPageHeading e1uay4fd4"
+                      noTitleStyles={false}
+                      title="Amazon SQS"
+                    >
+                      <div
+                        className="css-xtfhnp-StyledSettingsPageHeading e1uay4fd4"
+                      >
+                        <TitleAndActions>
                           <div
-                            className="css-au7gsx-Action e1uay4fd3"
+                            className="css-ifzfc5-TitleAndActions e1uay4fd0"
                           >
-                            <div
-                              className="pull-right"
+                            <Title
+                              styled={false}
                             >
-                              <forwardRef<Button>
-                                disabled={false}
-                                onClick={[Function]}
-                                size="small"
-                                style={
-                                  Object {
-                                    "marginRight": "6px",
-                                  }
-                                }
+                              <div
+                                className="css-120v9s3-Title e1uay4fd1"
                               >
-                                <Button
-                                  align="center"
-                                  disabled={false}
-                                  forwardRef={null}
-                                  onClick={[Function]}
-                                  size="small"
-                                  style={
-                                    Object {
-                                      "marginRight": "6px",
-                                    }
-                                  }
+                                <HeaderTitle>
+                                  <h4
+                                    className="css-1bosio6-HeaderTitle eqkydle2"
+                                  >
+                                    Amazon SQS
+                                  </h4>
+                                </HeaderTitle>
+                              </div>
+                            </Title>
+                            <Action>
+                              <div
+                                className="css-au7gsx-Action e1uay4fd3"
+                              >
+                                <div
+                                  className="pull-right"
                                 >
-                                  <StyledButton
-                                    aria-disabled={false}
-                                    aria-label="Enable Plugin"
+                                  <forwardRef<Button>
                                     disabled={false}
-                                    forwardRef={null}
                                     onClick={[Function]}
-                                    role="button"
                                     size="small"
                                     style={
                                       Object {
@@ -358,13 +450,11 @@ exports[`ProjectPluginDetails renders 1`] = `
                                       }
                                     }
                                   >
-                                    <Component
-                                      aria-disabled={false}
-                                      aria-label="Enable Plugin"
-                                      className="css-12ogwys-StyledButton edwq9my0"
+                                    <Button
+                                      align="center"
+                                      disabled={false}
                                       forwardRef={null}
                                       onClick={[Function]}
-                                      role="button"
                                       size="small"
                                       style={
                                         Object {
@@ -372,10 +462,11 @@ exports[`ProjectPluginDetails renders 1`] = `
                                         }
                                       }
                                     >
-                                      <button
+                                      <StyledButton
                                         aria-disabled={false}
                                         aria-label="Enable Plugin"
-                                        className="css-12ogwys-StyledButton edwq9my0"
+                                        disabled={false}
+                                        forwardRef={null}
                                         onClick={[Function]}
                                         role="button"
                                         size="small"
@@ -385,426 +476,455 @@ exports[`ProjectPluginDetails renders 1`] = `
                                           }
                                         }
                                       >
-                                        <ButtonLabel
-                                          align="center"
+                                        <Component
+                                          aria-disabled={false}
+                                          aria-label="Enable Plugin"
+                                          className="css-12ogwys-StyledButton edwq9my0"
+                                          forwardRef={null}
+                                          onClick={[Function]}
+                                          role="button"
                                           size="small"
+                                          style={
+                                            Object {
+                                              "marginRight": "6px",
+                                            }
+                                          }
                                         >
-                                          <Component
-                                            align="center"
-                                            className="css-19gcr2f-ButtonLabel edwq9my1"
+                                          <button
+                                            aria-disabled={false}
+                                            aria-label="Enable Plugin"
+                                            className="css-12ogwys-StyledButton edwq9my0"
+                                            onClick={[Function]}
+                                            role="button"
                                             size="small"
+                                            style={
+                                              Object {
+                                                "marginRight": "6px",
+                                              }
+                                            }
                                           >
-                                            <span
-                                              className="css-19gcr2f-ButtonLabel edwq9my1"
+                                            <ButtonLabel
+                                              align="center"
+                                              size="small"
                                             >
-                                              Enable Plugin
-                                            </span>
-                                          </Component>
-                                        </ButtonLabel>
-                                      </button>
-                                    </Component>
-                                  </StyledButton>
-                                </Button>
-                              </forwardRef<Button>>
-                              <forwardRef<Button>
-                                onClick={[Function]}
-                                size="small"
-                              >
-                                <Button
-                                  align="center"
-                                  disabled={false}
-                                  forwardRef={null}
-                                  onClick={[Function]}
-                                  size="small"
-                                >
-                                  <StyledButton
-                                    aria-disabled={false}
-                                    aria-label="Reset Configuration"
-                                    disabled={false}
-                                    forwardRef={null}
+                                              <Component
+                                                align="center"
+                                                className="css-19gcr2f-ButtonLabel edwq9my1"
+                                                size="small"
+                                              >
+                                                <span
+                                                  className="css-19gcr2f-ButtonLabel edwq9my1"
+                                                >
+                                                  Enable Plugin
+                                                </span>
+                                              </Component>
+                                            </ButtonLabel>
+                                          </button>
+                                        </Component>
+                                      </StyledButton>
+                                    </Button>
+                                  </forwardRef<Button>>
+                                  <forwardRef<Button>
                                     onClick={[Function]}
-                                    role="button"
                                     size="small"
                                   >
-                                    <Component
-                                      aria-disabled={false}
-                                      aria-label="Reset Configuration"
-                                      className="css-12ogwys-StyledButton edwq9my0"
+                                    <Button
+                                      align="center"
+                                      disabled={false}
                                       forwardRef={null}
                                       onClick={[Function]}
-                                      role="button"
                                       size="small"
                                     >
-                                      <button
+                                      <StyledButton
                                         aria-disabled={false}
                                         aria-label="Reset Configuration"
-                                        className="css-12ogwys-StyledButton edwq9my0"
+                                        disabled={false}
+                                        forwardRef={null}
                                         onClick={[Function]}
                                         role="button"
                                         size="small"
                                       >
-                                        <ButtonLabel
-                                          align="center"
+                                        <Component
+                                          aria-disabled={false}
+                                          aria-label="Reset Configuration"
+                                          className="css-12ogwys-StyledButton edwq9my0"
+                                          forwardRef={null}
+                                          onClick={[Function]}
+                                          role="button"
                                           size="small"
                                         >
-                                          <Component
-                                            align="center"
-                                            className="css-19gcr2f-ButtonLabel edwq9my1"
+                                          <button
+                                            aria-disabled={false}
+                                            aria-label="Reset Configuration"
+                                            className="css-12ogwys-StyledButton edwq9my0"
+                                            onClick={[Function]}
+                                            role="button"
                                             size="small"
                                           >
-                                            <span
-                                              className="css-19gcr2f-ButtonLabel edwq9my1"
+                                            <ButtonLabel
+                                              align="center"
+                                              size="small"
                                             >
-                                              Reset Configuration
-                                            </span>
-                                          </Component>
-                                        </ButtonLabel>
-                                      </button>
-                                    </Component>
-                                  </StyledButton>
-                                </Button>
-                              </forwardRef<Button>>
-                            </div>
+                                              <Component
+                                                align="center"
+                                                className="css-19gcr2f-ButtonLabel edwq9my1"
+                                                size="small"
+                                              >
+                                                <span
+                                                  className="css-19gcr2f-ButtonLabel edwq9my1"
+                                                >
+                                                  Reset Configuration
+                                                </span>
+                                              </Component>
+                                            </ButtonLabel>
+                                          </button>
+                                        </Component>
+                                      </StyledButton>
+                                    </Button>
+                                  </forwardRef<Button>>
+                                </div>
+                              </div>
+                            </Action>
                           </div>
-                        </Action>
+                        </TitleAndActions>
                       </div>
-                    </TitleAndActions>
-                  </div>
-                </SettingsPageHeading>
-              </StyledSettingsPageHeading>
-              <div
-                className="row"
-              >
-                <div
-                  className="col-md-7"
-                >
-                  <withApi(PluginConfig)
-                    data={
-                      Object {
-                        "assets": Array [],
-                        "author": Object {
-                          "name": "Sentry Team",
-                          "url": "https://github.com/getsentry/sentry",
-                        },
-                        "canDisable": true,
-                        "enabled": false,
-                        "hasConfiguration": true,
-                        "id": "amazon-sqs",
-                        "isHidden": false,
-                        "name": "Amazon SQS",
-                        "slug": "amazon-sqs",
-                        "version": "8.23.0.dev0",
-                      }
-                    }
-                    enabled={false}
-                    onDisablePlugin={[Function]}
-                    organization={
-                      Object {
-                        "access": Array [
-                          "org:read",
-                          "org:write",
-                          "org:admin",
-                          "org:integrations",
-                          "project:read",
-                          "project:write",
-                          "project:admin",
-                          "team:read",
-                          "team:write",
-                          "team:admin",
-                        ],
-                        "features": Array [],
-                        "id": "3",
-                        "name": "Organization Name",
-                        "onboardingTasks": Array [],
-                        "projects": Array [],
-                        "scrapeJavaScript": true,
-                        "slug": "org-slug",
-                        "status": Object {
-                          "id": "active",
-                          "name": "active",
-                        },
-                        "teams": Array [],
-                      }
-                    }
-                    project={
-                      Object {
-                        "environments": Array [],
-                        "hasAccess": true,
-                        "id": "2",
-                        "isBookmarked": false,
-                        "isMember": true,
-                        "name": "Project Name",
-                        "slug": "project-slug",
-                        "teams": Array [],
-                      }
-                    }
+                    </SettingsPageHeading>
+                  </StyledSettingsPageHeading>
+                  <div
+                    className="row"
                   >
-                    <PluginConfig
-                      api={
-                        Client {
-                          "_chain": [Function],
-                          "_wrapRequest": [Function],
-                          "bulkUpdate": [Function],
-                          "handleRequestError": [Function],
-                          "hasProjectBeenRenamed": [Function],
-                        }
-                      }
-                      data={
-                        Object {
-                          "assets": Array [],
-                          "author": Object {
-                            "name": "Sentry Team",
-                            "url": "https://github.com/getsentry/sentry",
-                          },
-                          "canDisable": true,
-                          "enabled": false,
-                          "hasConfiguration": true,
-                          "id": "amazon-sqs",
-                          "isHidden": false,
-                          "name": "Amazon SQS",
-                          "slug": "amazon-sqs",
-                          "version": "8.23.0.dev0",
+                    <div
+                      className="col-md-7"
+                    >
+                      <withApi(PluginConfig)
+                        data={
+                          Object {
+                            "assets": Array [],
+                            "author": Object {
+                              "name": "Sentry Team",
+                              "url": "https://github.com/getsentry/sentry",
+                            },
+                            "canDisable": true,
+                            "enabled": false,
+                            "hasConfiguration": true,
+                            "id": "amazon-sqs",
+                            "isHidden": false,
+                            "name": "Amazon SQS",
+                            "slug": "amazon-sqs",
+                            "version": "8.23.0.dev0",
+                          }
                         }
-                      }
-                      enabled={false}
-                      onDisablePlugin={[Function]}
-                      organization={
-                        Object {
-                          "access": Array [
-                            "org:read",
-                            "org:write",
-                            "org:admin",
-                            "org:integrations",
-                            "project:read",
-                            "project:write",
-                            "project:admin",
-                            "team:read",
-                            "team:write",
-                            "team:admin",
-                          ],
-                          "features": Array [],
-                          "id": "3",
-                          "name": "Organization Name",
-                          "onboardingTasks": Array [],
-                          "projects": Array [],
-                          "scrapeJavaScript": true,
-                          "slug": "org-slug",
-                          "status": Object {
-                            "id": "active",
-                            "name": "active",
-                          },
-                          "teams": Array [],
+                        enabled={false}
+                        onDisablePlugin={[Function]}
+                        organization={
+                          Object {
+                            "access": Array [
+                              "org:read",
+                              "org:write",
+                              "org:admin",
+                              "org:integrations",
+                              "project:read",
+                              "project:write",
+                              "project:admin",
+                              "team:read",
+                              "team:write",
+                              "team:admin",
+                            ],
+                            "features": Array [],
+                            "id": "3",
+                            "name": "Organization Name",
+                            "onboardingTasks": Array [],
+                            "projects": Array [],
+                            "scrapeJavaScript": true,
+                            "slug": "org-slug",
+                            "status": Object {
+                              "id": "active",
+                              "name": "active",
+                            },
+                            "teams": Array [],
+                          }
                         }
-                      }
-                      project={
-                        Object {
-                          "environments": Array [],
-                          "hasAccess": true,
-                          "id": "2",
-                          "isBookmarked": false,
-                          "isMember": true,
-                          "name": "Project Name",
-                          "slug": "project-slug",
-                          "teams": Array [],
+                        project={
+                          Object {
+                            "environments": Array [],
+                            "hasAccess": true,
+                            "id": "2",
+                            "isBookmarked": false,
+                            "isMember": true,
+                            "name": "Project Name",
+                            "slug": "project-slug",
+                            "teams": Array [],
+                          }
                         }
-                      }
-                    >
-                      <Panel
-                        className="plugin-config ref-plugin-config-amazon-sqs"
                       >
-                        <Component
-                          className="plugin-config ref-plugin-config-amazon-sqs css-15hwgrz-Panel e119nu470"
+                        <PluginConfig
+                          api={
+                            Client {
+                              "_chain": [Function],
+                              "_wrapRequest": [Function],
+                              "bulkUpdate": [Function],
+                              "handleRequestError": [Function],
+                              "hasProjectBeenRenamed": [Function],
+                            }
+                          }
+                          data={
+                            Object {
+                              "assets": Array [],
+                              "author": Object {
+                                "name": "Sentry Team",
+                                "url": "https://github.com/getsentry/sentry",
+                              },
+                              "canDisable": true,
+                              "enabled": false,
+                              "hasConfiguration": true,
+                              "id": "amazon-sqs",
+                              "isHidden": false,
+                              "name": "Amazon SQS",
+                              "slug": "amazon-sqs",
+                              "version": "8.23.0.dev0",
+                            }
+                          }
+                          enabled={false}
+                          onDisablePlugin={[Function]}
+                          organization={
+                            Object {
+                              "access": Array [
+                                "org:read",
+                                "org:write",
+                                "org:admin",
+                                "org:integrations",
+                                "project:read",
+                                "project:write",
+                                "project:admin",
+                                "team:read",
+                                "team:write",
+                                "team:admin",
+                              ],
+                              "features": Array [],
+                              "id": "3",
+                              "name": "Organization Name",
+                              "onboardingTasks": Array [],
+                              "projects": Array [],
+                              "scrapeJavaScript": true,
+                              "slug": "org-slug",
+                              "status": Object {
+                                "id": "active",
+                                "name": "active",
+                              },
+                              "teams": Array [],
+                            }
+                          }
+                          project={
+                            Object {
+                              "environments": Array [],
+                              "hasAccess": true,
+                              "id": "2",
+                              "isBookmarked": false,
+                              "isMember": true,
+                              "name": "Project Name",
+                              "slug": "project-slug",
+                              "teams": Array [],
+                            }
+                          }
                         >
-                          <div
-                            className="plugin-config ref-plugin-config-amazon-sqs css-15hwgrz-Panel e119nu470"
+                          <Panel
+                            className="plugin-config ref-plugin-config-amazon-sqs"
                           >
-                            <PanelHeader
-                              hasButtons={true}
+                            <Component
+                              className="plugin-config ref-plugin-config-amazon-sqs css-15hwgrz-Panel e119nu470"
                             >
                               <div
-                                className="css-yhsu7n-PanelHeader en8g1d30"
+                                className="plugin-config ref-plugin-config-amazon-sqs css-15hwgrz-Panel e119nu470"
                               >
-                                <PluginName>
+                                <PanelHeader
+                                  hasButtons={true}
+                                >
                                   <div
-                                    className="css-1wbtb06-PluginName e1ueudyh0"
+                                    className="css-yhsu7n-PanelHeader en8g1d30"
                                   >
-                                    <StyledPluginIcon
-                                      pluginId="amazon-sqs"
-                                      size={20}
-                                    >
+                                    <PluginName>
                                       <div
-                                        className="css-10inpvs-PluginIcon-StyledPluginIcon e1ueudyh1"
-                                        size={20}
-                                      />
-                                    </StyledPluginIcon>
-                                    <span>
-                                      Amazon SQS
-                                    </span>
+                                        className="css-1wbtb06-PluginName e1ueudyh0"
+                                      >
+                                        <StyledPluginIcon
+                                          pluginId="amazon-sqs"
+                                          size={20}
+                                        >
+                                          <div
+                                            className="css-10inpvs-PluginIcon-StyledPluginIcon e1ueudyh1"
+                                            size={20}
+                                          />
+                                        </StyledPluginIcon>
+                                        <span>
+                                          Amazon SQS
+                                        </span>
+                                      </div>
+                                    </PluginName>
                                   </div>
-                                </PluginName>
-                              </div>
-                            </PanelHeader>
-                            <StyledPanelBody
-                              direction="column"
-                              disablePadding={true}
-                              flex={false}
-                            >
-                              <PanelBody
-                                className="css-1b3dypq-StyledPanelBody e1ueudyh4"
-                                direction="column"
-                                disablePadding={true}
-                                flex={false}
-                              >
-                                <EmotionCssPropInternal
-                                  __EMOTION_LABEL_PLEASE_DO_NOT_USE__="PanelBody"
-                                  __EMOTION_TYPE_PLEASE_DO_NOT_USE__="div"
-                                  className="css-1b3dypq-StyledPanelBody e1ueudyh4"
-                                  css={
-                                    Object {
-                                      "map": undefined,
-                                      "name": "b1rh9y-PanelBody",
-                                      "next": undefined,
-                                      "styles": "h1,h2,h3,h4,h5,h6,p,ul,ol,table,dl,blockquote,form,pre,.auto-select-text,.section,[class^='highlight-']{margin-bottom:20px;&:last-child{margin-bottom:0;}}h1,h2,h3,h4,h5,h6{line-height:1.2;}p,ul,ol,blockquote{line-height:1.5;}h1{font-size:2em;}h2{font-size:1.75em;}h3{font-size:1.5em;}h4{font-size:1.25em;}h5{font-size:1em;}pre{word-break:break-all;white-space:pre-wrap;};;label:PanelBody;",
-                                      "toString": [Function],
-                                    }
-                                  }
+                                </PanelHeader>
+                                <StyledPanelBody
+                                  direction="column"
+                                  disablePadding={true}
+                                  flex={false}
                                 >
-                                  <div
-                                    className="e1ueudyh4 css-6qfguy-PanelBody-StyledPanelBody"
+                                  <PanelBody
+                                    className="css-1b3dypq-StyledPanelBody e1ueudyh4"
+                                    direction="column"
+                                    disablePadding={true}
+                                    flex={false}
                                   >
-                                    <div
-                                      dangerouslySetInnerHTML={
-                                        Object {
-                                          "__html": undefined,
-                                        }
-                                      }
-                                    />
-                                    <PluginSettings
-                                      organization={
+                                    <EmotionCssPropInternal
+                                      __EMOTION_LABEL_PLEASE_DO_NOT_USE__="PanelBody"
+                                      __EMOTION_TYPE_PLEASE_DO_NOT_USE__="div"
+                                      className="css-1b3dypq-StyledPanelBody e1ueudyh4"
+                                      css={
                                         Object {
-                                          "access": Array [
-                                            "org:read",
-                                            "org:write",
-                                            "org:admin",
-                                            "org:integrations",
-                                            "project:read",
-                                            "project:write",
-                                            "project:admin",
-                                            "team:read",
-                                            "team:write",
-                                            "team:admin",
-                                          ],
-                                          "features": Array [],
-                                          "id": "3",
-                                          "name": "Organization Name",
-                                          "onboardingTasks": Array [],
-                                          "projects": Array [],
-                                          "scrapeJavaScript": true,
-                                          "slug": "org-slug",
-                                          "status": Object {
-                                            "id": "active",
-                                            "name": "active",
-                                          },
-                                          "teams": Array [],
+                                          "map": undefined,
+                                          "name": "b1rh9y-PanelBody",
+                                          "next": undefined,
+                                          "styles": "h1,h2,h3,h4,h5,h6,p,ul,ol,table,dl,blockquote,form,pre,.auto-select-text,.section,[class^='highlight-']{margin-bottom:20px;&:last-child{margin-bottom:0;}}h1,h2,h3,h4,h5,h6{line-height:1.2;}p,ul,ol,blockquote{line-height:1.5;}h1{font-size:2em;}h2{font-size:1.75em;}h3{font-size:1.5em;}h4{font-size:1.25em;}h5{font-size:1em;}pre{word-break:break-all;white-space:pre-wrap;};;label:PanelBody;",
+                                          "toString": [Function],
                                         }
                                       }
-                                      plugin={
-                                        DefaultPlugin {
-                                          "assets": Array [],
-                                          "author": Object {
-                                            "name": "Sentry Team",
-                                            "url": "https://github.com/getsentry/sentry",
-                                          },
-                                          "canDisable": true,
-                                          "enabled": false,
-                                          "hasConfiguration": true,
-                                          "id": "amazon-sqs",
-                                          "isHidden": false,
-                                          "name": "Amazon SQS",
-                                          "slug": "amazon-sqs",
-                                          "version": "8.23.0.dev0",
-                                        }
-                                      }
-                                      project={
-                                        Object {
-                                          "environments": Array [],
-                                          "hasAccess": true,
-                                          "id": "2",
-                                          "isBookmarked": false,
-                                          "isMember": true,
-                                          "name": "Project Name",
-                                          "slug": "project-slug",
-                                          "teams": Array [],
-                                        }
-                                      }
-                                    />
-                                  </div>
-                                </EmotionCssPropInternal>
-                              </PanelBody>
-                            </StyledPanelBody>
-                          </div>
-                        </Component>
-                      </Panel>
-                    </PluginConfig>
-                  </withApi(PluginConfig)>
-                </div>
-                <div
-                  className="col-md-4 col-md-offset-1"
-                >
-                  <div
-                    className="pluginDetails-meta"
-                  >
-                    <h4>
-                      Plugin Information
-                    </h4>
-                    <dl
-                      className="flat"
+                                    >
+                                      <div
+                                        className="e1ueudyh4 css-6qfguy-PanelBody-StyledPanelBody"
+                                      >
+                                        <div
+                                          dangerouslySetInnerHTML={
+                                            Object {
+                                              "__html": undefined,
+                                            }
+                                          }
+                                        />
+                                        <PluginSettings
+                                          organization={
+                                            Object {
+                                              "access": Array [
+                                                "org:read",
+                                                "org:write",
+                                                "org:admin",
+                                                "org:integrations",
+                                                "project:read",
+                                                "project:write",
+                                                "project:admin",
+                                                "team:read",
+                                                "team:write",
+                                                "team:admin",
+                                              ],
+                                              "features": Array [],
+                                              "id": "3",
+                                              "name": "Organization Name",
+                                              "onboardingTasks": Array [],
+                                              "projects": Array [],
+                                              "scrapeJavaScript": true,
+                                              "slug": "org-slug",
+                                              "status": Object {
+                                                "id": "active",
+                                                "name": "active",
+                                              },
+                                              "teams": Array [],
+                                            }
+                                          }
+                                          plugin={
+                                            DefaultPlugin {
+                                              "assets": Array [],
+                                              "author": Object {
+                                                "name": "Sentry Team",
+                                                "url": "https://github.com/getsentry/sentry",
+                                              },
+                                              "canDisable": true,
+                                              "enabled": false,
+                                              "hasConfiguration": true,
+                                              "id": "amazon-sqs",
+                                              "isHidden": false,
+                                              "name": "Amazon SQS",
+                                              "slug": "amazon-sqs",
+                                              "version": "8.23.0.dev0",
+                                            }
+                                          }
+                                          project={
+                                            Object {
+                                              "environments": Array [],
+                                              "hasAccess": true,
+                                              "id": "2",
+                                              "isBookmarked": false,
+                                              "isMember": true,
+                                              "name": "Project Name",
+                                              "slug": "project-slug",
+                                              "teams": Array [],
+                                            }
+                                          }
+                                        />
+                                      </div>
+                                    </EmotionCssPropInternal>
+                                  </PanelBody>
+                                </StyledPanelBody>
+                              </div>
+                            </Component>
+                          </Panel>
+                        </PluginConfig>
+                      </withApi(PluginConfig)>
+                    </div>
+                    <div
+                      className="col-md-4 col-md-offset-1"
                     >
-                      <dt>
-                        Name
-                      </dt>
-                      <dd>
-                        Amazon SQS
-                      </dd>
-                      <dt>
-                        Author
-                      </dt>
-                      <dd>
-                        Sentry Team
-                      </dd>
-                      <div>
-                        <dt>
-                          URL
-                        </dt>
-                        <dd>
-                          <ForwardRef
-                            href="https://github.com/getsentry/sentry"
-                          >
-                            <a
-                              href="https://github.com/getsentry/sentry"
-                              rel="noreferrer noopener"
-                              target="_blank"
-                            >
-                              github.com/getsentry/sentry
-                            </a>
-                          </ForwardRef>
-                        </dd>
+                      <div
+                        className="pluginDetails-meta"
+                      >
+                        <h4>
+                          Plugin Information
+                        </h4>
+                        <dl
+                          className="flat"
+                        >
+                          <dt>
+                            Name
+                          </dt>
+                          <dd>
+                            Amazon SQS
+                          </dd>
+                          <dt>
+                            Author
+                          </dt>
+                          <dd>
+                            Sentry Team
+                          </dd>
+                          <div>
+                            <dt>
+                              URL
+                            </dt>
+                            <dd>
+                              <ForwardRef
+                                href="https://github.com/getsentry/sentry"
+                              >
+                                <a
+                                  href="https://github.com/getsentry/sentry"
+                                  rel="noreferrer noopener"
+                                  target="_blank"
+                                >
+                                  github.com/getsentry/sentry
+                                </a>
+                              </ForwardRef>
+                            </dd>
+                          </div>
+                          <dt>
+                            Version
+                          </dt>
+                          <dd>
+                            8.23.0.dev0
+                          </dd>
+                        </dl>
                       </div>
-                      <dt>
-                        Version
-                      </dt>
-                      <dd>
-                        8.23.0.dev0
-                      </dd>
-                    </dl>
+                    </div>
                   </div>
                 </div>
-              </div>
-            </div>
-          </DocumentTitle>
-        </SideEffect(DocumentTitle)>
-      </ProjectPluginDetails>
-    </withPlugins(ProjectPluginDetails)>
-  </withProject(withPlugins(ProjectPluginDetails))>
-</WithOrganizationMockWrapper>
+              </DocumentTitle>
+            </SideEffect(DocumentTitle)>
+          </ProjectPluginDetails>
+        </WithOrganizationMockWrapper>
+      </withPlugins(WithOrganizationMockWrapper)>
+    </withProject(withPlugins(WithOrganizationMockWrapper))>
+  </WithOrganizationMockWrapper>
+</withProject(WithOrganizationMockWrapper)>
 `;
diff --git a/tests/js/spec/views/projectPlugins/__snapshots__/projectPlugins.spec.jsx.snap b/tests/js/spec/views/projectPlugins/__snapshots__/projectPlugins.spec.jsx.snap
index fc801f4997..8665b18426 100644
--- a/tests/js/spec/views/projectPlugins/__snapshots__/projectPlugins.spec.jsx.snap
+++ b/tests/js/spec/views/projectPlugins/__snapshots__/projectPlugins.spec.jsx.snap
@@ -32,7 +32,7 @@ exports[`ProjectPlugins renders 1`] = `
       key="amazon-sqs"
       p={2}
     >
-      <ProjectPluginRow
+      <WithOrganizationMockWrapper
         assets={Array []}
         author={
           Object {
@@ -60,7 +60,7 @@ exports[`ProjectPlugins renders 1`] = `
       key="github"
       p={2}
     >
-      <ProjectPluginRow
+      <WithOrganizationMockWrapper
         assets={Array []}
         author={
           Object {
diff --git a/tests/js/spec/views/projectPlugins/__snapshots__/projectPluginsRow.spec.jsx.snap b/tests/js/spec/views/projectPlugins/__snapshots__/projectPluginsRow.spec.jsx.snap
index b1e966e6a1..ad0c5fa0ef 100644
--- a/tests/js/spec/views/projectPlugins/__snapshots__/projectPluginsRow.spec.jsx.snap
+++ b/tests/js/spec/views/projectPlugins/__snapshots__/projectPluginsRow.spec.jsx.snap
@@ -1,7 +1,7 @@
 // Jest Snapshot v1, https://goo.gl/fbAQLP
 
 exports[`ProjectPluginRow renders 1`] = `
-<ProjectPluginRow
+<WithOrganizationMockWrapper
   assets={Array []}
   author={
     Object {
@@ -20,19 +20,59 @@ exports[`ProjectPluginRow renders 1`] = `
   slug="amazon-sqs"
   version="8.23.0.dev0"
 >
-  <WithOrganizationMockWrapper
-    access={
-      Array [
-        "project:write",
-      ]
+  <withProject(ProjectPluginRow)
+    assets={Array []}
+    author={
+      Object {
+        "name": "Sentry Team",
+        "url": "https://github.com/getsentry/sentry",
+      }
     }
-  >
-    <withConfig(Access)
-      access={
-        Array [
+    canDisable={true}
+    enabled={false}
+    hasConfiguration={true}
+    id="amazon-sqs"
+    isHidden={false}
+    name="Amazon SQS"
+    orgId="org-slug"
+    organization={
+      Object {
+        "access": Array [
           "project:write",
-        ]
+        ],
+        "features": Array [],
+        "id": "3",
+        "name": "Organization Name",
+        "onboardingTasks": Array [],
+        "projects": Array [],
+        "scrapeJavaScript": true,
+        "slug": "org-slug",
+        "status": Object {
+          "id": "active",
+          "name": "active",
+        },
+        "teams": Array [],
+      }
+    }
+    projectId="project-slug"
+    slug="amazon-sqs"
+    version="8.23.0.dev0"
+  >
+    <ProjectPluginRow
+      assets={Array []}
+      author={
+        Object {
+          "name": "Sentry Team",
+          "url": "https://github.com/getsentry/sentry",
+        }
       }
+      canDisable={true}
+      enabled={false}
+      hasConfiguration={true}
+      id="amazon-sqs"
+      isHidden={false}
+      name="Amazon SQS"
+      orgId="org-slug"
       organization={
         Object {
           "access": Array [
@@ -52,215 +92,265 @@ exports[`ProjectPluginRow renders 1`] = `
           "teams": Array [],
         }
       }
+      project={
+        Object {
+          "environments": Array [],
+          "hasAccess": true,
+          "id": "2",
+          "isBookmarked": false,
+          "isMember": true,
+          "name": "Project Name",
+          "slug": "project-slug",
+          "teams": Array [],
+        }
+      }
+      projectId="project-slug"
+      slug="amazon-sqs"
+      version="8.23.0.dev0"
     >
-      <Access
+      <WithOrganizationMockWrapper
         access={
           Array [
             "project:write",
           ]
         }
-        config={
-          Object {
-            "features": Set {},
-            "messages": Array [],
-            "user": Object {
-              "email": "foo@example.com",
-              "flags": Object {
-                "newsletter_consent_prompt": false,
-              },
-              "hasPasswordAuth": true,
-              "id": "1",
-              "isAuthenticated": true,
-              "name": "Foo Bar",
-              "options": Object {
-                "timezone": "UTC",
-              },
-              "permissions": Set {},
-              "username": "foo@example.com",
-            },
-          }
-        }
-        isSuperuser={false}
-        organization={
-          Object {
-            "access": Array [
+      >
+        <withConfig(Access)
+          access={
+            Array [
               "project:write",
-            ],
-            "features": Array [],
-            "id": "3",
-            "name": "Organization Name",
-            "onboardingTasks": Array [],
-            "projects": Array [],
-            "scrapeJavaScript": true,
-            "slug": "org-slug",
-            "status": Object {
-              "id": "active",
-              "name": "active",
-            },
-            "teams": Array [],
+            ]
+          }
+          organization={
+            Object {
+              "access": Array [
+                "project:write",
+              ],
+              "features": Array [],
+              "id": "3",
+              "name": "Organization Name",
+              "onboardingTasks": Array [],
+              "projects": Array [],
+              "scrapeJavaScript": true,
+              "slug": "org-slug",
+              "status": Object {
+                "id": "active",
+                "name": "active",
+              },
+              "teams": Array [],
+            }
           }
-        }
-        renderNoAccessMessage={false}
-        requireAll={true}
-      >
-        <Styled(div)
-          alignItems="center"
-          className="amazon-sqs"
-          flex="1"
-          key="amazon-sqs"
         >
-          <div
-            className="amazon-sqs css-1j7oo6s"
+          <Access
+            access={
+              Array [
+                "project:write",
+              ]
+            }
+            config={
+              Object {
+                "features": Set {},
+                "messages": Array [],
+                "user": Object {
+                  "email": "foo@example.com",
+                  "flags": Object {
+                    "newsletter_consent_prompt": false,
+                  },
+                  "hasPasswordAuth": true,
+                  "id": "1",
+                  "isAuthenticated": true,
+                  "name": "Foo Bar",
+                  "options": Object {
+                    "timezone": "UTC",
+                  },
+                  "permissions": Set {},
+                  "username": "foo@example.com",
+                },
+              }
+            }
+            isSuperuser={false}
+            organization={
+              Object {
+                "access": Array [
+                  "project:write",
+                ],
+                "features": Array [],
+                "id": "3",
+                "name": "Organization Name",
+                "onboardingTasks": Array [],
+                "projects": Array [],
+                "scrapeJavaScript": true,
+                "slug": "org-slug",
+                "status": Object {
+                  "id": "active",
+                  "name": "active",
+                },
+                "teams": Array [],
+              }
+            }
+            renderNoAccessMessage={false}
+            requireAll={true}
           >
-            <PluginInfo>
+            <Styled(div)
+              alignItems="center"
+              className="amazon-sqs"
+              flex="1"
+              key="amazon-sqs"
+            >
               <div
-                className="css-1jrzgda-PluginInfo e1y7j6vq0"
+                className="amazon-sqs css-1j7oo6s"
               >
-                <StyledPluginIcon
-                  pluginId="amazon-sqs"
-                  size={48}
-                >
+                <PluginInfo>
                   <div
-                    className="css-1xh0prp-PluginIcon-StyledPluginIcon e1y7j6vq2"
-                    size={48}
-                  />
-                </StyledPluginIcon>
-                <Styled(div)
-                  flexDirection="column"
-                  justifyContent="center"
-                >
-                  <div
-                    className="css-bq2mgp"
+                    className="css-1jrzgda-PluginInfo e1y7j6vq0"
                   >
-                    <PluginName>
+                    <StyledPluginIcon
+                      pluginId="amazon-sqs"
+                      size={48}
+                    >
                       <div
-                        className="css-1rrljgj-PluginName e1y7j6vq1"
-                      >
-                        Amazon SQS 
-                        <Version>
-                          <span
-                            className="css-1czymow-Version e1y7j6vq3"
-                          >
-                            v8.23.0.dev0
-                          </span>
-                        </Version>
-                      </div>
-                    </PluginName>
-                    <div>
-                      <EmotionCssPropInternal
-                        __EMOTION_TYPE_PLEASE_DO_NOT_USE__={
-                          Object {
-                            "$$typeof": Symbol(react.forward_ref),
-                            "render": [Function],
-                          }
-                        }
-                        css={
-                          Object {
-                            "name": "1nx57m5-grayText",
-                            "styles": "color:#979ba0;;label:grayText;",
-                          }
-                        }
-                        href="https://github.com/getsentry/sentry"
+                        className="css-1xh0prp-PluginIcon-StyledPluginIcon e1y7j6vq2"
+                        size={48}
+                      />
+                    </StyledPluginIcon>
+                    <Styled(div)
+                      flexDirection="column"
+                      justifyContent="center"
+                    >
+                      <div
+                        className="css-bq2mgp"
                       >
-                        <ForwardRef
-                          className="css-1nx57m5-grayText"
-                          href="https://github.com/getsentry/sentry"
-                        >
-                          <a
-                            className="css-1nx57m5-grayText"
-                            href="https://github.com/getsentry/sentry"
-                            rel="noreferrer noopener"
-                            target="_blank"
+                        <PluginName>
+                          <div
+                            className="css-1rrljgj-PluginName e1y7j6vq1"
                           >
-                            Sentry Team
-                          </a>
-                        </ForwardRef>
-                      </EmotionCssPropInternal>
-                      <span>
-                         
-                        
-                         
-                        <EmotionCssPropInternal
-                          __EMOTION_TYPE_PLEASE_DO_NOT_USE__={[Function]}
-                          css={
-                            Object {
-                              "name": "1nx57m5-grayText",
-                              "styles": "color:#979ba0;;label:grayText;",
+                            Amazon SQS 
+                            <Version>
+                              <span
+                                className="css-1czymow-Version e1y7j6vq3"
+                              >
+                                v8.23.0.dev0
+                              </span>
+                            </Version>
+                          </div>
+                        </PluginName>
+                        <div>
+                          <EmotionCssPropInternal
+                            __EMOTION_TYPE_PLEASE_DO_NOT_USE__={
+                              Object {
+                                "$$typeof": Symbol(react.forward_ref),
+                                "render": [Function],
+                              }
                             }
-                          }
-                          to="amazon-sqs"
-                        >
-                          <Link
-                            className="css-1nx57m5-grayText"
-                            onlyActiveOnIndex={false}
-                            style={Object {}}
-                            to="amazon-sqs"
+                            css={
+                              Object {
+                                "name": "1nx57m5-grayText",
+                                "styles": "color:#979ba0;;label:grayText;",
+                              }
+                            }
+                            href="https://github.com/getsentry/sentry"
                           >
-                            <a
+                            <ForwardRef
                               className="css-1nx57m5-grayText"
-                              onClick={[Function]}
-                              style={Object {}}
+                              href="https://github.com/getsentry/sentry"
+                            >
+                              <a
+                                className="css-1nx57m5-grayText"
+                                href="https://github.com/getsentry/sentry"
+                                rel="noreferrer noopener"
+                                target="_blank"
+                              >
+                                Sentry Team
+                              </a>
+                            </ForwardRef>
+                          </EmotionCssPropInternal>
+                          <span>
+                             
+                            
+                             
+                            <EmotionCssPropInternal
+                              __EMOTION_TYPE_PLEASE_DO_NOT_USE__={[Function]}
+                              css={
+                                Object {
+                                  "name": "1nx57m5-grayText",
+                                  "styles": "color:#979ba0;;label:grayText;",
+                                }
+                              }
+                              to="amazon-sqs"
                             >
-                              Configure plugin
-                            </a>
-                          </Link>
-                        </EmotionCssPropInternal>
-                      </span>
-                    </div>
+                              <Link
+                                className="css-1nx57m5-grayText"
+                                onlyActiveOnIndex={false}
+                                style={Object {}}
+                                to="amazon-sqs"
+                              >
+                                <a
+                                  className="css-1nx57m5-grayText"
+                                  onClick={[Function]}
+                                  style={Object {}}
+                                >
+                                  Configure plugin
+                                </a>
+                              </Link>
+                            </EmotionCssPropInternal>
+                          </span>
+                        </div>
+                      </div>
+                    </Styled(div)>
                   </div>
-                </Styled(div)>
-              </div>
-            </PluginInfo>
-            <ForwardRef
-              isActive={false}
-              isDisabled={false}
-              size="lg"
-              toggle={[Function]}
-            >
-              <Switch
-                forwardRef={null}
-                isActive={false}
-                isDisabled={false}
-                size="lg"
-                toggle={[Function]}
-              >
-                <SwitchButton
-                  aria-checked={false}
-                  data-test-id="switch"
+                </PluginInfo>
+                <ForwardRef
                   isActive={false}
                   isDisabled={false}
-                  onClick={[Function]}
-                  role="checkbox"
                   size="lg"
-                  type="button"
+                  toggle={[Function]}
                 >
-                  <button
-                    aria-checked={false}
-                    className="css-1dy0xgk-SwitchButton ezmyi9u0"
-                    data-test-id="switch"
-                    onClick={[Function]}
-                    role="checkbox"
+                  <Switch
+                    forwardRef={null}
+                    isActive={false}
+                    isDisabled={false}
                     size="lg"
-                    type="button"
+                    toggle={[Function]}
                   >
-                    <Toggle
+                    <SwitchButton
+                      aria-checked={false}
+                      data-test-id="switch"
                       isActive={false}
                       isDisabled={false}
+                      onClick={[Function]}
+                      role="checkbox"
                       size="lg"
+                      type="button"
                     >
-                      <span
-                        className="css-1oum9in-Toggle ezmyi9u1"
+                      <button
+                        aria-checked={false}
+                        className="css-1dy0xgk-SwitchButton ezmyi9u0"
+                        data-test-id="switch"
+                        onClick={[Function]}
+                        role="checkbox"
                         size="lg"
-                      />
-                    </Toggle>
-                  </button>
-                </SwitchButton>
-              </Switch>
-            </ForwardRef>
-          </div>
-        </Styled(div)>
-      </Access>
-    </withConfig(Access)>
-  </WithOrganizationMockWrapper>
-</ProjectPluginRow>
+                        type="button"
+                      >
+                        <Toggle
+                          isActive={false}
+                          isDisabled={false}
+                          size="lg"
+                        >
+                          <span
+                            className="css-1oum9in-Toggle ezmyi9u1"
+                            size="lg"
+                          />
+                        </Toggle>
+                      </button>
+                    </SwitchButton>
+                  </Switch>
+                </ForwardRef>
+              </div>
+            </Styled(div)>
+          </Access>
+        </withConfig(Access)>
+      </WithOrganizationMockWrapper>
+    </ProjectPluginRow>
+  </withProject(ProjectPluginRow)>
+</WithOrganizationMockWrapper>
 `;
